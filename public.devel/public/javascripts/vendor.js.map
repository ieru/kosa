{"version":3,"file":"public/javascripts/vendor.js","sources":["vendor/scripts/console-helper.js","vendor/scripts/jquery-1.10.2.min.js","vendor/scripts/lodash.custom.min.js","vendor/scripts/backbone-0.9.9.js","vendor/scripts/backbone-mediator.js","vendor/scripts/jit.js","vendor/scripts/select2.min.js","node_modules/auto-reload-brunch/vendor/auto-reload.js","node_modules/handlebars-brunch/vendor/handlebars.runtime-1.0.rc.1.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A,CCXA;AACA;AACA;AACA;AACA;AACA;AACA;A,CCNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A,CC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A,CC7/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A,CCxMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A,CCt5TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A,CCrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A,CC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A","sourcesContent":["// Make it safe to do console.log() always.\n(function (con) {\n  var method;\n  var dummy = function() {};\n  var methods = ('assert,count,debug,dir,dirxml,error,exception,group,' +\n     'groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,' + \n     'time,timeEnd,trace,warn').split(',');\n  while (method = methods.pop()) {\n    con[method] = con[method] || dummy;\n  }\n})(window.console = window.console || {});\n","/*! jQuery v1.10.2 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license\n//@ sourceMappingURL=jquery-1.10.2.min.map\n*/\n(function(e,t){var n,r,i=typeof t,o=e.location,a=e.document,s=a.documentElement,l=e.jQuery,u=e.$,c={},p=[],f=\"1.10.2\",d=p.concat,h=p.push,g=p.slice,m=p.indexOf,y=c.toString,v=c.hasOwnProperty,b=f.trim,x=function(e,t){return new x.fn.init(e,t,r)},w=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,T=/\\S+/g,C=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,N=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,k=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,E=/^[\\],:{}\\s]*$/,S=/(?:^|:|,)(?:\\s*\\[)+/g,A=/\\\\(?:[\"\\\\\\/bfnrt]|u[\\da-fA-F]{4})/g,j=/\"[^\"\\\\\\r\\n]*\"|true|false|null|-?(?:\\d+\\.|)\\d+(?:[eE][+-]?\\d+|)/g,D=/^-ms-/,L=/-([\\da-z])/gi,H=function(e,t){return t.toUpperCase()},q=function(e){(a.addEventListener||\"load\"===e.type||\"complete\"===a.readyState)&&(_(),x.ready())},_=function(){a.addEventListener?(a.removeEventListener(\"DOMContentLoaded\",q,!1),e.removeEventListener(\"load\",q,!1)):(a.detachEvent(\"onreadystatechange\",q),e.detachEvent(\"onload\",q))};x.fn=x.prototype={jquery:f,constructor:x,init:function(e,n,r){var i,o;if(!e)return this;if(\"string\"==typeof e){if(i=\"<\"===e.charAt(0)&&\">\"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof x?n[0]:n,x.merge(this,x.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:a,!0)),k.test(i[1])&&x.isPlainObject(n))for(i in n)x.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(o=a.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=a,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):x.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),x.makeArray(e,this))},selector:\"\",length:0,toArray:function(){return g.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return x.each(this,e,t)},ready:function(e){return x.ready.promise().done(e),this},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},x.fn.init.prototype=x.fn,x.extend=x.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for(\"boolean\"==typeof s&&(c=s,s=arguments[1]||{},l=2),\"object\"==typeof s||x.isFunction(s)||(s={}),u===l&&(s=this,--l);u>l;l++)if(null!=(o=arguments[l]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(x.isPlainObject(r)||(n=x.isArray(r)))?(n?(n=!1,a=e&&x.isArray(e)?e:[]):a=e&&x.isPlainObject(e)?e:{},s[i]=x.extend(c,a,r)):r!==t&&(s[i]=r));return s},x.extend({expando:\"jQuery\"+(f+Math.random()).replace(/\\D/g,\"\"),noConflict:function(t){return e.$===x&&(e.$=u),t&&e.jQuery===x&&(e.jQuery=l),x},isReady:!1,readyWait:1,holdReady:function(e){e?x.readyWait++:x.ready(!0)},ready:function(e){if(e===!0?!--x.readyWait:!x.isReady){if(!a.body)return setTimeout(x.ready);x.isReady=!0,e!==!0&&--x.readyWait>0||(n.resolveWith(a,[x]),x.fn.trigger&&x(a).trigger(\"ready\").off(\"ready\"))}},isFunction:function(e){return\"function\"===x.type(e)},isArray:Array.isArray||function(e){return\"array\"===x.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?c[y.call(e)]||\"object\":typeof e},isPlainObject:function(e){var n;if(!e||\"object\"!==x.type(e)||e.nodeType||x.isWindow(e))return!1;try{if(e.constructor&&!v.call(e,\"constructor\")&&!v.call(e.constructor.prototype,\"isPrototypeOf\"))return!1}catch(r){return!1}if(x.support.ownLast)for(n in e)return v.call(e,n);for(n in e);return n===t||v.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||\"string\"!=typeof e)return null;\"boolean\"==typeof t&&(n=t,t=!1),t=t||a;var r=k.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=x.buildFragment([e],t,i),i&&x(i).remove(),x.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:\"string\"==typeof n&&(n=x.trim(n),n&&E.test(n.replace(A,\"@\").replace(j,\"]\").replace(S,\"\")))?Function(\"return \"+n)():(x.error(\"Invalid JSON: \"+n),t)},parseXML:function(n){var r,i;if(!n||\"string\"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,\"text/xml\")):(r=new ActiveXObject(\"Microsoft.XMLDOM\"),r.async=\"false\",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName(\"parsererror\").length||x.error(\"Invalid XML: \"+n),r},noop:function(){},globalEval:function(t){t&&x.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(D,\"ms-\").replace(L,H)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:b&&!b.call(\"\\ufeff\\u00a0\")?function(e){return null==e?\"\":b.call(e)}:function(e){return null==e?\"\":(e+\"\").replace(C,\"\")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?x.merge(n,\"string\"==typeof e?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if(\"number\"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return d.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return\"string\"==typeof n&&(o=e[n],n=e,e=o),x.isFunction(e)?(r=g.call(arguments,2),i=function(){return e.apply(n||this,r.concat(g.call(arguments)))},i.guid=e.guid=e.guid||x.guid++,i):t},access:function(e,n,r,i,o,a,s){var l=0,u=e.length,c=null==r;if(\"object\"===x.type(r)){o=!0;for(l in r)x.access(e,n,l,r[l],!0,a,s)}else if(i!==t&&(o=!0,x.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(x(e),n)})),n))for(;u>l;l++)n(e[l],r,s?i:i.call(e[l],l,n(e[l],r)));return o?e:c?n.call(e):u?n(e[0],r):a},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),x.ready.promise=function(t){if(!n)if(n=x.Deferred(),\"complete\"===a.readyState)setTimeout(x.ready);else if(a.addEventListener)a.addEventListener(\"DOMContentLoaded\",q,!1),e.addEventListener(\"load\",q,!1);else{a.attachEvent(\"onreadystatechange\",q),e.attachEvent(\"onload\",q);var r=!1;try{r=null==e.frameElement&&a.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!x.isReady){try{r.doScroll(\"left\")}catch(e){return setTimeout(o,50)}_(),x.ready()}}()}return n.promise(t)},x.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"),function(e,t){c[\"[object \"+t+\"]\"]=t.toLowerCase()});function M(e){var t=e.length,n=x.type(e);return x.isWindow(e)?!1:1===e.nodeType&&t?!0:\"array\"===n||\"function\"!==n&&(0===t||\"number\"==typeof t&&t>0&&t-1 in e)}r=x(a),function(e,t){var n,r,i,o,a,s,l,u,c,p,f,d,h,g,m,y,v,b=\"sizzle\"+-new Date,w=e.document,T=0,C=0,N=st(),k=st(),E=st(),S=!1,A=function(e,t){return e===t?(S=!0,0):0},j=typeof t,D=1<<31,L={}.hasOwnProperty,H=[],q=H.pop,_=H.push,M=H.push,O=H.slice,F=H.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},B=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",P=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",R=\"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",W=R.replace(\"w\",\"w#\"),$=\"\\\\[\"+P+\"*(\"+R+\")\"+P+\"*(?:([*^$|!~]?=)\"+P+\"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\"+W+\")|)|)\"+P+\"*\\\\]\",I=\":(\"+R+\")(?:\\\\(((['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+$.replace(3,8)+\")*)|.*)\\\\)|)\",z=RegExp(\"^\"+P+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+P+\"+$\",\"g\"),X=RegExp(\"^\"+P+\"*,\"+P+\"*\"),U=RegExp(\"^\"+P+\"*([>+~]|\"+P+\")\"+P+\"*\"),V=RegExp(P+\"*[+~]\"),Y=RegExp(\"=\"+P+\"*([^\\\\]'\\\"]*)\"+P+\"*\\\\]\",\"g\"),J=RegExp(I),G=RegExp(\"^\"+W+\"$\"),Q={ID:RegExp(\"^#(\"+R+\")\"),CLASS:RegExp(\"^\\\\.(\"+R+\")\"),TAG:RegExp(\"^(\"+R.replace(\"w\",\"w*\")+\")\"),ATTR:RegExp(\"^\"+$),PSEUDO:RegExp(\"^\"+I),CHILD:RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+P+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+P+\"*(?:([+-]|)\"+P+\"*(\\\\d+)|))\"+P+\"*\\\\)|)\",\"i\"),bool:RegExp(\"^(?:\"+B+\")$\",\"i\"),needsContext:RegExp(\"^\"+P+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+P+\"*((?:-\\\\d)?\\\\d*)\"+P+\"*\\\\)|)(?=[^-]|$)\",\"i\")},K=/^[^{]+\\{\\s*\\[native \\w/,Z=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\\d$/i,nt=/'|\\\\/g,rt=RegExp(\"\\\\\\\\([\\\\da-f]{1,6}\"+P+\"?|(\"+P+\")|.)\",\"ig\"),it=function(e,t,n){var r=\"0x\"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{M.apply(H=O.call(w.childNodes),w.childNodes),H[w.childNodes.length].nodeType}catch(ot){M={apply:H.length?function(e,t){_.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function at(e,t,n,i){var o,a,s,l,u,c,d,m,y,x;if((t?t.ownerDocument||t:w)!==f&&p(t),t=t||f,n=n||[],!e||\"string\"!=typeof e)return n;if(1!==(l=t.nodeType)&&9!==l)return[];if(h&&!i){if(o=Z.exec(e))if(s=o[1]){if(9===l){if(a=t.getElementById(s),!a||!a.parentNode)return n;if(a.id===s)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(s))&&v(t,a)&&a.id===s)return n.push(a),n}else{if(o[2])return M.apply(n,t.getElementsByTagName(e)),n;if((s=o[3])&&r.getElementsByClassName&&t.getElementsByClassName)return M.apply(n,t.getElementsByClassName(s)),n}if(r.qsa&&(!g||!g.test(e))){if(m=d=b,y=t,x=9===l&&e,1===l&&\"object\"!==t.nodeName.toLowerCase()){c=mt(e),(d=t.getAttribute(\"id\"))?m=d.replace(nt,\"\\\\$&\"):t.setAttribute(\"id\",m),m=\"[id='\"+m+\"'] \",u=c.length;while(u--)c[u]=m+yt(c[u]);y=V.test(e)&&t.parentNode||t,x=c.join(\",\")}if(x)try{return M.apply(n,y.querySelectorAll(x)),n}catch(T){}finally{d||t.removeAttribute(\"id\")}}}return kt(e.replace(z,\"$1\"),t,n,i)}function st(){var e=[];function t(n,r){return e.push(n+=\" \")>o.cacheLength&&delete t[e.shift()],t[n]=r}return t}function lt(e){return e[b]=!0,e}function ut(e){var t=f.createElement(\"div\");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ct(e,t){var n=e.split(\"|\"),r=e.length;while(r--)o.attrHandle[n[r]]=t}function pt(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||D)-(~e.sourceIndex||D);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return\"input\"===n&&t.type===e}}function dt(e){return function(t){var n=t.nodeName.toLowerCase();return(\"input\"===n||\"button\"===n)&&t.type===e}}function ht(e){return lt(function(t){return t=+t,lt(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}s=at.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?\"HTML\"!==t.nodeName:!1},r=at.support={},p=at.setDocument=function(e){var n=e?e.ownerDocument||e:w,i=n.defaultView;return n!==f&&9===n.nodeType&&n.documentElement?(f=n,d=n.documentElement,h=!s(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent(\"onbeforeunload\",function(){p()}),r.attributes=ut(function(e){return e.className=\"i\",!e.getAttribute(\"className\")}),r.getElementsByTagName=ut(function(e){return e.appendChild(n.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),r.getElementsByClassName=ut(function(e){return e.innerHTML=\"<div class='a'></div><div class='a i'></div>\",e.firstChild.className=\"i\",2===e.getElementsByClassName(\"i\").length}),r.getById=ut(function(e){return d.appendChild(e).id=b,!n.getElementsByName||!n.getElementsByName(b).length}),r.getById?(o.find.ID=function(e,t){if(typeof t.getElementById!==j&&h){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute(\"id\")===t}}):(delete o.find.ID,o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==j&&e.getAttributeNode(\"id\");return n&&n.value===t}}),o.find.TAG=r.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==j?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\"*\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},o.find.CLASS=r.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==j&&h?n.getElementsByClassName(e):t},m=[],g=[],(r.qsa=K.test(n.querySelectorAll))&&(ut(function(e){e.innerHTML=\"<select><option selected=''></option></select>\",e.querySelectorAll(\"[selected]\").length||g.push(\"\\\\[\"+P+\"*(?:value|\"+B+\")\"),e.querySelectorAll(\":checked\").length||g.push(\":checked\")}),ut(function(e){var t=n.createElement(\"input\");t.setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"t\",\"\"),e.querySelectorAll(\"[t^='']\").length&&g.push(\"[*^$]=\"+P+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\":enabled\").length||g.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),g.push(\",.*:\")})),(r.matchesSelector=K.test(y=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ut(function(e){r.disconnectedMatch=y.call(e,\"div\"),y.call(e,\"[s!='']:x\"),m.push(\"!=\",I)}),g=g.length&&RegExp(g.join(\"|\")),m=m.length&&RegExp(m.join(\"|\")),v=K.test(d.contains)||d.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},A=d.compareDocumentPosition?function(e,t){if(e===t)return S=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===n||v(w,e)?-1:t===n||v(w,t)?1:c?F.call(c,e)-F.call(c,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return S=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:c?F.call(c,e)-F.call(c,t):0;if(o===a)return pt(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?pt(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},n):f},at.matches=function(e,t){return at(e,null,null,t)},at.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&p(e),t=t.replace(Y,\"='$1']\"),!(!r.matchesSelector||!h||m&&m.test(t)||g&&g.test(t)))try{var n=y.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return at(t,f,null,[e]).length>0},at.contains=function(e,t){return(e.ownerDocument||e)!==f&&p(e),v(e,t)},at.attr=function(e,n){(e.ownerDocument||e)!==f&&p(e);var i=o.attrHandle[n.toLowerCase()],a=i&&L.call(o.attrHandle,n.toLowerCase())?i(e,n,!h):t;return a===t?r.attributes||!h?e.getAttribute(n):(a=e.getAttributeNode(n))&&a.specified?a.value:null:a},at.error=function(e){throw Error(\"Syntax error, unrecognized expression: \"+e)},at.uniqueSort=function(e){var t,n=[],i=0,o=0;if(S=!r.detectDuplicates,c=!r.sortStable&&e.slice(0),e.sort(A),S){while(t=e[o++])t===e[o]&&(i=n.push(o));while(i--)e.splice(n[i],1)}return e},a=at.getText=function(e){var t,n=\"\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=a(t);return n},o=at.selectors={cacheLength:50,createPseudo:lt,match:Q,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||\"\").replace(rt,it),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||at.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&at.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&J.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(\")\",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=N[e+\" \"];return t||(t=RegExp(\"(^|\"+P+\")\"+e+\"(\"+P+\"|$)\"))&&N(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||typeof e.getAttribute!==j&&e.getAttribute(\"class\")||\"\")})},ATTR:function(e,t,n){return function(r){var i=at.attr(r,e);return null==i?\"!=\"===t:t?(i+=\"\",\"=\"===t?i===n:\"!=\"===t?i!==n:\"^=\"===t?n&&0===i.indexOf(n):\"*=\"===t?n&&i.indexOf(n)>-1:\"$=\"===t?n&&i.slice(-n.length)===n:\"~=\"===t?(\" \"+i+\" \").indexOf(n)>-1:\"|=\"===t?i===n||i.slice(0,n.length+1)===n+\"-\":!1):!0}},CHILD:function(e,t,n,r,i){var o=\"nth\"!==e.slice(0,3),a=\"last\"!==e.slice(-4),s=\"of-type\"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,p,f,d,h,g=o!==a?\"nextSibling\":\"previousSibling\",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!l&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g=\"only\"===e&&!h&&\"nextSibling\"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[b]||(m[b]={}),u=c[e]||[],d=u[0]===T&&u[1],f=u[0]===T&&u[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[T,d,f];break}}else if(v&&(u=(t[b]||(t[b]={}))[e])&&u[0]===T)f=u[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[b]||(p[b]={}))[e]=[T,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=o.pseudos[e]||o.setFilters[e.toLowerCase()]||at.error(\"unsupported pseudo: \"+e);return r[b]?r(t):r.length>1?(n=[e,e,\"\",t],o.setFilters.hasOwnProperty(e.toLowerCase())?lt(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=F.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:lt(function(e){var t=[],n=[],r=l(e.replace(z,\"$1\"));return r[b]?lt(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:lt(function(e){return function(t){return at(e,t).length>0}}),contains:lt(function(e){return function(t){return(t.textContent||t.innerText||a(t)).indexOf(e)>-1}}),lang:lt(function(e){return G.test(e||\"\")||at.error(\"unsupported lang: \"+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=h?t.lang:t.getAttribute(\"xml:lang\")||t.getAttribute(\"lang\"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+\"-\");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>\"@\"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!o.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||t.toLowerCase()===e.type)},first:ht(function(){return[0]}),last:ht(function(e,t){return[t-1]}),eq:ht(function(e,t,n){return[0>n?n+t:n]}),even:ht(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:ht(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:ht(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ht(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}},o.pseudos.nth=o.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})o.pseudos[n]=dt(n);function gt(){}gt.prototype=o.filters=o.pseudos,o.setFilters=new gt;function mt(e,t){var n,r,i,a,s,l,u,c=k[e+\" \"];if(c)return t?0:c.slice(0);s=e,l=[],u=o.preFilter;while(s){(!n||(r=X.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(i=[])),n=!1,(r=U.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(z,\" \")}),s=s.slice(n.length));for(a in o.filter)!(r=Q[a].exec(s))||u[a]&&!(r=u[a](r))||(n=r.shift(),i.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?at.error(e):k(e,l).slice(0)}function yt(e){var t=0,n=e.length,r=\"\";for(;n>t;t++)r+=e[t].value;return r}function vt(e,t,n){var r=t.dir,o=n&&\"parentNode\"===r,a=C++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,s){var l,u,c,p=T+\" \"+a;if(s){while(t=t[r])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[r])if(1===t.nodeType||o)if(c=t[b]||(t[b]={}),(u=c[r])&&u[0]===p){if((l=u[1])===!0||l===i)return l===!0}else if(u=c[r]=[p],u[1]=e(t,n,s)||i,u[1]===!0)return!0}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xt(e,t,n,r,i){var o,a=[],s=0,l=e.length,u=null!=t;for(;l>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),u&&t.push(s));return a}function wt(e,t,n,r,i,o){return r&&!r[b]&&(r=wt(r)),i&&!i[b]&&(i=wt(i,o)),lt(function(o,a,s,l){var u,c,p,f=[],d=[],h=a.length,g=o||Nt(t||\"*\",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:xt(g,f,e,s,l),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,l),r){u=xt(y,d),r(u,[],s,l),c=u.length;while(c--)(p=u[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){u=[],c=y.length;while(c--)(p=y[c])&&u.push(m[c]=p);i(null,y=[],u,l)}c=y.length;while(c--)(p=y[c])&&(u=i?F.call(o,p):f[c])>-1&&(o[u]=!(a[u]=p))}}else y=xt(y===a?y.splice(h,y.length):y),i?i(null,a,y,l):M.apply(a,y)})}function Tt(e){var t,n,r,i=e.length,a=o.relative[e[0].type],s=a||o.relative[\" \"],l=a?1:0,c=vt(function(e){return e===t},s,!0),p=vt(function(e){return F.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==u)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;i>l;l++)if(n=o.relative[e[l].type])f=[vt(bt(f),n)];else{if(n=o.filter[e[l].type].apply(null,e[l].matches),n[b]){for(r=++l;i>r;r++)if(o.relative[e[r].type])break;return wt(l>1&&bt(f),l>1&&yt(e.slice(0,l-1).concat({value:\" \"===e[l-2].type?\"*\":\"\"})).replace(z,\"$1\"),n,r>l&&Tt(e.slice(l,r)),i>r&&Tt(e=e.slice(r)),i>r&&yt(e))}f.push(n)}return bt(f)}function Ct(e,t){var n=0,r=t.length>0,a=e.length>0,s=function(s,l,c,p,d){var h,g,m,y=[],v=0,b=\"0\",x=s&&[],w=null!=d,C=u,N=s||a&&o.find.TAG(\"*\",d&&l.parentNode||l),k=T+=null==C?1:Math.random()||.1;for(w&&(u=l!==f&&l,i=n);null!=(h=N[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,l,c)){p.push(h);break}w&&(T=k,i=++n)}r&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,r&&b!==v){g=0;while(m=t[g++])m(x,y,l,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=q.call(p));y=xt(y)}M.apply(p,y),w&&!s&&y.length>0&&v+t.length>1&&at.uniqueSort(p)}return w&&(T=k,u=C),x};return r?lt(s):s}l=at.compile=function(e,t){var n,r=[],i=[],o=E[e+\" \"];if(!o){t||(t=mt(e)),n=t.length;while(n--)o=Tt(t[n]),o[b]?r.push(o):i.push(o);o=E(e,Ct(i,r))}return o};function Nt(e,t,n){var r=0,i=t.length;for(;i>r;r++)at(e,t[r],n);return n}function kt(e,t,n,i){var a,s,u,c,p,f=mt(e);if(!i&&1===f.length){if(s=f[0]=f[0].slice(0),s.length>2&&\"ID\"===(u=s[0]).type&&r.getById&&9===t.nodeType&&h&&o.relative[s[1].type]){if(t=(o.find.ID(u.matches[0].replace(rt,it),t)||[])[0],!t)return n;e=e.slice(s.shift().value.length)}a=Q.needsContext.test(e)?0:s.length;while(a--){if(u=s[a],o.relative[c=u.type])break;if((p=o.find[c])&&(i=p(u.matches[0].replace(rt,it),V.test(s[0].type)&&t.parentNode||t))){if(s.splice(a,1),e=i.length&&yt(s),!e)return M.apply(n,i),n;break}}}return l(e,f)(i,t,!h,n,V.test(e)),n}r.sortStable=b.split(\"\").sort(A).join(\"\")===b,r.detectDuplicates=S,p(),r.sortDetached=ut(function(e){return 1&e.compareDocumentPosition(f.createElement(\"div\"))}),ut(function(e){return e.innerHTML=\"<a href='#'></a>\",\"#\"===e.firstChild.getAttribute(\"href\")})||ct(\"type|href|height|width\",function(e,n,r){return r?t:e.getAttribute(n,\"type\"===n.toLowerCase()?1:2)}),r.attributes&&ut(function(e){return e.innerHTML=\"<input/>\",e.firstChild.setAttribute(\"value\",\"\"),\"\"===e.firstChild.getAttribute(\"value\")})||ct(\"value\",function(e,n,r){return r||\"input\"!==e.nodeName.toLowerCase()?t:e.defaultValue}),ut(function(e){return null==e.getAttribute(\"disabled\")})||ct(B,function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.specified?i.value:e[n]===!0?n.toLowerCase():null}),x.find=at,x.expr=at.selectors,x.expr[\":\"]=x.expr.pseudos,x.unique=at.uniqueSort,x.text=at.getText,x.isXMLDoc=at.isXML,x.contains=at.contains}(e);var O={};function F(e){var t=O[e]={};return x.each(e.match(T)||[],function(e,n){t[n]=!0}),t}x.Callbacks=function(e){e=\"string\"==typeof e?O[e]||F(e):x.extend({},e);var n,r,i,o,a,s,l=[],u=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=l.length,n=!0;l&&o>a;a++)if(l[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,l&&(u?u.length&&c(u.shift()):r?l=[]:p.disable())},p={add:function(){if(l){var t=l.length;(function i(t){x.each(t,function(t,n){var r=x.type(n);\"function\"===r?e.unique&&p.has(n)||l.push(n):n&&n.length&&\"string\"!==r&&i(n)})})(arguments),n?o=l.length:r&&(s=t,c(r))}return this},remove:function(){return l&&x.each(arguments,function(e,t){var r;while((r=x.inArray(t,l,r))>-1)l.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?x.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=u=r=t,this},disabled:function(){return!l},lock:function(){return u=t,r||p.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||i&&!u||(t=t||[],t=[e,t.slice?t.slice():t],n?u.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},x.extend({Deferred:function(e){var t=[[\"resolve\",\"done\",x.Callbacks(\"once memory\"),\"resolved\"],[\"reject\",\"fail\",x.Callbacks(\"once memory\"),\"rejected\"],[\"notify\",\"progress\",x.Callbacks(\"memory\")]],n=\"pending\",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return x.Deferred(function(n){x.each(t,function(t,o){var a=o[0],s=x.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&x.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+\"With\"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?x.extend(e,r):r}},i={};return r.pipe=r.then,x.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+\"With\"](this===i?r:this,arguments),this},i[o[0]+\"With\"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=g.call(arguments),r=n.length,i=1!==r||e&&x.isFunction(e.promise)?r:0,o=1===i?e:x.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?g.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,l,u;if(r>1)for(s=Array(r),l=Array(r),u=Array(r);r>t;t++)n[t]&&x.isFunction(n[t].promise)?n[t].promise().done(a(t,u,n)).fail(o.reject).progress(a(t,l,s)):--i;return i||o.resolveWith(u,n),o.promise()}}),x.support=function(t){var n,r,o,s,l,u,c,p,f,d=a.createElement(\"div\");if(d.setAttribute(\"className\",\"t\"),d.innerHTML=\"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\",n=d.getElementsByTagName(\"*\")||[],r=d.getElementsByTagName(\"a\")[0],!r||!r.style||!n.length)return t;s=a.createElement(\"select\"),u=s.appendChild(a.createElement(\"option\")),o=d.getElementsByTagName(\"input\")[0],r.style.cssText=\"top:1px;float:left;opacity:.5\",t.getSetAttribute=\"t\"!==d.className,t.leadingWhitespace=3===d.firstChild.nodeType,t.tbody=!d.getElementsByTagName(\"tbody\").length,t.htmlSerialize=!!d.getElementsByTagName(\"link\").length,t.style=/top/.test(r.getAttribute(\"style\")),t.hrefNormalized=\"/a\"===r.getAttribute(\"href\"),t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!o.value,t.optSelected=u.selected,t.enctype=!!a.createElement(\"form\").enctype,t.html5Clone=\"<:nav></:nav>\"!==a.createElement(\"nav\").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!u.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}o=a.createElement(\"input\"),o.setAttribute(\"value\",\"\"),t.input=\"\"===o.getAttribute(\"value\"),o.value=\"t\",o.setAttribute(\"type\",\"radio\"),t.radioValue=\"t\"===o.value,o.setAttribute(\"checked\",\"t\"),o.setAttribute(\"name\",\"t\"),l=a.createDocumentFragment(),l.appendChild(o),t.appendChecked=o.checked,t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent(\"onclick\",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c=\"on\"+f,\"t\"),t[f+\"Bubbles\"]=c in e||d.attributes[c].expando===!1;d.style.backgroundClip=\"content-box\",d.cloneNode(!0).style.backgroundClip=\"\",t.clearCloneStyle=\"content-box\"===d.style.backgroundClip;for(f in x(t))break;return t.ownLast=\"0\"!==f,x(function(){var n,r,o,s=\"padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;\",l=a.getElementsByTagName(\"body\")[0];l&&(n=a.createElement(\"div\"),n.style.cssText=\"border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px\",l.appendChild(n).appendChild(d),d.innerHTML=\"<table><tr><td></td><td>t</td></tr></table>\",o=d.getElementsByTagName(\"td\"),o[0].style.cssText=\"padding:0;margin:0;border:0;display:none\",p=0===o[0].offsetHeight,o[0].style.display=\"\",o[1].style.display=\"none\",t.reliableHiddenOffsets=p&&0===o[0].offsetHeight,d.innerHTML=\"\",d.style.cssText=\"box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;\",x.swap(l,null!=l.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===d.offsetWidth}),e.getComputedStyle&&(t.pixelPosition=\"1%\"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable=\"4px\"===(e.getComputedStyle(d,null)||{width:\"4px\"}).width,r=d.appendChild(a.createElement(\"div\")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width=\"0\",d.style.width=\"1px\",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML=\"\",d.style.cssText=s+\"width:1px;padding:1px;display:inline;zoom:1\",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display=\"block\",d.innerHTML=\"<div></div>\",d.firstChild.style.width=\"5px\",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(l.style.zoom=1)),l.removeChild(n),n=d=o=r=null)}),n=s=l=u=r=o=null,t\n}({});var B=/(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/,P=/([A-Z])/g;function R(e,n,r,i){if(x.acceptData(e)){var o,a,s=x.expando,l=e.nodeType,u=l?x.cache:e,c=l?e[s]:e[s]&&s;if(c&&u[c]&&(i||u[c].data)||r!==t||\"string\"!=typeof n)return c||(c=l?e[s]=p.pop()||x.guid++:s),u[c]||(u[c]=l?{}:{toJSON:x.noop}),(\"object\"==typeof n||\"function\"==typeof n)&&(i?u[c]=x.extend(u[c],n):u[c].data=x.extend(u[c].data,n)),a=u[c],i||(a.data||(a.data={}),a=a.data),r!==t&&(a[x.camelCase(n)]=r),\"string\"==typeof n?(o=a[n],null==o&&(o=a[x.camelCase(n)])):o=a,o}}function W(e,t,n){if(x.acceptData(e)){var r,i,o=e.nodeType,a=o?x.cache:e,s=o?e[x.expando]:x.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){x.isArray(t)?t=t.concat(x.map(t,x.camelCase)):t in r?t=[t]:(t=x.camelCase(t),t=t in r?[t]:t.split(\" \")),i=t.length;while(i--)delete r[t[i]];if(n?!I(r):!x.isEmptyObject(r))return}(n||(delete a[s].data,I(a[s])))&&(o?x.cleanData([e],!0):x.support.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}x.extend({cache:{},noData:{applet:!0,embed:!0,object:\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"},hasData:function(e){return e=e.nodeType?x.cache[e[x.expando]]:e[x.expando],!!e&&!I(e)},data:function(e,t,n){return R(e,t,n)},removeData:function(e,t){return W(e,t)},_data:function(e,t,n){return R(e,t,n,!0)},_removeData:function(e,t){return W(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&x.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute(\"classid\")===t}}),x.fn.extend({data:function(e,n){var r,i,o=null,a=0,s=this[0];if(e===t){if(this.length&&(o=x.data(s),1===s.nodeType&&!x._data(s,\"parsedAttrs\"))){for(r=s.attributes;r.length>a;a++)i=r[a].name,0===i.indexOf(\"data-\")&&(i=x.camelCase(i.slice(5)),$(s,i,o[i]));x._data(s,\"parsedAttrs\",!0)}return o}return\"object\"==typeof e?this.each(function(){x.data(this,e)}):arguments.length>1?this.each(function(){x.data(this,e,n)}):s?$(s,e,x.data(s,e)):null},removeData:function(e){return this.each(function(){x.removeData(this,e)})}});function $(e,n,r){if(r===t&&1===e.nodeType){var i=\"data-\"+n.replace(P,\"-$1\").toLowerCase();if(r=e.getAttribute(i),\"string\"==typeof r){try{r=\"true\"===r?!0:\"false\"===r?!1:\"null\"===r?null:+r+\"\"===r?+r:B.test(r)?x.parseJSON(r):r}catch(o){}x.data(e,n,r)}else r=t}return r}function I(e){var t;for(t in e)if((\"data\"!==t||!x.isEmptyObject(e[t]))&&\"toJSON\"!==t)return!1;return!0}x.extend({queue:function(e,n,r){var i;return e?(n=(n||\"fx\")+\"queue\",i=x._data(e,n),r&&(!i||x.isArray(r)?i=x._data(e,n,x.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||\"fx\";var n=x.queue(e,t),r=n.length,i=n.shift(),o=x._queueHooks(e,t),a=function(){x.dequeue(e,t)};\"inprogress\"===i&&(i=n.shift(),r--),i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return x._data(e,n)||x._data(e,n,{empty:x.Callbacks(\"once memory\").add(function(){x._removeData(e,t+\"queue\"),x._removeData(e,n)})})}}),x.fn.extend({queue:function(e,n){var r=2;return\"string\"!=typeof e&&(n=e,e=\"fx\",r--),r>arguments.length?x.queue(this[0],e):n===t?this:this.each(function(){var t=x.queue(this,e,n);x._queueHooks(this,e),\"fx\"===e&&\"inprogress\"!==t[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},delay:function(e,t){return e=x.fx?x.fx.speeds[e]||e:e,t=t||\"fx\",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,n){var r,i=1,o=x.Deferred(),a=this,s=this.length,l=function(){--i||o.resolveWith(a,[a])};\"string\"!=typeof e&&(n=e,e=t),e=e||\"fx\";while(s--)r=x._data(a[s],e+\"queueHooks\"),r&&r.empty&&(i++,r.empty.add(l));return l(),o.promise(n)}});var z,X,U=/[\\t\\r\\n\\f]/g,V=/\\r/g,Y=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,G=/^(?:checked|selected)$/i,Q=x.support.getSetAttribute,K=x.support.input;x.fn.extend({attr:function(e,t){return x.access(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})},prop:function(e,t){return x.access(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return e=x.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,l=\"string\"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||\"\").match(T)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(\" \"+n.className+\" \").replace(U,\" \"):\" \")){o=0;while(i=t[o++])0>r.indexOf(\" \"+i+\" \")&&(r+=i+\" \");n.className=x.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,l=0===arguments.length||\"string\"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||\"\").match(T)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(\" \"+n.className+\" \").replace(U,\" \"):\"\")){o=0;while(i=t[o++])while(r.indexOf(\" \"+i+\" \")>=0)r=r.replace(\" \"+i+\" \",\" \");n.className=e?x.trim(r):\"\"}return this},toggleClass:function(e,t){var n=typeof e;return\"boolean\"==typeof t&&\"string\"===n?t?this.addClass(e):this.removeClass(e):x.isFunction(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(\"string\"===n){var t,r=0,o=x(this),a=e.match(T)||[];while(t=a[r++])o.hasClass(t)?o.removeClass(t):o.addClass(t)}else(n===i||\"boolean\"===n)&&(this.className&&x._data(this,\"__className__\",this.className),this.className=this.className||e===!1?\"\":x._data(this,\"__className__\")||\"\")})},hasClass:function(e){var t=\" \"+e+\" \",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(\" \"+this[n].className+\" \").replace(U,\" \").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=x.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,x(this).val()):e,null==o?o=\"\":\"number\"==typeof o?o+=\"\":x.isArray(o)&&(o=x.map(o,function(e){return null==e?\"\":e+\"\"})),r=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()],r&&\"set\"in r&&r.set(this,o,\"value\")!==t||(this.value=o))});if(o)return r=x.valHooks[o.type]||x.valHooks[o.nodeName.toLowerCase()],r&&\"get\"in r&&(n=r.get(o,\"value\"))!==t?n:(n=o.value,\"string\"==typeof n?n.replace(V,\"\"):null==n?\"\":n)}}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,\"value\");return null!=t?t:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o=\"select-one\"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;for(;s>l;l++)if(n=r[l],!(!n.selected&&l!==i||(x.support.optDisabled?n.disabled:null!==n.getAttribute(\"disabled\"))||n.parentNode.disabled&&x.nodeName(n.parentNode,\"optgroup\"))){if(t=x(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n,r,i=e.options,o=x.makeArray(t),a=i.length;while(a--)r=i[a],(r.selected=x.inArray(x(r).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,r){var o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===i?x.prop(e,n,r):(1===s&&x.isXMLDoc(e)||(n=n.toLowerCase(),o=x.attrHooks[n]||(x.expr.match.bool.test(n)?X:z)),r===t?o&&\"get\"in o&&null!==(a=o.get(e,n))?a:(a=x.find.attr(e,n),null==a?t:a):null!==r?o&&\"set\"in o&&(a=o.set(e,r,n))!==t?a:(e.setAttribute(n,r+\"\"),r):(x.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(T);if(o&&1===e.nodeType)while(n=o[i++])r=x.propFix[n]||n,x.expr.match.bool.test(n)?K&&Q||!G.test(n)?e[r]=!1:e[x.camelCase(\"default-\"+n)]=e[r]=!1:x.attr(e,n,\"\"),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!x.support.radioValue&&\"radio\"===t&&x.nodeName(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},propFix:{\"for\":\"htmlFor\",\"class\":\"className\"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!x.isXMLDoc(e),a&&(n=x.propFix[n]||n,o=x.propHooks[n]),r!==t?o&&\"set\"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&\"get\"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,\"tabindex\");return t?parseInt(t,10):Y.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return t===!1?x.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&x.propFix[n]||n,n):e[x.camelCase(\"default-\"+n)]=e[n]=!0,n}},x.each(x.expr.match.bool.source.match(/\\w+/g),function(e,n){var r=x.expr.attrHandle[n]||x.find.attr;x.expr.attrHandle[n]=K&&Q||!G.test(n)?function(e,n,i){var o=x.expr.attrHandle[n],a=i?t:(x.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return x.expr.attrHandle[n]=o,a}:function(e,n,r){return r?t:e[x.camelCase(\"default-\"+n)]?n.toLowerCase():null}}),K&&Q||(x.attrHooks.value={set:function(e,n,r){return x.nodeName(e,\"input\")?(e.defaultValue=n,t):z&&z.set(e,n,r)}}),Q||(z={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+=\"\",\"value\"===r||n===e.getAttribute(r)?n:t}},x.expr.attrHandle.id=x.expr.attrHandle.name=x.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&\"\"!==i.value?i.value:null},x.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:z.set},x.attrHooks.contenteditable={set:function(e,t,n){z.set(e,\"\"===t?!1:t,n)}},x.each([\"width\",\"height\"],function(e,n){x.attrHooks[n]={set:function(e,r){return\"\"===r?(e.setAttribute(n,\"auto\"),r):t}}})),x.support.hrefNormalized||x.each([\"href\",\"src\"],function(e,t){x.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),x.support.style||(x.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+\"\"}}),x.support.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),x.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){x.propFix[this.toLowerCase()]=this}),x.support.enctype||(x.propFix.enctype=\"encoding\"),x.each([\"radio\",\"checkbox\"],function(){x.valHooks[this]={set:function(e,n){return x.isArray(n)?e.checked=x.inArray(x(e).val(),n)>=0:t}},x.support.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute(\"value\")?\"on\":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\\.(.+)|)$/;function it(){return!0}function ot(){return!1}function at(){try{return a.activeElement}catch(e){}}x.event={global:{},add:function(e,n,r,o,a){var s,l,u,c,p,f,d,h,g,m,y,v=x._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=x.guid++),(l=v.events)||(l=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof x===i||e&&x.event.triggered===e.type?t:x.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||\"\").match(T)||[\"\"],u=n.length;while(u--)s=rt.exec(n[u])||[],g=y=s[1],m=(s[2]||\"\").split(\".\").sort(),g&&(p=x.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=x.event.special[g]||{},d=x.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&x.expr.match.needsContext.test(a),namespace:m.join(\".\")},c),(h=l[g])||(h=l[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent(\"on\"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),x.event.global[g]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,l,u,c,p,f,d,h,g,m=x.hasData(e)&&x._data(e);if(m&&(c=m.events)){t=(t||\"\").match(T)||[\"\"],u=t.length;while(u--)if(s=rt.exec(t[u])||[],d=g=s[1],h=(s[2]||\"\").split(\".\").sort(),d){p=x.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),l=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&(\"**\"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));l&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||x.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)x.event.remove(e,d+t[u],n,r,!0);x.isEmptyObject(c)&&(delete m.handle,x._removeData(e,\"events\"))}},trigger:function(n,r,i,o){var s,l,u,c,p,f,d,h=[i||a],g=v.call(n,\"type\")?n.type:n,m=v.call(n,\"namespace\")?n.namespace.split(\".\"):[];if(u=f=i=i||a,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+x.event.triggered)&&(g.indexOf(\".\")>=0&&(m=g.split(\".\"),g=m.shift(),m.sort()),l=0>g.indexOf(\":\")&&\"on\"+g,n=n[x.expando]?n:new x.Event(g,\"object\"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=m.join(\".\"),n.namespace_re=n.namespace?RegExp(\"(^|\\\\.)\"+m.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:x.makeArray(r,[n]),p=x.event.special[g]||{},o||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!o&&!p.noBubble&&!x.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(u=u.parentNode);u;u=u.parentNode)h.push(u),f=u;f===(i.ownerDocument||a)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((u=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(x._data(u,\"events\")||{})[n.type]&&x._data(u,\"handle\"),s&&s.apply(u,r),s=l&&u[l],s&&x.acceptData(u)&&s.apply&&s.apply(u,r)===!1&&n.preventDefault();if(n.type=g,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(h.pop(),r)===!1)&&x.acceptData(i)&&l&&i[g]&&!x.isWindow(i)){f=i[l],f&&(i[l]=null),x.event.triggered=g;try{i[g]()}catch(y){}x.event.triggered=t,f&&(i[l]=f)}return n.result}},dispatch:function(e){e=x.event.fix(e);var n,r,i,o,a,s=[],l=g.call(arguments),u=(x._data(this,\"events\")||{})[e.type]||[],c=x.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=x.event.handlers.call(this,e,u),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((x.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,l),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],l=n.delegateCount,u=e.target;if(l&&u.nodeType&&(!e.button||\"click\"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||\"click\"!==e.type)){for(o=[],a=0;l>a;a++)i=n[a],r=i.selector+\" \",o[r]===t&&(o[r]=i.needsContext?x(r,this).index(u)>=0:x.find(r,this,null,[u]).length),o[r]&&o.push(i);o.length&&s.push({elem:u,handlers:o})}return n.length>l&&s.push({elem:this,handlers:n.slice(l)}),s},fix:function(e){if(e[x.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new x.Event(o),t=r.length;while(t--)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||a),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:\"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),fixHooks:{},keyHooks:{props:\"char charCode key keyCode\".split(\" \"),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:\"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),filter:function(e,n){var r,i,o,s=n.button,l=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||a,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&l&&(e.relatedTarget=l===e.target?n.toElement:l),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==at()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:\"focusin\"},blur:{trigger:function(){return this===at()&&this.blur?(this.blur(),!1):t},delegateType:\"focusout\"},click:{trigger:function(){return x.nodeName(this,\"input\")&&\"checkbox\"===this.type&&this.click?(this.click(),!1):t},_default:function(e){return x.nodeName(e.target,\"a\")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=x.extend(new x.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?x.event.trigger(i,null,t):x.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},x.removeEvent=a.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r=\"on\"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},x.Event=function(e,n){return this instanceof x.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&x.extend(this,n),this.timeStamp=e&&e.timeStamp||x.now(),this[x.expando]=!0,t):new x.Event(e,n)},x.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},x.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!x.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),x.support.submitBubbles||(x.event.special.submit={setup:function(){return x.nodeName(this,\"form\")?!1:(x.event.add(this,\"click._submit keypress._submit\",function(e){var n=e.target,r=x.nodeName(n,\"input\")||x.nodeName(n,\"button\")?n.form:t;r&&!x._data(r,\"submitBubbles\")&&(x.event.add(r,\"submit._submit\",function(e){e._submit_bubble=!0}),x._data(r,\"submitBubbles\",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&x.event.simulate(\"submit\",this.parentNode,e,!0))},teardown:function(){return x.nodeName(this,\"form\")?!1:(x.event.remove(this,\"._submit\"),t)}}),x.support.changeBubbles||(x.event.special.change={setup:function(){return Z.test(this.nodeName)?((\"checkbox\"===this.type||\"radio\"===this.type)&&(x.event.add(this,\"propertychange._change\",function(e){\"checked\"===e.originalEvent.propertyName&&(this._just_changed=!0)}),x.event.add(this,\"click._change\",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),x.event.simulate(\"change\",this,e,!0)})),!1):(x.event.add(this,\"beforeactivate._change\",function(e){var t=e.target;Z.test(t.nodeName)&&!x._data(t,\"changeBubbles\")&&(x.event.add(t,\"change._change\",function(e){!this.parentNode||e.isSimulated||e.isTrigger||x.event.simulate(\"change\",this.parentNode,e,!0)}),x._data(t,\"changeBubbles\",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||\"radio\"!==n.type&&\"checkbox\"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return x.event.remove(this,\"._change\"),!Z.test(this.nodeName)}}),x.support.focusinBubbles||x.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){var n=0,r=function(e){x.event.simulate(t,e.target,x.event.fix(e),!0)};x.event.special[t]={setup:function(){0===n++&&a.addEventListener(e,r,!0)},teardown:function(){0===--n&&a.removeEventListener(e,r,!0)}}}),x.fn.extend({on:function(e,n,r,i,o){var a,s;if(\"object\"==typeof e){\"string\"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&(\"string\"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return x().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=x.guid++)),this.each(function(){x.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,x(e.delegateTarget).off(i.namespace?i.origType+\".\"+i.namespace:i.origType,i.selector,i.handler),this;if(\"object\"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||\"function\"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){x.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?x.event.trigger(e,n,r,!0):t}});var st=/^.[^:#\\[\\.,]*$/,lt=/^(?:parents|prev(?:Until|All))/,ut=x.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};x.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if(\"string\"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;i>t;t++)if(x.contains(r[t],this))return!0}));for(t=0;i>t;t++)x.find(e,r[t],n);return n=this.pushStack(i>1?x.unique(n):n),n.selector=this.selector?this.selector+\" \"+e:e,n},has:function(e){var t,n=x(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(x.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e||[],!0))},filter:function(e){return this.pushStack(ft(this,e||[],!1))},is:function(e){return!!ft(this,\"string\"==typeof e&&ut.test(e)?x(e):e||[],!1).length},closest:function(e,t){var n,r=0,i=this.length,o=[],a=ut.test(e)||\"string\"!=typeof e?x(e,t||this.context):0;for(;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(a?a.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?x.unique(o):o)},index:function(e){return e?\"string\"==typeof e?x.inArray(this[0],x(e)):x.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=\"string\"==typeof e?x(e,t):x.makeArray(e&&e.nodeType?[e]:e),r=x.merge(this.get(),n);return this.pushStack(x.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x.dir(e,\"parentNode\")},parentsUntil:function(e,t,n){return x.dir(e,\"parentNode\",n)},next:function(e){return pt(e,\"nextSibling\")},prev:function(e){return pt(e,\"previousSibling\")},nextAll:function(e){return x.dir(e,\"nextSibling\")},prevAll:function(e){return x.dir(e,\"previousSibling\")},nextUntil:function(e,t,n){return x.dir(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return x.dir(e,\"previousSibling\",n)},siblings:function(e){return x.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return x.sibling(e.firstChild)},contents:function(e){return x.nodeName(e,\"iframe\")?e.contentDocument||e.contentWindow.document:x.merge([],e.childNodes)}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return\"Until\"!==e.slice(-5)&&(r=n),r&&\"string\"==typeof r&&(i=x.filter(r,i)),this.length>1&&(ct[e]||(i=x.unique(i)),lt.test(e)&&(i=i.reverse())),this.pushStack(i)}}),x.extend({filter:function(e,t,n){var r=t[0];return n&&(e=\":not(\"+e+\")\"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!x(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(x.isFunction(t))return x.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return x.grep(e,function(e){return e===t!==n});if(\"string\"==typeof t){if(st.test(t))return x.filter(t,e,n);t=x.filter(t,e)}return x.grep(e,function(e){return x.inArray(e,t)>=0!==n})}function dt(e){var t=ht.split(\"|\"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht=\"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",gt=/ jQuery\\d+=\"(?:null|\\d+)\"/g,mt=RegExp(\"<(?:\"+ht+\")[\\\\s/>]\",\"i\"),yt=/^\\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,bt=/<([\\w:]+)/,xt=/<tbody/i,wt=/<|&#?\\w+;/,Tt=/<(?:script|style|link)/i,Ct=/^(?:checkbox|radio)$/i,Nt=/checked\\s*(?:[^=]|=\\s*.checked.)/i,kt=/^$|\\/(?:java|ecma)script/i,Et=/^true\\/(.*)/,St=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,At={option:[1,\"<select multiple='multiple'>\",\"</select>\"],legend:[1,\"<fieldset>\",\"</fieldset>\"],area:[1,\"<map>\",\"</map>\"],param:[1,\"<object>\",\"</object>\"],thead:[1,\"<table>\",\"</table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],col:[2,\"<table><tbody></tbody><colgroup>\",\"</colgroup></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:x.support.htmlSerialize?[0,\"\",\"\"]:[1,\"X<div>\",\"</div>\"]},jt=dt(a),Dt=jt.appendChild(a.createElement(\"div\"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,x.fn.extend({text:function(e){return x.access(this,function(e){return e===t?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||a).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?x.filter(e,this):this,i=0;for(;null!=(n=r[i]);i++)t||1!==n.nodeType||x.cleanData(Ft(n)),n.parentNode&&(t&&x.contains(n.ownerDocument,n)&&_t(Ft(n,\"script\")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&x.cleanData(Ft(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&x.nodeName(e,\"select\")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return x.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,\"\"):t;if(!(\"string\"!=typeof e||Tt.test(e)||!x.support.htmlSerialize&&mt.test(e)||!x.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||[\"\",\"\"])[1].toLowerCase()])){e=e.replace(vt,\"<$1></$2>\");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(x.cleanData(Ft(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=x.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),x(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=d.apply([],e);var r,i,o,a,s,l,u=0,c=this.length,p=this,f=c-1,h=e[0],g=x.isFunction(h);if(g||!(1>=c||\"string\"!=typeof h||x.support.checkClone)&&Nt.test(h))return this.each(function(r){var i=p.eq(r);g&&(e[0]=h.call(this,r,i.html())),i.domManip(e,t,n)});if(c&&(l=x.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=l.firstChild,1===l.childNodes.length&&(l=r),r)){for(a=x.map(Ft(l,\"script\"),Ht),o=a.length;c>u;u++)i=l,u!==f&&(i=x.clone(i,!0,!0),o&&x.merge(a,Ft(i,\"script\"))),t.call(this[u],i,u);if(o)for(s=a[a.length-1].ownerDocument,x.map(a,qt),u=0;o>u;u++)i=a[u],kt.test(i.type||\"\")&&!x._data(i,\"globalEval\")&&x.contains(s,i)&&(i.src?x._evalUrl(i.src):x.globalEval((i.text||i.textContent||i.innerHTML||\"\").replace(St,\"\")));l=r=null}return this}});function Lt(e,t){return x.nodeName(e,\"table\")&&x.nodeName(1===t.nodeType?t:t.firstChild,\"tr\")?e.getElementsByTagName(\"tbody\")[0]||e.appendChild(e.ownerDocument.createElement(\"tbody\")):e}function Ht(e){return e.type=(null!==x.find.attr(e,\"type\"))+\"/\"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute(\"type\"),e}function _t(e,t){var n,r=0;for(;null!=(n=e[r]);r++)x._data(n,\"globalEval\",!t||x._data(t[r],\"globalEval\"))}function Mt(e,t){if(1===t.nodeType&&x.hasData(e)){var n,r,i,o=x._data(e),a=x._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)x.event.add(t,n,s[n][r])}a.data&&(a.data=x.extend({},a.data))}}function Ot(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!x.support.noCloneEvent&&t[x.expando]){i=x._data(t);for(r in i.events)x.removeEvent(t,r,i.handle);t.removeAttribute(x.expando)}\"script\"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):\"object\"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),x.support.html5Clone&&e.innerHTML&&!x.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):\"input\"===n&&Ct.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):\"option\"===n?t.defaultSelected=t.selected=e.defaultSelected:(\"input\"===n||\"textarea\"===n)&&(t.defaultValue=e.defaultValue)}}x.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,t){x.fn[e]=function(e){var n,r=0,i=[],o=x(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),x(o[r])[t](n),h.apply(i,n.get());return this.pushStack(i)}});function Ft(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||\"*\"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||\"*\"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||x.nodeName(o,n)?s.push(o):x.merge(s,Ft(o,n));return n===t||n&&x.nodeName(e,n)?x.merge([e],s):s}function Bt(e){Ct.test(e.type)&&(e.defaultChecked=e.checked)}x.extend({clone:function(e,t,n){var r,i,o,a,s,l=x.contains(e.ownerDocument,e);if(x.support.html5Clone||x.isXMLDoc(e)||!mt.test(\"<\"+e.nodeName+\">\")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(x.support.noCloneEvent&&x.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(r=Ft(o),s=Ft(e),a=0;null!=(i=s[a]);++a)r[a]&&Ot(i,r[a]);if(t)if(n)for(s=s||Ft(e),r=r||Ft(o),a=0;null!=(i=s[a]);a++)Mt(i,r[a]);else Mt(e,o);return r=Ft(o,\"script\"),r.length>0&&_t(r,!l&&Ft(e,\"script\")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,l,u,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if(\"object\"===x.type(o))x.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement(\"div\")),l=(bt.exec(o)||[\"\",\"\"])[1].toLowerCase(),c=At[l]||At._default,s.innerHTML=c[1]+o.replace(vt,\"<$1></$2>\")+c[2],i=c[0];while(i--)s=s.lastChild;if(!x.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!x.support.tbody){o=\"table\"!==l||xt.test(o)?\"<table>\"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)x.nodeName(u=o.childNodes[i],\"tbody\")&&!u.childNodes.length&&o.removeChild(u)}x.merge(d,s.childNodes),s.textContent=\"\";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),x.support.appendChecked||x.grep(Ft(d,\"input\"),Bt),h=0;while(o=d[h++])if((!r||-1===x.inArray(o,r))&&(a=x.contains(o.ownerDocument,o),s=Ft(f.appendChild(o),\"script\"),a&&_t(s),n)){i=0;while(o=s[i++])kt.test(o.type||\"\")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,l=x.expando,u=x.cache,c=x.support.deleteExpando,f=x.event.special;for(;null!=(n=e[s]);s++)if((t||x.acceptData(n))&&(o=n[l],a=o&&u[o])){if(a.events)for(r in a.events)f[r]?x.event.remove(n,r):x.removeEvent(n,r,a.handle);\nu[o]&&(delete u[o],c?delete n[l]:typeof n.removeAttribute!==i?n.removeAttribute(l):n[l]=null,p.push(o))}},_evalUrl:function(e){return x.ajax({url:e,type:\"GET\",dataType:\"script\",async:!1,global:!1,\"throws\":!0})}}),x.fn.extend({wrapAll:function(e){if(x.isFunction(e))return this.each(function(t){x(this).wrapAll(e.call(this,t))});if(this[0]){var t=x(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return x.isFunction(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=x.isFunction(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,\"body\")||x(this).replaceWith(this.childNodes)}).end()}});var Pt,Rt,Wt,$t=/alpha\\([^)]*\\)/i,It=/opacity\\s*=\\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp(\"^(\"+w+\")(.*)$\",\"i\"),Yt=RegExp(\"^(\"+w+\")(?!px)[a-z%]+$\",\"i\"),Jt=RegExp(\"^([+-])=(\"+w+\")\",\"i\"),Gt={BODY:\"block\"},Qt={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Kt={letterSpacing:0,fontWeight:400},Zt=[\"Top\",\"Right\",\"Bottom\",\"Left\"],en=[\"Webkit\",\"O\",\"Moz\",\"ms\"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,\"none\"===x.css(e,\"display\")||!x.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=x._data(r,\"olddisplay\"),n=r.style.display,t?(o[a]||\"none\"!==n||(r.style.display=\"\"),\"\"===r.style.display&&nn(r)&&(o[a]=x._data(r,\"olddisplay\",ln(r.nodeName)))):o[a]||(i=nn(r),(n&&\"none\"!==n||!i)&&x._data(r,\"olddisplay\",i?n:x.css(r,\"display\"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&\"none\"!==r.style.display&&\"\"!==r.style.display||(r.style.display=t?o[a]||\"\":\"none\"));return e}x.fn.extend({css:function(e,n){return x.access(this,function(e,n,r){var i,o,a={},s=0;if(x.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=x.css(e,n[s],!1,o);return a}return r!==t?x.style(e,n,r):x.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){return\"boolean\"==typeof e?e?this.show():this.hide():this.each(function(){nn(this)?x(this).show():x(this).hide()})}}),x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{\"float\":x.support.cssFloat?\"cssFloat\":\"styleFloat\"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,l=x.camelCase(n),u=e.style;if(n=x.cssProps[l]||(x.cssProps[l]=tn(u,l)),s=x.cssHooks[n]||x.cssHooks[l],r===t)return s&&\"get\"in s&&(o=s.get(e,!1,i))!==t?o:u[n];if(a=typeof r,\"string\"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(x.css(e,n)),a=\"number\"),!(null==r||\"number\"===a&&isNaN(r)||(\"number\"!==a||x.cssNumber[l]||(r+=\"px\"),x.support.clearCloneStyle||\"\"!==r||0!==n.indexOf(\"background\")||(u[n]=\"inherit\"),s&&\"set\"in s&&(r=s.set(e,r,i))===t)))try{u[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,l=x.camelCase(n);return n=x.cssProps[l]||(x.cssProps[l]=tn(e.style,l)),s=x.cssHooks[n]||x.cssHooks[l],s&&\"get\"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),\"normal\"===a&&n in Kt&&(a=Kt[n]),\"\"===r||r?(o=parseFloat(a),r===!0||x.isNumeric(o)?o||0:a):a}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s.getPropertyValue(n)||s[n]:t,u=e.style;return s&&(\"\"!==l||x.contains(e.ownerDocument,e)||(l=x.style(e,n)),Yt.test(l)&&Ut.test(n)&&(i=u.width,o=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=s.width,u.width=i,u.minWidth=o,u.maxWidth=a)),l}):a.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s[n]:t,u=e.style;return null==l&&u&&u[n]&&(l=u[n]),Yt.test(l)&&!zt.test(n)&&(i=u.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),u.left=\"fontSize\"===n?\"1em\":l,l=u.pixelLeft+\"px\",u.left=i,a&&(o.left=a)),\"\"===l?\"auto\":l});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||\"px\"):t}function an(e,t,n,r,i){var o=n===(r?\"border\":\"content\")?4:\"width\"===t?1:0,a=0;for(;4>o;o+=2)\"margin\"===n&&(a+=x.css(e,n+Zt[o],!0,i)),r?(\"content\"===n&&(a-=x.css(e,\"padding\"+Zt[o],!0,i)),\"margin\"!==n&&(a-=x.css(e,\"border\"+Zt[o]+\"Width\",!0,i))):(a+=x.css(e,\"padding\"+Zt[o],!0,i),\"padding\"!==n&&(a+=x.css(e,\"border\"+Zt[o]+\"Width\",!0,i)));return a}function sn(e,t,n){var r=!0,i=\"width\"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=x.support.boxSizing&&\"border-box\"===x.css(e,\"boxSizing\",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(x.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?\"border\":\"content\"),r,o)+\"px\"}function ln(e){var t=a,n=Gt[e];return n||(n=un(e,t),\"none\"!==n&&n||(Pt=(Pt||x(\"<iframe frameborder='0' width='0' height='0'/>\").css(\"cssText\",\"display:block !important\")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write(\"<!doctype html><html><body>\"),t.close(),n=un(e,t),Pt.detach()),Gt[e]=n),n}function un(e,t){var n=x(t.createElement(e)).appendTo(t.body),r=x.css(n[0],\"display\");return n.remove(),r}x.each([\"height\",\"width\"],function(e,n){x.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(x.css(e,\"display\"))?x.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,x.support.boxSizing&&\"border-box\"===x.css(e,\"boxSizing\",!1,i),i):0)}}}),x.support.opacity||(x.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||\"\")?.01*parseFloat(RegExp.$1)+\"\":t?\"1\":\"\"},set:function(e,t){var n=e.style,r=e.currentStyle,i=x.isNumeric(t)?\"alpha(opacity=\"+100*t+\")\":\"\",o=r&&r.filter||n.filter||\"\";n.zoom=1,(t>=1||\"\"===t)&&\"\"===x.trim(o.replace($t,\"\"))&&n.removeAttribute&&(n.removeAttribute(\"filter\"),\"\"===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+\" \"+i)}}),x(function(){x.support.reliableMarginRight||(x.cssHooks.marginRight={get:function(e,n){return n?x.swap(e,{display:\"inline-block\"},Wt,[e,\"marginRight\"]):t}}),!x.support.pixelPosition&&x.fn.position&&x.each([\"top\",\"left\"],function(e,n){x.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?x(e).position()[n]+\"px\":r):t}}})}),x.expr&&x.expr.filters&&(x.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!x.support.reliableHiddenOffsets&&\"none\"===(e.style&&e.style.display||x.css(e,\"display\"))},x.expr.filters.visible=function(e){return!x.expr.filters.hidden(e)}),x.each({margin:\"\",padding:\"\",border:\"Width\"},function(e,t){x.cssHooks[e+t]={expand:function(n){var r=0,i={},o=\"string\"==typeof n?n.split(\" \"):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(x.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\\[\\]$/,fn=/\\r?\\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,\"elements\");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(\":disabled\")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Ct.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:x.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(fn,\"\\r\\n\")}}):{name:t.name,value:n.replace(fn,\"\\r\\n\")}}).get()}}),x.param=function(e,n){var r,i=[],o=function(e,t){t=x.isFunction(t)?t():null==t?\"\":t,i[i.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(t)};if(n===t&&(n=x.ajaxSettings&&x.ajaxSettings.traditional),x.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join(\"&\").replace(cn,\"+\")};function gn(e,t,n,r){var i;if(x.isArray(t))x.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+\"[\"+(\"object\"==typeof i?t:\"\")+\"]\",i,n,r)});else if(n||\"object\"!==x.type(t))r(e,t);else for(i in t)gn(e+\"[\"+i+\"]\",t[i],n,r)}x.each(\"blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu\".split(\" \"),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)}});var mn,yn,vn=x.now(),bn=/\\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/gm,Cn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nn=/^(?:GET|HEAD)$/,kn=/^\\/\\//,En=/^([\\w.+-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+)|)|)/,Sn=x.fn.load,An={},jn={},Dn=\"*/\".concat(\"*\");try{yn=o.href}catch(Ln){yn=a.createElement(\"a\"),yn.href=\"\",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){\"string\"!=typeof t&&(n=t,t=\"*\");var r,i=0,o=t.toLowerCase().match(T)||[];if(x.isFunction(n))while(r=o[i++])\"+\"===r[0]?(r=r.slice(1)||\"*\",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(l){var u;return o[l]=!0,x.each(e[l]||[],function(e,l){var c=l(n,r,i);return\"string\"!=typeof c||a||o[c]?a?!(u=c):t:(n.dataTypes.unshift(c),s(c),!1)}),u}return s(n.dataTypes[0])||!o[\"*\"]&&s(\"*\")}function _n(e,n){var r,i,o=x.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&x.extend(!0,e,r),e}x.fn.load=function(e,n,r){if(\"string\"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,l=e.indexOf(\" \");return l>=0&&(i=e.slice(l,e.length),e=e.slice(0,l)),x.isFunction(n)?(r=n,n=t):n&&\"object\"==typeof n&&(a=\"POST\"),s.length>0&&x.ajax({url:e,type:a,dataType:\"html\",data:n}).done(function(e){o=arguments,s.html(i?x(\"<div>\").append(x.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},x.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:\"GET\",isLocal:Cn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":Dn,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":x.parseJSON,\"text xml\":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?_n(_n(e,x.ajaxSettings),t):_n(x.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){\"object\"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,l,u,c,p=x.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?x(f):x.event,h=x.Deferred(),g=x.Callbacks(\"once memory\"),m=p.statusCode||{},y={},v={},b=0,w=\"canceled\",C={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||w;return u&&u.abort(t),k(0,t),this}};if(h.promise(C).complete=g.add,C.success=C.done,C.error=C.fail,p.url=((e||p.url||yn)+\"\").replace(xn,\"\").replace(kn,mn[1]+\"//\"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=x.trim(p.dataType||\"*\").toLowerCase().match(T)||[\"\"],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||(\"http:\"===r[1]?\"80\":\"443\"))===(mn[3]||(\"http:\"===mn[1]?\"80\":\"443\")))),p.data&&p.processData&&\"string\"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),qn(An,p,n,C),2===b)return C;l=p.global,l&&0===x.active++&&x.event.trigger(\"ajaxStart\"),p.type=p.type.toUpperCase(),p.hasContent=!Nn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?\"&\":\"?\")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,\"$1_=\"+vn++):o+(bn.test(o)?\"&\":\"?\")+\"_=\"+vn++)),p.ifModified&&(x.lastModified[o]&&C.setRequestHeader(\"If-Modified-Since\",x.lastModified[o]),x.etag[o]&&C.setRequestHeader(\"If-None-Match\",x.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&C.setRequestHeader(\"Content-Type\",p.contentType),C.setRequestHeader(\"Accept\",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(\"*\"!==p.dataTypes[0]?\", \"+Dn+\"; q=0.01\":\"\"):p.accepts[\"*\"]);for(i in p.headers)C.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,C,p)===!1||2===b))return C.abort();w=\"abort\";for(i in{success:1,error:1,complete:1})C[i](p[i]);if(u=qn(jn,p,n,C)){C.readyState=1,l&&d.trigger(\"ajaxSend\",[C,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){C.abort(\"timeout\")},p.timeout));try{b=1,u.send(y,k)}catch(N){if(!(2>b))throw N;k(-1,N)}}else k(-1,\"No Transport\");function k(e,n,r,i){var c,y,v,w,T,N=n;2!==b&&(b=2,s&&clearTimeout(s),u=t,a=i||\"\",C.readyState=e>0?4:0,c=e>=200&&300>e||304===e,r&&(w=Mn(p,C,r)),w=On(p,w,C,c),c?(p.ifModified&&(T=C.getResponseHeader(\"Last-Modified\"),T&&(x.lastModified[o]=T),T=C.getResponseHeader(\"etag\"),T&&(x.etag[o]=T)),204===e||\"HEAD\"===p.type?N=\"nocontent\":304===e?N=\"notmodified\":(N=w.state,y=w.data,v=w.error,c=!v)):(v=N,(e||!N)&&(N=\"error\",0>e&&(e=0))),C.status=e,C.statusText=(n||N)+\"\",c?h.resolveWith(f,[y,N,C]):h.rejectWith(f,[C,N,v]),C.statusCode(m),m=t,l&&d.trigger(c?\"ajaxSuccess\":\"ajaxError\",[C,p,c?y:v]),g.fireWith(f,[C,N]),l&&(d.trigger(\"ajaxComplete\",[C,p]),--x.active||x.event.trigger(\"ajaxStop\")))}return C},getJSON:function(e,t,n){return x.get(e,t,n,\"json\")},getScript:function(e,n){return x.get(e,t,n,\"script\")}}),x.each([\"get\",\"post\"],function(e,n){x[n]=function(e,r,i,o){return x.isFunction(r)&&(o=o||i,i=r,r=t),x.ajax({url:e,type:n,dataType:o,data:r,success:i})}});function Mn(e,n,r){var i,o,a,s,l=e.contents,u=e.dataTypes;while(\"*\"===u[0])u.shift(),o===t&&(o=e.mimeType||n.getResponseHeader(\"Content-Type\"));if(o)for(s in l)if(l[s]&&l[s].test(o)){u.unshift(s);break}if(u[0]in r)a=u[0];else{for(s in r){if(!u[0]||e.converters[s+\" \"+u[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==u[0]&&u.unshift(a),r[a]):t}function On(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if(\"*\"===o)o=l;else if(\"*\"!==l&&l!==o){if(a=u[l+\" \"+o]||u[\"* \"+o],!a)for(i in u)if(s=i.split(\" \"),s[1]===o&&(a=u[l+\" \"+s[0]]||u[\"* \"+s[0]])){a===!0?a=u[i]:u[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e[\"throws\"])t=a(t);else try{t=a(t)}catch(p){return{state:\"parsererror\",error:a?p:\"No conversion from \"+l+\" to \"+o}}}return{state:\"success\",data:t}}x.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/(?:java|ecma)script/},converters:{\"text script\":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter(\"script\",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\",e.global=!1)}),x.ajaxTransport(\"script\",function(e){if(e.crossDomain){var n,r=a.head||x(\"head\")[0]||a.documentElement;return{send:function(t,i){n=a.createElement(\"script\"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,\"success\"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Fn=[],Bn=/(=)\\?(?=&|$)|\\?\\?/;x.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=Fn.pop()||x.expando+\"_\"+vn++;return this[e]=!0,e}}),x.ajaxPrefilter(\"json jsonp\",function(n,r,i){var o,a,s,l=n.jsonp!==!1&&(Bn.test(n.url)?\"url\":\"string\"==typeof n.data&&!(n.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&Bn.test(n.data)&&\"data\");return l||\"jsonp\"===n.dataTypes[0]?(o=n.jsonpCallback=x.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Bn,\"$1\"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?\"&\":\"?\")+n.jsonp+\"=\"+o),n.converters[\"script json\"]=function(){return s||x.error(o+\" was not called\"),s[0]},n.dataTypes[0]=\"json\",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,Fn.push(o)),s&&x.isFunction(a)&&a(s[0]),s=a=t}),\"script\"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject(\"Microsoft.XMLHTTP\")}catch(t){}}x.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=x.ajaxSettings.xhr(),x.support.cors=!!Rn&&\"withCredentials\"in Rn,Rn=x.support.ajax=!!Rn,Rn&&x.ajaxTransport(function(n){if(!n.crossDomain||x.support.cors){var r;return{send:function(i,o){var a,s,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)l[s]=n.xhrFields[s];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||i[\"X-Requested-With\"]||(i[\"X-Requested-With\"]=\"XMLHttpRequest\");try{for(s in i)l.setRequestHeader(s,i[s])}catch(u){}l.send(n.hasContent&&n.data||null),r=function(e,i){var s,u,c,p;try{if(r&&(i||4===l.readyState))if(r=t,a&&(l.onreadystatechange=x.noop,$n&&delete Pn[a]),i)4!==l.readyState&&l.abort();else{p={},s=l.status,u=l.getAllResponseHeaders(),\"string\"==typeof l.responseText&&(p.text=l.responseText);try{c=l.statusText}catch(f){c=\"\"}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,u)},n.async?4===l.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},x(e).unload($n)),Pn[a]=r),l.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp(\"^(?:([+-])=|)(\"+w+\")([a-z%]*)$\",\"i\"),Jn=/queueHooks$/,Gn=[nr],Qn={\"*\":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Yn.exec(t),o=i&&i[3]||(x.cssNumber[e]?\"\":\"px\"),a=(x.cssNumber[e]||\"px\"!==o&&+r)&&Yn.exec(x.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||\".5\",a/=s,x.style(n.elem,e,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=x.now()}function Zn(e,t,n){var r,i=(Qn[t]||[]).concat(Qn[\"*\"]),o=0,a=i.length;for(;a>o;o++)if(r=i[o].call(n,t,e))return r}function er(e,t,n){var r,i,o=0,a=Gn.length,s=x.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,o=1-r,a=0,l=u.tweens.length;for(;l>a;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),1>o&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(tr(c,u.opts.specialEasing);a>o;o++)if(r=Gn[o].call(u,e,c,u.opts))return r;return x.map(c,Zn,u),x.isFunction(u.opts.start)&&u.opts.start.call(e,u),x.fx.timer(x.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function tr(e,t){var n,r,i,o,a;for(n in e)if(r=x.camelCase(n),i=t[r],o=e[n],x.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=x.cssHooks[r],a&&\"expand\"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}x.Animation=x.extend(er,{tweener:function(e,t){x.isFunction(e)?(t=e,e=[\"*\"]):e=e.split(\" \");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,l,u=this,c={},p=e.style,f=e.nodeType&&nn(e),d=x._data(e,\"fxshow\");n.queue||(s=x._queueHooks(e,\"fx\"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,x.queue(e,\"fx\").length||s.empty.fire()})})),1===e.nodeType&&(\"height\"in t||\"width\"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],\"inline\"===x.css(e,\"display\")&&\"none\"===x.css(e,\"float\")&&(x.support.inlineBlockNeedsLayout&&\"inline\"!==ln(e.nodeName)?p.zoom=1:p.display=\"inline-block\")),n.overflow&&(p.overflow=\"hidden\",x.support.shrinkWrapBlocks||u.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Vn.exec(i)){if(delete t[r],o=o||\"toggle\"===i,i===(f?\"hide\":\"show\"))continue;c[r]=d&&d[r]||x.style(e,r)}if(!x.isEmptyObject(c)){d?\"hidden\"in d&&(f=d.hidden):d=x._data(e,\"fxshow\",{}),o&&(d.hidden=!f),f?x(e).show():u.done(function(){x(e).hide()}),u.done(function(){var t;x._removeData(e,\"fxshow\");for(t in c)x.style(e,t,c[t])});for(r in c)a=Zn(f?d[r]:0,r,u),r in d||(d[r]=a.start,f&&(a.end=a.start,a.start=\"width\"===r||\"height\"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}x.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||\"swing\",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?\"\":\"px\")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=x.css(e.elem,e.prop,\"\"),t&&\"auto\"!==t?t:0):e.elem[e.prop]},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[x.cssProps[e.prop]]||x.cssHooks[e.prop])?x.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.each([\"toggle\",\"show\",\"hide\"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||\"boolean\"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),o=x.speed(t,n,r),a=function(){var t=er(this,x.extend({},e),o);(i||x._data(this,\"finish\"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return\"string\"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||\"fx\",[]),this.each(function(){var t=!0,n=null!=e&&e+\"queueHooks\",o=x.timers,a=x._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&x.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||\"fx\"),this.each(function(){var t,n=x._data(this),r=n[e+\"queue\"],i=n[e+\"queueHooks\"],o=x.timers,a=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r[\"margin\"+n]=r[\"padding\"+n]=e;return t&&(r.opacity=r.width=e),r}x.each({slideDown:ir(\"show\"),slideUp:ir(\"hide\"),slideToggle:ir(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.speed=function(e,t,n){var r=e&&\"object\"==typeof e?x.extend({},e):{complete:n||!n&&t||x.isFunction(e)&&e,duration:e,easing:n&&t||t&&!x.isFunction(t)&&t};return r.duration=x.fx.off?0:\"number\"==typeof r.duration?r.duration:r.duration in x.fx.speeds?x.fx.speeds[r.duration]:x.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){x.isFunction(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},x.timers=[],x.fx=rr.prototype.init,x.fx.tick=function(){var e,n=x.timers,r=0;for(Xn=x.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||x.fx.stop(),Xn=t},x.fx.timer=function(e){e()&&x.timers.push(e)&&x.fx.start()},x.fx.interval=13,x.fx.start=function(){Un||(Un=setInterval(x.fx.tick,x.fx.interval))},x.fx.stop=function(){clearInterval(Un),Un=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fx.step={},x.expr&&x.expr.filters&&(x.expr.filters.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length}),x.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){x.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,x.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},x.offset={setOffset:function(e,t,n){var r=x.css(e,\"position\");\"static\"===r&&(e.style.position=\"relative\");var i=x(e),o=i.offset(),a=x.css(e,\"top\"),s=x.css(e,\"left\"),l=(\"absolute\"===r||\"fixed\"===r)&&x.inArray(\"auto\",[a,s])>-1,u={},c={},p,f;l?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),x.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(u.top=t.top-o.top+p),null!=t.left&&(u.left=t.left-o.left+f),\"using\"in t?t.using.call(e,u):i.css(u)}},x.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return\"fixed\"===x.css(r,\"position\")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),x.nodeName(e[0],\"html\")||(n=e.offset()),n.top+=x.css(e[0],\"borderTopWidth\",!0),n.left+=x.css(e[0],\"borderLeftWidth\",!0)),{top:t.top-n.top-x.css(r,\"marginTop\",!0),left:t.left-n.left-x.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s;while(e&&!x.nodeName(e,\"html\")&&\"static\"===x.css(e,\"position\"))e=e.offsetParent;return e||s})}}),x.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(e,n){var r=/Y/.test(n);x.fn[e]=function(i){return x.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?x(a).scrollLeft():o,r?o:x(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return x.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}x.each({Height:\"height\",Width:\"width\"},function(e,n){x.each({padding:\"inner\"+e,content:n,\"\":\"outer\"+e},function(r,i){x.fn[i]=function(i,o){var a=arguments.length&&(r||\"boolean\"!=typeof i),s=r||(i===!0||o===!0?\"margin\":\"border\");return x.access(this,function(n,r,i){var o;return x.isWindow(n)?n.document.documentElement[\"client\"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body[\"scroll\"+e],o[\"scroll\"+e],n.body[\"offset\"+e],o[\"offset\"+e],o[\"client\"+e])):i===t?x.css(n,r,s):x.style(n,r,i,s)},n,a?i:t,a,null)}})}),x.fn.size=function(){return this.length},x.fn.andSelf=x.fn.addBack,\"object\"==typeof module&&module&&\"object\"==typeof module.exports?module.exports=x:(e.jQuery=e.$=x,\"function\"==typeof define&&define.amd&&define(\"jquery\",[],function(){return x}))})(window);\n","/**\n * @license\n * Lo-Dash 2.3.0 (Custom Build) lodash.com/license | Underscore.js 1.5.2 underscorejs.org/LICENSE\n * Build: `lodash backbone`\n */\n;(function(){function n(n,r,t){t=(t||0)-1;for(var e=n?n.length:0;++t<e;)if(n[t]===r)return t;return-1}function r(n,r){var t=n.m,e=r.m;if(t!==e){if(t>e||typeof t==\"undefined\")return 1;if(t<e||typeof e==\"undefined\")return-1}return n.n-r.n}function t(n,r,t){r||(r=0),typeof t==\"undefined\"&&(t=n?n.length:0);var e=-1;t=t-r||0;for(var u=Array(0>t?0:t);++e<t;)u[e]=n[r+e];return u}function e(n){return n instanceof e?n:new u(n)}function u(n,r){this.__chain__=!!r,this.__wrapped__=n}function o(n){function r(){if(e){var n=e.slice();\ncr.apply(n,arguments)}if(this instanceof r){var o=f(t.prototype),n=t.apply(o,n||arguments);return _(n)?n:o}return t.apply(u,n||arguments)}var t=n[0],e=n[2],u=n[4];return r}function f(n){return _(n)?pr(n):{}}function i(n,r,t){if(typeof n!=\"function\")return D;if(typeof r==\"undefined\"||!(\"prototype\"in n))return n;switch(t){case 1:return function(t){return n.call(r,t)};case 2:return function(t,e){return n.call(r,t,e)};case 3:return function(t,e,u){return n.call(r,t,e,u)};case 4:return function(t,e,u,o){return n.call(r,t,e,u,o)\n}}return N(n,r)}function a(n){function r(){var n=p?c:this;if(o){var g=o.slice();cr.apply(g,arguments)}return(i||v)&&(g||(g=t(arguments)),i&&cr.apply(g,i),v&&g.length<l)?(u|=16,a([e,h?u:-4&u,g,null,c,l])):(g||(g=arguments),s&&(e=n[y]),this instanceof r?(n=f(e.prototype),g=e.apply(n,g),_(g)?g:n):e.apply(n,g))}var e=n[0],u=n[1],o=n[2],i=n[3],c=n[4],l=n[5],p=1&u,s=2&u,v=4&u,h=8&u,y=e;return r}function c(n,r){for(var t=-1,e=y(),u=n?n.length:0,o=[];++t<u;){var f=n[t];0>e(r,f)&&o.push(f)}return o}function l(n,r,t,e){e=(e||0)-1;\nfor(var u=n?n.length:0,o=[];++e<u;){var f=n[e];if(f&&typeof f==\"object\"&&typeof f.length==\"number\"&&(br(f)||g(f))){r||(f=l(f,r,t));var i=-1,a=f.length,c=o.length;for(o.length+=a;++i<a;)o[c++]=f[i]}else t||o.push(f)}return o}function p(n,r,t,u){if(n===r)return 0!==n||1/n==1/r;if(n===n&&!(n&&Y[typeof n]||r&&Y[typeof r]))return false;if(null==n||null==r)return n===r;var o=or.call(n),f=or.call(r);if(o!=f)return false;switch(o){case K:case L:return+n==+r;case Q:return n!=+n?r!=+r:0==n?1/n==1/r:n==+r;case W:case X:return n==r+\"\"\n}if(f=o==J,!f){var i=n instanceof e,a=r instanceof e;if(i||a)return p(i?n.__wrapped__:n,a?r.__wrapped__:r,t,u);if(o!=U)return false;if(o=n.constructor,i=r.constructor,o!=i&&!(d(o)&&o instanceof o&&d(i)&&i instanceof i)&&\"constructor\"in n&&\"constructor\"in r)return false}for(t||(t=[]),u||(u=[]),o=t.length;o--;)if(t[o]==n)return u[o]==r;var c=true,l=0;if(t.push(n),u.push(r),f){if(l=r.length,c=l==n.length)for(;l--&&(c=p(n[l],r[l],t,u)););return c}return wr(r,function(r,e,o){return ar.call(o,e)?(l++,!(c=ar.call(n,e)&&p(n[e],r,t,u))&&G):void 0\n}),c&&wr(n,function(n,r,t){return ar.call(t,r)?!(c=-1<--l)&&G:void 0}),c}function s(n){return function(r,t,e){var u={};t=z(t,e,3),e=-1;var o=r?r.length:0;if(typeof o==\"number\")for(;++e<o;){var f=r[e];n(u,f,t(f,e,r),r)}else xr(r,function(r,e,o){n(u,r,t(r,e,o),o)});return u}}function v(n,r,t,e,u,f){var i=16&r,c=32&r;if(!(2&r||d(n)))throw new TypeError;return i&&!t.length&&(r&=-17,t=false),c&&!e.length&&(r&=-33,e=false),(1==r||17===r?o:a)([n,r,t,e,u,f])}function h(n){return _r[n]}function y(){var r=(r=e.indexOf)===q?n:r;\nreturn r}function g(n){return n&&typeof n==\"object\"&&typeof n.length==\"number\"&&or.call(n)==H||false}function m(n){if(!n)return n;for(var r=1,t=arguments.length;r<t;r++){var e=arguments[r];if(e)for(var u in e)n[u]=e[u]}return n}function b(n){var r=[];return wr(n,function(n,t){d(n)&&r.push(t)}),r.sort()}function d(n){return typeof n==\"function\"}function _(n){return!(!n||!Y[typeof n])}function j(n){return typeof n==\"string\"||n&&typeof n==\"object\"&&or.call(n)==X||false}function w(n){for(var r=-1,t=dr(n),e=t.length,u=Array(e);++r<e;)u[r]=n[t[r]];\nreturn u}function x(n,r){var t=y(),e=n?n.length:0,u=false;return e&&typeof e==\"number\"?u=-1<t(n,r):xr(n,function(n){return(u=n===r)&&G}),u}function A(n,r,t){var e=true;r=z(r,t,3),t=-1;var u=n?n.length:0;if(typeof u==\"number\")for(;++t<u&&(e=!!r(n[t],t,n)););else xr(n,function(n,t,u){return!(e=!!r(n,t,u))&&G});return e}function O(n,r,t){var e=[];r=z(r,t,3),t=-1;var u=n?n.length:0;if(typeof u==\"number\")for(;++t<u;){var o=n[t];r(o,t,n)&&e.push(o)}else xr(n,function(n,t,u){r(n,t,u)&&e.push(n)});return e}function E(n,r,t){r=z(r,t,3),t=-1;\nvar e=n?n.length:0;if(typeof e!=\"number\"){var u;return xr(n,function(n,t,e){return r(n,t,e)?(u=n,G):void 0}),u}for(;++t<e;){var o=n[t];if(r(o,t,n))return o}}function R(n,r,t){var e=-1,u=n?n.length:0;if(r=r&&typeof t==\"undefined\"?r:i(r,t,3),typeof u==\"number\")for(;++e<u&&r(n[e],e,n)!==G;);else xr(n,r)}function k(n,r){var t=n?n.length:0;if(typeof t==\"number\")for(;t--&&false!==r(n[t],t,n););else{var e=dr(n),t=e.length;xr(n,function(n,u,o){return u=e?e[--t]:--t,false===r(o[u],u,o)&&G})}}function I(n,r,t){var e=-1,u=n?n.length:0;\nif(r=z(r,t,3),typeof u==\"number\")for(var o=Array(u);++e<u;)o[e]=r(n[e],e,n);else o=[],xr(n,function(n,t,u){o[++e]=r(n,t,u)});return o}function S(n,r,t,e){if(!n)return t;var u=3>arguments.length;r=z(r,e,4);var o=-1,f=n.length;if(typeof f==\"number\")for(u&&(t=n[++o]);++o<f;)t=r(t,n[o],o,n);else xr(n,function(n,e,o){t=u?(u=false,n):r(t,n,e,o)});return t}function B(n,r,t,e){var u=3>arguments.length;return r=z(r,e,4),k(n,function(n,e,o){t=u?(u=false,n):r(t,n,e,o)}),t}function M(n,r,t){var e;r=z(r,t,3),t=-1;var u=n?n.length:0;\nif(typeof u==\"number\")for(;++t<u&&!(e=r(n[t],t,n)););else xr(n,function(n,t,u){return(e=r(n,t,u))&&G});return!!e}function T(n,r,e){var u=0,o=n?n.length:0;if(typeof r!=\"number\"&&null!=r){var f=-1;for(r=z(r,e,3);++f<o&&r(n[f],f,n);)u++}else if(u=r,null==u||e)return n?n[0]:V;return t(n,0,yr(hr(0,u),o))}function q(r,t,e){if(typeof e==\"number\"){var u=r?r.length:0;e=0>e?hr(0,u+e):e||0}else if(e)return e=F(r,t),r[e]===t?e:-1;return n(r,t,e)}function $(n,r,e){if(typeof r!=\"number\"&&null!=r){var u=0,o=-1,f=n?n.length:0;\nfor(r=z(r,e,3);++o<f&&r(n[o],o,n);)u++}else u=null==r||e?1:hr(0,r);return t(n,u)}function F(n,r,t,e){var u=0,o=n?n.length:u;for(t=t?z(t,e,1):D,r=t(r);u<o;)e=u+o>>>1,t(n[e])<r?u=e+1:o=e;return u}function N(n,r){return 2<arguments.length?v(n,17,t(arguments,2),null,r):v(n,1,null,null,r)}function z(n,r,t){var e=typeof n;if(null==n||\"function\"==e)return i(n,r,t);if(\"object\"!=e)return function(r){return r[n]};var u=dr(n);return function(r){for(var t=u.length,e=false;t--&&(e=r[u[t]]===n[u[t]]););return e}}function D(n){return n\n}function P(n){R(b(n),function(r){var t=e[r]=n[r];e.prototype[r]=function(){var n=[this.__wrapped__];return cr.apply(n,arguments),n=t.apply(e,n),this.__chain__?new u(n,true):n}})}var V,C=0,G={},H=\"[object Arguments]\",J=\"[object Array]\",K=\"[object Boolean]\",L=\"[object Date]\",Q=\"[object Number]\",U=\"[object Object]\",W=\"[object RegExp]\",X=\"[object String]\",Y={\"boolean\":false,\"function\":true,object:true,number:false,string:false,undefined:false},Z=Y[typeof window]&&window||this,nr=Y[typeof exports]&&exports&&!exports.nodeType&&exports,rr=Y[typeof module]&&module&&!module.nodeType&&module,tr=rr&&rr.exports===nr&&nr,er=Y[typeof global]&&global;\n!er||er.global!==er&&er.window!==er||(Z=er);var ur=[],er=Object.prototype,or=er.toString,fr=RegExp(\"^\"+(or+\"\").replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\").replace(/toString| for [^\\]]+/g,\".*?\")+\"$\"),ir=Math.floor,ar=er.hasOwnProperty,cr=ur.push,lr=er.propertyIsEnumerable,pr=fr.test(pr=Object.create)&&pr,sr=fr.test(sr=Array.isArray)&&sr,vr=fr.test(vr=Object.keys)&&vr,hr=Math.max,yr=Math.min,gr=Math.random;u.prototype=e.prototype;var mr={};!function(){var n={0:1,length:1};mr.spliceObjects=(ur.splice.call(n,0,1),!n[0])\n}(1),pr||(f=function(){function n(){}return function(r){if(_(r)){n.prototype=r;var t=new n;n.prototype=null}return t||Z.Object()}}()),g(arguments)||(g=function(n){return n&&typeof n==\"object\"&&typeof n.length==\"number\"&&ar.call(n,\"callee\")&&!lr.call(n,\"callee\")||false});var br=sr||function(n){return n&&typeof n==\"object\"&&typeof n.length==\"number\"&&or.call(n)==J||false},sr=function(n){var r,t=[];if(!n||!Y[typeof n])return t;for(r in n)ar.call(n,r)&&t.push(r);return t},dr=vr?function(n){return _(n)?vr(n):[]\n}:sr,_r={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\"},jr=RegExp(\"[\"+dr(_r).join(\"\")+\"]\",\"g\"),wr=function(n,r){var t;if(!n||!Y[typeof n])return n;for(t in n)if(r(n[t],t,n)===G)break;return n},xr=function(n,r){var t;if(!n||!Y[typeof n])return n;for(t in n)if(ar.call(n,t)&&r(n[t],t,n)===G)break;return n};d(/x/)&&(d=function(n){return typeof n==\"function\"&&\"[object Function]\"==or.call(n)}),sr=s(function(n,r,t){ar.call(n,t)?n[t]++:n[t]=1}),er=s(function(n,r,t){(ar.call(n,t)?n[t]:n[t]=[]).push(r)\n}),e.bind=N,e.bindAll=function(n){for(var r=1<arguments.length?l(arguments,true,false,1):b(n),t=-1,e=r.length;++t<e;){var u=r[t];n[u]=v(n[u],1,null,null,n)}return n},e.chain=function(n){return n=new u(n),n.__chain__=true,n},e.countBy=sr,e.defaults=function(n){if(!n)return n;for(var r=1,t=arguments.length;r<t;r++){var e=arguments[r];if(e)for(var u in e)\"undefined\"==typeof n[u]&&(n[u]=e[u])}return n},e.difference=function(n){return c(n,l(arguments,true,true,1))},e.filter=O,e.forEach=R,e.functions=b,e.groupBy=er,e.initial=function(n,r,e){var u=0,o=n?n.length:0;\nif(typeof r!=\"number\"&&null!=r){var f=o;for(r=z(r,e,3);f--&&r(n[f],f,n);)u++}else u=null==r||e?1:r||u;return t(n,0,yr(hr(0,o-u),o))},e.invert=function(n){for(var r=-1,t=dr(n),e=t.length,u={};++r<e;){var o=t[r];u[n[o]]=o}return u},e.invoke=function(n,r){var e=t(arguments,2),u=-1,o=typeof r==\"function\",f=n?n.length:0,i=Array(typeof f==\"number\"?f:0);return R(n,function(n){i[++u]=(o?r:n[r]).apply(n,e)}),i},e.keys=dr,e.map=I,e.max=function(n,r,t){var e=-1/0,u=e;typeof r!=\"function\"&&t&&t[r]===n&&(r=null);\nvar o=-1,f=n?n.length:0;if(null==r&&typeof f==\"number\")for(;++o<f;)t=n[o],t>u&&(u=t);else r=z(r,t,3),R(n,function(n,t,o){t=r(n,t,o),t>e&&(e=t,u=n)});return u},e.min=function(n,r,t){var e=1/0,u=e;typeof r!=\"function\"&&t&&t[r]===n&&(r=null);var o=-1,f=n?n.length:0;if(null==r&&typeof f==\"number\")for(;++o<f;)t=n[o],t<u&&(u=t);else r=z(r,t,3),R(n,function(n,t,o){t=r(n,t,o),t<e&&(e=t,u=n)});return u},e.omit=function(n){var r=[];wr(n,function(n,t){r.push(t)});for(var r=c(r,l(arguments,true,false,1)),t=-1,e=r.length,u={};++t<e;){var o=r[t];\nu[o]=n[o]}return u},e.once=function(n){var r,t;if(!d(n))throw new TypeError;return function(){return r?t:(r=true,t=n.apply(this,arguments),n=null,t)}},e.pairs=function(n){for(var r=-1,t=dr(n),e=t.length,u=Array(e);++r<e;){var o=t[r];u[r]=[o,n[o]]}return u},e.pick=function(n){for(var r=-1,t=l(arguments,true,false,1),e=t.length,u={};++r<e;){var o=t[r];o in n&&(u[o]=n[o])}return u},e.reject=function(n,r,t){return r=z(r,t,3),O(n,function(n,t,e){return!r(n,t,e)})},e.rest=$,e.shuffle=function(n){var r=-1,t=n?n.length:0,e=Array(typeof t==\"number\"?t:0);\nreturn R(n,function(n){var t;t=++r,t=0+ir(gr()*(t-0+1)),e[r]=e[t],e[t]=n}),e},e.sortBy=function(n,t,e){var u=-1,o=n?n.length:0,f=Array(typeof o==\"number\"?o:0);for(t=z(t,e,3),R(n,function(n,r,e){f[++u]={m:t(n,r,e),n:u,o:n}}),o=f.length,f.sort(r);o--;)f[o]=f[o].o;return f},e.toArray=function(n){return br(n)?t(n):n&&typeof n.length==\"number\"?I(n):w(n)},e.values=w,e.without=function(n){return c(n,t(arguments,1))},e.collect=I,e.drop=$,e.each=R,e.extend=m,e.methods=b,e.select=O,e.tail=$,e.clone=function(n){return _(n)?br(n)?t(n):m({},n):n\n},e.contains=x,e.escape=function(n){return null==n?\"\":(n+\"\").replace(jr,h)},e.every=A,e.find=E,e.has=function(n,r){return n?ar.call(n,r):false},e.identity=D,e.indexOf=q,e.isArguments=g,e.isArray=br,e.isEmpty=function(n){if(!n)return true;if(br(n)||j(n))return!n.length;for(var r in n)if(ar.call(n,r))return false;return true},e.isEqual=function(n,r){return p(n,r)},e.isFunction=d,e.isObject=_,e.isRegExp=function(n){return n&&Y[typeof n]&&or.call(n)==W||false},e.isString=j,e.lastIndexOf=function(n,r,t){var e=n?n.length:0;\nfor(typeof t==\"number\"&&(e=(0>t?hr(0,e+t):yr(t,e-1))+1);e--;)if(n[e]===r)return e;return-1},e.mixin=P,e.reduce=S,e.reduceRight=B,e.result=function(n,r){if(n){var t=n[r];return d(t)?n[r]():t}},e.size=function(n){var r=n?n.length:0;return typeof r==\"number\"?r:dr(n).length},e.some=M,e.sortedIndex=F,e.uniqueId=function(n){var r=++C+\"\";return n?n+r:r},e.all=A,e.any=M,e.detect=E,e.foldl=S,e.foldr=B,e.include=x,e.inject=S,e.first=T,e.last=function(n,r,e){var u=0,o=n?n.length:0;if(typeof r!=\"number\"&&null!=r){var f=o;\nfor(r=z(r,e,3);f--&&r(n[f],f,n);)u++}else if(u=r,null==u||e)return n?n[o-1]:V;return t(n,hr(0,o-u))},e.take=T,e.head=T,P(e),e.VERSION=\"2.3.0\",e.prototype.chain=function(){return this.__chain__=true,this},e.prototype.value=function(){return this.__wrapped__},R(\"pop push reverse shift sort splice unshift\".split(\" \"),function(n){var r=ur[n];e.prototype[n]=function(){var n=this.__wrapped__;return r.apply(n,arguments),mr.spliceObjects||0!==n.length||delete n[0],this}}),R([\"concat\",\"join\",\"slice\"],function(n){var r=ur[n];\ne.prototype[n]=function(){var n=r.apply(this.__wrapped__,arguments);return this.__chain__&&(n=new u(n),n.__chain__=true),n}}),nr&&rr?tr?(rr.exports=e)._=e:nr._=e:Z._=e}).call(this);","//     Backbone.js 0.9.9\n\n//     (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.\n//     Backbone may be freely distributed under the MIT license.\n//     For all details and documentation:\n//     http://backbonejs.org\n\n(function(){\n\n  // Initial Setup\n  // -------------\n\n  // Save a reference to the global object (`window` in the browser, `exports`\n  // on the server).\n  var root = this;\n\n  // Save the previous value of the `Backbone` variable, so that it can be\n  // restored later on, if `noConflict` is used.\n  var previousBackbone = root.Backbone;\n\n  // Create a local reference to array methods.\n  var array = [];\n  var push = array.push;\n  var slice = array.slice;\n  var splice = array.splice;\n\n  // The top-level namespace. All public Backbone classes and modules will\n  // be attached to this. Exported for both CommonJS and the browser.\n  var Backbone;\n  if (typeof exports !== 'undefined') {\n    Backbone = exports;\n  } else {\n    Backbone = root.Backbone = {};\n  }\n\n  // Current version of the library. Keep in sync with `package.json`.\n  Backbone.VERSION = '0.9.9';\n\n  // Require Underscore, if we're on the server, and it's not already present.\n  var _ = root._;\n  if (!_ && (typeof require !== 'undefined')) _ = require('underscore');\n\n  // For Backbone's purposes, jQuery, Zepto, or Ender owns the `$` variable.\n  Backbone.$ = root.jQuery || root.Zepto || root.ender;\n\n  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable\n  // to its previous owner. Returns a reference to this Backbone object.\n  Backbone.noConflict = function() {\n    root.Backbone = previousBackbone;\n    return this;\n  };\n\n  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\n  // will fake `\"PUT\"` and `\"DELETE\"` requests via the `_method` parameter and\n  // set a `X-Http-Method-Override` header.\n  Backbone.emulateHTTP = false;\n\n  // Turn on `emulateJSON` to support legacy servers that can't deal with direct\n  // `application/json` requests ... will encode the body as\n  // `application/x-www-form-urlencoded` instead and will send the model in a\n  // form param named `model`.\n  Backbone.emulateJSON = false;\n\n  // Backbone.Events\n  // ---------------\n\n  // Regular expression used to split event strings.\n  var eventSplitter = /\\s+/;\n\n  // Implement fancy features of the Events API such as multiple event\n  // names `\"change blur\"` and jQuery-style event maps `{change: action}`\n  // in terms of the existing API.\n  var eventsApi = function(obj, action, name, rest) {\n    if (!name) return true;\n    if (typeof name === 'object') {\n      for (var key in name) {\n        obj[action].apply(obj, [key, name[key]].concat(rest));\n      }\n    } else if (eventSplitter.test(name)) {\n      var names = name.split(eventSplitter);\n      for (var i = 0, l = names.length; i < l; i++) {\n        obj[action].apply(obj, [names[i]].concat(rest));\n      }\n    } else {\n      return true;\n    }\n  };\n\n  // Optimized internal dispatch function for triggering events. Tries to\n  // keep the usual cases speedy (most Backbone events have 3 arguments).\n  var triggerEvents = function(obj, events, args) {\n    var ev, i = -1, l = events.length;\n    switch (args.length) {\n    case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx);\n    return;\n    case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, args[0]);\n    return;\n    case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, args[0], args[1]);\n    return;\n    case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, args[0], args[1], args[2]);\n    return;\n    default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args);\n    }\n  };\n\n  // A module that can be mixed in to *any object* in order to provide it with\n  // custom events. You may bind with `on` or remove with `off` callback\n  // functions to an event; `trigger`-ing an event fires all callbacks in\n  // succession.\n  //\n  //     var object = {};\n  //     _.extend(object, Backbone.Events);\n  //     object.on('expand', function(){ alert('expanded'); });\n  //     object.trigger('expand');\n  //\n  var Events = Backbone.Events = {\n\n    // Bind one or more space separated events, or an events map,\n    // to a `callback` function. Passing `\"all\"` will bind the callback to\n    // all events fired.\n    on: function(name, callback, context) {\n      if (!(eventsApi(this, 'on', name, [callback, context]) && callback)) return this;\n      this._events || (this._events = {});\n      var list = this._events[name] || (this._events[name] = []);\n      list.push({callback: callback, context: context, ctx: context || this});\n      return this;\n    },\n\n    // Bind events to only be triggered a single time. After the first time\n    // the callback is invoked, it will be removed.\n    once: function(name, callback, context) {\n      if (!(eventsApi(this, 'once', name, [callback, context]) && callback)) return this;\n      var self = this;\n      var once = _.once(function() {\n        self.off(name, once);\n        callback.apply(this, arguments);\n      });\n      once._callback = callback;\n      this.on(name, once, context);\n      return this;\n    },\n\n    // Remove one or many callbacks. If `context` is null, removes all\n    // callbacks with that function. If `callback` is null, removes all\n    // callbacks for the event. If `events` is null, removes all bound\n    // callbacks for all events.\n    off: function(name, callback, context) {\n      var list, ev, events, names, i, l, j, k;\n      if (!this._events || !eventsApi(this, 'off', name, [callback, context])) return this;\n      if (!name && !callback && !context) {\n        this._events = {};\n        return this;\n      }\n\n      names = name ? [name] : _.keys(this._events);\n      for (i = 0, l = names.length; i < l; i++) {\n        name = names[i];\n        if (list = this._events[name]) {\n          events = [];\n          if (callback || context) {\n            for (j = 0, k = list.length; j < k; j++) {\n              ev = list[j];\n              if ((callback && callback !== (ev.callback._callback || ev.callback)) ||\n                  (context && context !== ev.context)) {\n                events.push(ev);\n              }\n            }\n          }\n          this._events[name] = events;\n        }\n      }\n\n      return this;\n    },\n\n    // Trigger one or many events, firing all bound callbacks. Callbacks are\n    // passed the same arguments as `trigger` is, apart from the event name\n    // (unless you're listening on `\"all\"`, which will cause your callback to\n    // receive the true name of the event as the first argument).\n    trigger: function(name) {\n      if (!this._events) return this;\n      var args = slice.call(arguments, 1);\n      if (!eventsApi(this, 'trigger', name, args)) return this;\n      var events = this._events[name];\n      var allEvents = this._events.all;\n      if (events) triggerEvents(this, events, args);\n      if (allEvents) triggerEvents(this, allEvents, arguments);\n      return this;\n    },\n\n    // An inversion-of-control version of `on`. Tell *this* object to listen to\n    // an event in another object ... keeping track of what it's listening to.\n    listenTo: function(object, events, callback) {\n      var listeners = this._listeners || (this._listeners = {});\n      var id = object._listenerId || (object._listenerId = _.uniqueId('l'));\n      listeners[id] = object;\n      object.on(events, callback || this, this);\n      return this;\n    },\n\n    // Tell this object to stop listening to either specific events ... or\n    // to every object it's currently listening to.\n    stopListening: function(object, events, callback) {\n      var listeners = this._listeners;\n      if (!listeners) return;\n      if (object) {\n        object.off(events, callback, this);\n        if (!events && !callback) delete listeners[object._listenerId];\n      } else {\n        for (var id in listeners) {\n          listeners[id].off(null, null, this);\n        }\n        this._listeners = {};\n      }\n      return this;\n    }\n  };\n\n  // Aliases for backwards compatibility.\n  Events.bind   = Events.on;\n  Events.unbind = Events.off;\n\n  // Allow the `Backbone` object to serve as a global event bus, for folks who\n  // want global \"pubsub\" in a convenient place.\n  _.extend(Backbone, Events);\n\n  // Backbone.Model\n  // --------------\n\n  // Create a new model, with defined attributes. A client id (`cid`)\n  // is automatically generated and assigned for you.\n  var Model = Backbone.Model = function(attributes, options) {\n    var defaults;\n    var attrs = attributes || {};\n    this.cid = _.uniqueId('c');\n    this.changed = {};\n    this.attributes = {};\n    this._changes = [];\n    if (options && options.collection) this.collection = options.collection;\n    if (options && options.parse) attrs = this.parse(attrs);\n    if (defaults = _.result(this, 'defaults')) _.defaults(attrs, defaults);\n    this.set(attrs, {silent: true});\n    this._currentAttributes = _.clone(this.attributes);\n    this._previousAttributes = _.clone(this.attributes);\n    this.initialize.apply(this, arguments);\n  };\n\n  // Attach all inheritable methods to the Model prototype.\n  _.extend(Model.prototype, Events, {\n\n    // A hash of attributes whose current and previous value differ.\n    changed: null,\n\n    // The default name for the JSON `id` attribute is `\"id\"`. MongoDB and\n    // CouchDB users may want to set this to `\"_id\"`.\n    idAttribute: 'id',\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Return a copy of the model's `attributes` object.\n    toJSON: function(options) {\n      return _.clone(this.attributes);\n    },\n\n    // Proxy `Backbone.sync` by default.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Get the value of an attribute.\n    get: function(attr) {\n      return this.attributes[attr];\n    },\n\n    // Get the HTML-escaped value of an attribute.\n    escape: function(attr) {\n      return _.escape(this.get(attr));\n    },\n\n    // Returns `true` if the attribute contains a value that is not null\n    // or undefined.\n    has: function(attr) {\n      return this.get(attr) != null;\n    },\n\n    // Set a hash of model attributes on the object, firing `\"change\"` unless\n    // you choose to silence it.\n    set: function(key, val, options) {\n      var attr, attrs;\n      if (key == null) return this;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      if (_.isObject(key)) {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      // Extract attributes and options.\n      var silent = options && options.silent;\n      var unset = options && options.unset;\n\n      // Run validation.\n      if (!this._validate(attrs, options)) return false;\n\n      // Check for changes of `id`.\n      if (this.idAttribute in attrs) this.id = attrs[this.idAttribute];\n\n      var now = this.attributes;\n\n      // For each `set` attribute...\n      for (attr in attrs) {\n        val = attrs[attr];\n\n        // Update or delete the current value, and track the change.\n        unset ? delete now[attr] : now[attr] = val;\n        this._changes.push(attr, val);\n      }\n\n      // Signal that the model's state has potentially changed, and we need\n      // to recompute the actual changes.\n      this._hasComputed = false;\n\n      // Fire the `\"change\"` events.\n      if (!silent) this.change(options);\n      return this;\n    },\n\n    // Remove an attribute from the model, firing `\"change\"` unless you choose\n    // to silence it. `unset` is a noop if the attribute doesn't exist.\n    unset: function(attr, options) {\n      return this.set(attr, void 0, _.extend({}, options, {unset: true}));\n    },\n\n    // Clear all attributes on the model, firing `\"change\"` unless you choose\n    // to silence it.\n    clear: function(options) {\n      var attrs = {};\n      for (var key in this.attributes) attrs[key] = void 0;\n      return this.set(attrs, _.extend({}, options, {unset: true}));\n    },\n\n    // Fetch the model from the server. If the server's representation of the\n    // model differs from its current attributes, they will be overriden,\n    // triggering a `\"change\"` event.\n    fetch: function(options) {\n      options = options ? _.clone(options) : {};\n      if (options.parse === void 0) options.parse = true;\n      var model = this;\n      var success = options.success;\n      options.success = function(resp, status, xhr) {\n        if (!model.set(model.parse(resp), options)) return false;\n        if (success) success(model, resp, options);\n      };\n      return this.sync('read', this, options);\n    },\n\n    // Set a hash of model attributes, and sync the model to the server.\n    // If the server returns an attributes hash that differs, the model's\n    // state will be `set` again.\n    save: function(key, val, options) {\n      var attrs, current, done;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      if (key == null || _.isObject(key)) {\n        attrs = key;\n        options = val;\n      } else if (key != null) {\n        (attrs = {})[key] = val;\n      }\n      options = options ? _.clone(options) : {};\n\n      // If we're \"wait\"-ing to set changed attributes, validate early.\n      if (options.wait) {\n        if (attrs && !this._validate(attrs, options)) return false;\n        current = _.clone(this.attributes);\n      }\n\n      // Regular saves `set` attributes before persisting to the server.\n      var silentOptions = _.extend({}, options, {silent: true});\n      if (attrs && !this.set(attrs, options.wait ? silentOptions : options)) {\n        return false;\n      }\n\n      // Do not persist invalid models.\n      if (!attrs && !this._validate(null, options)) return false;\n\n      // After a successful server-side save, the client is (optionally)\n      // updated with the server-side state.\n      var model = this;\n      var success = options.success;\n      options.success = function(resp, status, xhr) {\n        done = true;\n        var serverAttrs = model.parse(resp);\n        if (options.wait) serverAttrs = _.extend(attrs || {}, serverAttrs);\n        if (!model.set(serverAttrs, options)) return false;\n        if (success) success(model, resp, options);\n      };\n\n      // Finish configuring and sending the Ajax request.\n      var method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');\n      if (method == 'patch') options.attrs = attrs;\n      var xhr = this.sync(method, this, options);\n\n      // When using `wait`, reset attributes to original values unless\n      // `success` has been called already.\n      if (!done && options.wait) {\n        this.clear(silentOptions);\n        this.set(current, silentOptions);\n      }\n\n      return xhr;\n    },\n\n    // Destroy this model on the server if it was already persisted.\n    // Optimistically removes the model from its collection, if it has one.\n    // If `wait: true` is passed, waits for the server to respond before removal.\n    destroy: function(options) {\n      options = options ? _.clone(options) : {};\n      var model = this;\n      var success = options.success;\n\n      var destroy = function() {\n        model.trigger('destroy', model, model.collection, options);\n      };\n\n      options.success = function(resp) {\n        if (options.wait || model.isNew()) destroy();\n        if (success) success(model, resp, options);\n      };\n\n      if (this.isNew()) {\n        options.success();\n        return false;\n      }\n\n      var xhr = this.sync('delete', this, options);\n      if (!options.wait) destroy();\n      return xhr;\n    },\n\n    // Default URL for the model's representation on the server -- if you're\n    // using Backbone's restful methods, override this to change the endpoint\n    // that will be called.\n    url: function() {\n      var base = _.result(this, 'urlRoot') || _.result(this.collection, 'url') || urlError();\n      if (this.isNew()) return base;\n      return base + (base.charAt(base.length - 1) === '/' ? '' : '/') + encodeURIComponent(this.id);\n    },\n\n    // **parse** converts a response into the hash of attributes to be `set` on\n    // the model. The default implementation is just to pass the response along.\n    parse: function(resp) {\n      return resp;\n    },\n\n    // Create a new model with identical attributes to this one.\n    clone: function() {\n      return new this.constructor(this.attributes);\n    },\n\n    // A model is new if it has never been saved to the server, and lacks an id.\n    isNew: function() {\n      return this.id == null;\n    },\n\n    // Call this method to manually fire a `\"change\"` event for this model and\n    // a `\"change:attribute\"` event for each changed attribute.\n    // Calling this will cause all objects observing the model to update.\n    change: function(options) {\n      var changing = this._changing;\n      this._changing = true;\n\n      // Generate the changes to be triggered on the model.\n      var triggers = this._computeChanges(true);\n\n      this._pending = !!triggers.length;\n\n      for (var i = triggers.length - 2; i >= 0; i -= 2) {\n        this.trigger('change:' + triggers[i], this, triggers[i + 1], options);\n      }\n\n      if (changing) return this;\n\n      // Trigger a `change` while there have been changes.\n      while (this._pending) {\n        this._pending = false;\n        this.trigger('change', this, options);\n        this._previousAttributes = _.clone(this.attributes);\n      }\n\n      this._changing = false;\n      return this;\n    },\n\n    // Determine if the model has changed since the last `\"change\"` event.\n    // If you specify an attribute name, determine if that attribute has changed.\n    hasChanged: function(attr) {\n      if (!this._hasComputed) this._computeChanges();\n      if (attr == null) return !_.isEmpty(this.changed);\n      return _.has(this.changed, attr);\n    },\n\n    // Return an object containing all the attributes that have changed, or\n    // false if there are no changed attributes. Useful for determining what\n    // parts of a view need to be updated and/or what attributes need to be\n    // persisted to the server. Unset attributes will be set to undefined.\n    // You can also pass an attributes object to diff against the model,\n    // determining if there *would be* a change.\n    changedAttributes: function(diff) {\n      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\n      var val, changed = false, old = this._previousAttributes;\n      for (var attr in diff) {\n        if (_.isEqual(old[attr], (val = diff[attr]))) continue;\n        (changed || (changed = {}))[attr] = val;\n      }\n      return changed;\n    },\n\n    // Looking at the built up list of `set` attribute changes, compute how\n    // many of the attributes have actually changed. If `loud`, return a\n    // boiled-down list of only the real changes.\n    _computeChanges: function(loud) {\n      this.changed = {};\n      var already = {};\n      var triggers = [];\n      var current = this._currentAttributes;\n      var changes = this._changes;\n\n      // Loop through the current queue of potential model changes.\n      for (var i = changes.length - 2; i >= 0; i -= 2) {\n        var key = changes[i], val = changes[i + 1];\n        if (already[key]) continue;\n        already[key] = true;\n\n        // Check if the attribute has been modified since the last change,\n        // and update `this.changed` accordingly. If we're inside of a `change`\n        // call, also add a trigger to the list.\n        if (current[key] !== val) {\n          this.changed[key] = val;\n          if (!loud) continue;\n          triggers.push(key, val);\n          current[key] = val;\n        }\n      }\n      if (loud) this._changes = [];\n\n      // Signals `this.changed` is current to prevent duplicate calls from `this.hasChanged`.\n      this._hasComputed = true;\n      return triggers;\n    },\n\n    // Get the previous value of an attribute, recorded at the time the last\n    // `\"change\"` event was fired.\n    previous: function(attr) {\n      if (attr == null || !this._previousAttributes) return null;\n      return this._previousAttributes[attr];\n    },\n\n    // Get all of the attributes of the model at the time of the previous\n    // `\"change\"` event.\n    previousAttributes: function() {\n      return _.clone(this._previousAttributes);\n    },\n\n    // Run validation against the next complete set of model attributes,\n    // returning `true` if all is well. If a specific `error` callback has\n    // been passed, call that instead of firing the general `\"error\"` event.\n    _validate: function(attrs, options) {\n      if (!this.validate) return true;\n      attrs = _.extend({}, this.attributes, attrs);\n      var error = this.validate(attrs, options);\n      if (!error) return true;\n      if (options && options.error) options.error(this, error, options);\n      this.trigger('error', this, error, options);\n      return false;\n    }\n\n  });\n\n  // Backbone.Collection\n  // -------------------\n\n  // Provides a standard collection class for our sets of models, ordered\n  // or unordered. If a `comparator` is specified, the Collection will maintain\n  // its models in sort order, as they're added and removed.\n  var Collection = Backbone.Collection = function(models, options) {\n    options || (options = {});\n    if (options.model) this.model = options.model;\n    if (options.comparator !== void 0) this.comparator = options.comparator;\n    this._reset();\n    this.initialize.apply(this, arguments);\n    if (models) this.reset(models, _.extend({silent: true}, options));\n  };\n\n  // Define the Collection's inheritable methods.\n  _.extend(Collection.prototype, Events, {\n\n    // The default model for a collection is just a **Backbone.Model**.\n    // This should be overridden in most cases.\n    model: Model,\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // The JSON representation of a Collection is an array of the\n    // models' attributes.\n    toJSON: function(options) {\n      return this.map(function(model){ return model.toJSON(options); });\n    },\n\n    // Proxy `Backbone.sync` by default.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Add a model, or list of models to the set. Pass **silent** to avoid\n    // firing the `add` event for every new model.\n    add: function(models, options) {\n      var i, args, length, model, existing, needsSort;\n      var at = options && options.at;\n      var sort = ((options && options.sort) == null ? true : options.sort);\n      models = _.isArray(models) ? models.slice() : [models];\n\n      // Turn bare objects into model references, and prevent invalid models\n      // from being added.\n      for (i = models.length - 1; i >= 0; i--) {\n        if(!(model = this._prepareModel(models[i], options))) {\n          this.trigger(\"error\", this, models[i], options);\n          models.splice(i, 1);\n          continue;\n        }\n        models[i] = model;\n\n        existing = model.id != null && this._byId[model.id];\n        // If a duplicate is found, prevent it from being added and\n        // optionally merge it into the existing model.\n        if (existing || this._byCid[model.cid]) {\n          if (options && options.merge && existing) {\n            existing.set(model.attributes, options);\n            needsSort = sort;\n          }\n          models.splice(i, 1);\n          continue;\n        }\n\n        // Listen to added models' events, and index models for lookup by\n        // `id` and by `cid`.\n        model.on('all', this._onModelEvent, this);\n        this._byCid[model.cid] = model;\n        if (model.id != null) this._byId[model.id] = model;\n      }\n\n      // See if sorting is needed, update `length` and splice in new models.\n      if (models.length) needsSort = sort;\n      this.length += models.length;\n      args = [at != null ? at : this.models.length, 0];\n      push.apply(args, models);\n      splice.apply(this.models, args);\n\n      // Sort the collection if appropriate.\n      if (needsSort && this.comparator && at == null) this.sort({silent: true});\n\n      if (options && options.silent) return this;\n\n      // Trigger `add` events.\n      while (model = models.shift()) {\n        model.trigger('add', model, this, options);\n      }\n\n      return this;\n    },\n\n    // Remove a model, or a list of models from the set. Pass silent to avoid\n    // firing the `remove` event for every model removed.\n    remove: function(models, options) {\n      var i, l, index, model;\n      options || (options = {});\n      models = _.isArray(models) ? models.slice() : [models];\n      for (i = 0, l = models.length; i < l; i++) {\n        model = this.get(models[i]);\n        if (!model) continue;\n        delete this._byId[model.id];\n        delete this._byCid[model.cid];\n        index = this.indexOf(model);\n        this.models.splice(index, 1);\n        this.length--;\n        if (!options.silent) {\n          options.index = index;\n          model.trigger('remove', model, this, options);\n        }\n        this._removeReference(model);\n      }\n      return this;\n    },\n\n    // Add a model to the end of the collection.\n    push: function(model, options) {\n      model = this._prepareModel(model, options);\n      this.add(model, _.extend({at: this.length}, options));\n      return model;\n    },\n\n    // Remove a model from the end of the collection.\n    pop: function(options) {\n      var model = this.at(this.length - 1);\n      this.remove(model, options);\n      return model;\n    },\n\n    // Add a model to the beginning of the collection.\n    unshift: function(model, options) {\n      model = this._prepareModel(model, options);\n      this.add(model, _.extend({at: 0}, options));\n      return model;\n    },\n\n    // Remove a model from the beginning of the collection.\n    shift: function(options) {\n      var model = this.at(0);\n      this.remove(model, options);\n      return model;\n    },\n\n    // Slice out a sub-array of models from the collection.\n    slice: function(begin, end) {\n      return this.models.slice(begin, end);\n    },\n\n    // Get a model from the set by id.\n    get: function(obj) {\n      if (obj == null) return void 0;\n      return this._byId[obj.id != null ? obj.id : obj] || this._byCid[obj.cid || obj];\n    },\n\n    // Get the model at the given index.\n    at: function(index) {\n      return this.models[index];\n    },\n\n    // Return models with matching attributes. Useful for simple cases of `filter`.\n    where: function(attrs) {\n      if (_.isEmpty(attrs)) return [];\n      return this.filter(function(model) {\n        for (var key in attrs) {\n          if (attrs[key] !== model.get(key)) return false;\n        }\n        return true;\n      });\n    },\n\n    // Force the collection to re-sort itself. You don't need to call this under\n    // normal circumstances, as the set will maintain sort order as each item\n    // is added.\n    sort: function(options) {\n      if (!this.comparator) {\n        throw new Error('Cannot sort a set without a comparator');\n      }\n\n      if (_.isString(this.comparator) || this.comparator.length === 1) {\n        this.models = this.sortBy(this.comparator, this);\n      } else {\n        this.models.sort(_.bind(this.comparator, this));\n      }\n\n      if (!options || !options.silent) this.trigger('sort', this, options);\n      return this;\n    },\n\n    // Pluck an attribute from each model in the collection.\n    pluck: function(attr) {\n      return _.invoke(this.models, 'get', attr);\n    },\n\n    // Smartly update a collection with a change set of models, adding,\n    // removing, and merging as necessary.\n    update: function(models, options) {\n      var model, i, l, existing;\n      var add = [], remove = [], modelMap = {};\n      var idAttr = this.model.prototype.idAttribute;\n      options = _.extend({add: true, merge: true, remove: true}, options);\n      if (options.parse) models = this.parse(models);\n\n      // Allow a single model (or no argument) to be passed.\n      if (!_.isArray(models)) models = models ? [models] : [];\n\n      // Proxy to `add` for this case, no need to iterate...\n      if (options.add && !options.remove) return this.add(models, options);\n\n      // Determine which models to add and merge, and which to remove.\n      for (i = 0, l = models.length; i < l; i++) {\n        model = models[i];\n        existing = this.get(model.id || model.cid || model[idAttr]);\n        if (options.remove && existing) modelMap[existing.cid] = true;\n        if ((options.add && !existing) || (options.merge && existing)) {\n          add.push(model);\n        }\n      }\n      if (options.remove) {\n        for (i = 0, l = this.models.length; i < l; i++) {\n          model = this.models[i];\n          if (!modelMap[model.cid]) remove.push(model);\n        }\n      }\n\n      // Remove models (if applicable) before we add and merge the rest.\n      if (remove.length) this.remove(remove, options);\n      if (add.length) this.add(add, options);\n      return this;\n    },\n\n    // When you have more items than you want to add or remove individually,\n    // you can reset the entire set with a new list of models, without firing\n    // any `add` or `remove` events. Fires `reset` when finished.\n    reset: function(models, options) {\n      options || (options = {});\n      if (options.parse) models = this.parse(models);\n      for (var i = 0, l = this.models.length; i < l; i++) {\n        this._removeReference(this.models[i]);\n      }\n      options.previousModels = this.models;\n      this._reset();\n      if (models) this.add(models, _.extend({silent: true}, options));\n      if (!options.silent) this.trigger('reset', this, options);\n      return this;\n    },\n\n    // Fetch the default set of models for this collection, resetting the\n    // collection when they arrive. If `add: true` is passed, appends the\n    // models to the collection instead of resetting.\n    fetch: function(options) {\n      options = options ? _.clone(options) : {};\n      if (options.parse === void 0) options.parse = true;\n      var collection = this;\n      var success = options.success;\n      options.success = function(resp, status, xhr) {\n        var method = options.update ? 'update' : 'reset';\n        collection[method](resp, options);\n        if (success) success(collection, resp, options);\n      };\n      return this.sync('read', this, options);\n    },\n\n    // Create a new instance of a model in this collection. Add the model to the\n    // collection immediately, unless `wait: true` is passed, in which case we\n    // wait for the server to agree.\n    create: function(model, options) {\n      var collection = this;\n      options = options ? _.clone(options) : {};\n      model = this._prepareModel(model, options);\n      if (!model) return false;\n      if (!options.wait) collection.add(model, options);\n      var success = options.success;\n      options.success = function(model, resp, options) {\n        if (options.wait) collection.add(model, options);\n        if (success) success(model, resp, options);\n      };\n      model.save(null, options);\n      return model;\n    },\n\n    // **parse** converts a response into a list of models to be added to the\n    // collection. The default implementation is just to pass it through.\n    parse: function(resp) {\n      return resp;\n    },\n\n    // Create a new collection with an identical list of models as this one.\n    clone: function() {\n      return new this.constructor(this.models);\n    },\n\n    // Proxy to _'s chain. Can't be proxied the same way the rest of the\n    // underscore methods are proxied because it relies on the underscore\n    // constructor.\n    chain: function() {\n      return _(this.models).chain();\n    },\n\n    // Reset all internal state. Called when the collection is reset.\n    _reset: function() {\n      this.length = 0;\n      this.models = [];\n      this._byId  = {};\n      this._byCid = {};\n    },\n\n    // Prepare a model or hash of attributes to be added to this collection.\n    _prepareModel: function(attrs, options) {\n      if (attrs instanceof Model) {\n        if (!attrs.collection) attrs.collection = this;\n        return attrs;\n      }\n      options || (options = {});\n      options.collection = this;\n      var model = new this.model(attrs, options);\n      if (!model._validate(attrs, options)) return false;\n      return model;\n    },\n\n    // Internal method to remove a model's ties to a collection.\n    _removeReference: function(model) {\n      if (this === model.collection) delete model.collection;\n      model.off('all', this._onModelEvent, this);\n    },\n\n    // Internal method called every time a model in the set fires an event.\n    // Sets need to update their indexes when models change ids. All other\n    // events simply proxy through. \"add\" and \"remove\" events that originate\n    // in other collections are ignored.\n    _onModelEvent: function(event, model, collection, options) {\n      if ((event === 'add' || event === 'remove') && collection !== this) return;\n      if (event === 'destroy') this.remove(model, options);\n      if (model && event === 'change:' + model.idAttribute) {\n        delete this._byId[model.previous(model.idAttribute)];\n        if (model.id != null) this._byId[model.id] = model;\n      }\n      this.trigger.apply(this, arguments);\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Collection.\n  var methods = ['forEach', 'each', 'map', 'collect', 'reduce', 'foldl',\n    'inject', 'reduceRight', 'foldr', 'find', 'detect', 'filter', 'select',\n    'reject', 'every', 'all', 'some', 'any', 'include', 'contains', 'invoke',\n    'max', 'min', 'sortedIndex', 'toArray', 'size', 'first', 'head', 'take',\n    'initial', 'rest', 'tail', 'last', 'without', 'indexOf', 'shuffle',\n    'lastIndexOf', 'isEmpty'];\n\n  // Mix in each Underscore method as a proxy to `Collection#models`.\n  _.each(methods, function(method) {\n    Collection.prototype[method] = function() {\n      var args = slice.call(arguments);\n      args.unshift(this.models);\n      return _[method].apply(_, args);\n    };\n  });\n\n  // Underscore methods that take a property name as an argument.\n  var attributeMethods = ['groupBy', 'countBy', 'sortBy'];\n\n  // Use attributes instead of properties.\n  _.each(attributeMethods, function(method) {\n    Collection.prototype[method] = function(value, context) {\n      var iterator = _.isFunction(value) ? value : function(model) {\n        return model.get(value);\n      };\n      return _[method](this.models, iterator, context);\n    };\n  });\n\n  // Backbone.Router\n  // ---------------\n\n  // Routers map faux-URLs to actions, and fire events when routes are\n  // matched. Creating a new one sets its `routes` hash, if not set statically.\n  var Router = Backbone.Router = function(options) {\n    options || (options = {});\n    if (options.routes) this.routes = options.routes;\n    this._bindRoutes();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regular expressions for matching named param parts and splatted\n  // parts of route strings.\n  var optionalParam = /\\((.*?)\\)/g;\n  var namedParam    = /:\\w+/g;\n  var splatParam    = /\\*\\w+/g;\n  var escapeRegExp  = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\n\n  // Set up all inheritable **Backbone.Router** properties and methods.\n  _.extend(Router.prototype, Events, {\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Manually bind a single named route to a callback. For example:\n    //\n    //     this.route('search/:query/p:num', 'search', function(query, num) {\n    //       ...\n    //     });\n    //\n    route: function(route, name, callback) {\n      if (!_.isRegExp(route)) route = this._routeToRegExp(route);\n      if (!callback) callback = this[name];\n      Backbone.history.route(route, _.bind(function(fragment) {\n        var args = this._extractParameters(route, fragment);\n        callback && callback.apply(this, args);\n        this.trigger.apply(this, ['route:' + name].concat(args));\n        Backbone.history.trigger('route', this, name, args);\n      }, this));\n      return this;\n    },\n\n    // Simple proxy to `Backbone.history` to save a fragment into the history.\n    navigate: function(fragment, options) {\n      Backbone.history.navigate(fragment, options);\n      return this;\n    },\n\n    // Bind all defined routes to `Backbone.history`. We have to reverse the\n    // order of the routes here to support behavior where the most general\n    // routes can be defined at the bottom of the route map.\n    _bindRoutes: function() {\n      if (!this.routes) return;\n      var route, routes = _.keys(this.routes);\n      while ((route = routes.pop()) != null) {\n        this.route(route, this.routes[route]);\n      }\n    },\n\n    // Convert a route string into a regular expression, suitable for matching\n    // against the current location hash.\n    _routeToRegExp: function(route) {\n      route = route.replace(escapeRegExp, '\\\\$&')\n                   .replace(optionalParam, '(?:$1)?')\n                   .replace(namedParam, '([^\\/]+)')\n                   .replace(splatParam, '(.*?)');\n      return new RegExp('^' + route + '$');\n    },\n\n    // Given a route, and a URL fragment that it matches, return the array of\n    // extracted parameters.\n    _extractParameters: function(route, fragment) {\n      return route.exec(fragment).slice(1);\n    }\n\n  });\n\n  // Backbone.History\n  // ----------------\n\n  // Handles cross-browser history management, based on URL fragments. If the\n  // browser does not support `onhashchange`, falls back to polling.\n  var History = Backbone.History = function() {\n    this.handlers = [];\n    _.bindAll(this, 'checkUrl');\n\n    // Ensure that `History` can be used outside of the browser.\n    if (typeof window !== 'undefined') {\n      this.location = window.location;\n      this.history = window.history;\n    }\n  };\n\n  // Cached regex for stripping a leading hash/slash and trailing space.\n  var routeStripper = /^[#\\/]|\\s+$/g;\n\n  // Cached regex for stripping leading and trailing slashes.\n  var rootStripper = /^\\/+|\\/+$/g;\n\n  // Cached regex for detecting MSIE.\n  var isExplorer = /msie [\\w.]+/;\n\n  // Cached regex for removing a trailing slash.\n  var trailingSlash = /\\/$/;\n\n  // Has the history handling already been started?\n  History.started = false;\n\n  // Set up all inheritable **Backbone.History** properties and methods.\n  _.extend(History.prototype, Events, {\n\n    // The default interval to poll for hash changes, if necessary, is\n    // twenty times a second.\n    interval: 50,\n\n    // Gets the true hash value. Cannot use location.hash directly due to bug\n    // in Firefox where location.hash will always be decoded.\n    getHash: function(window) {\n      var match = (window || this).location.href.match(/#(.*)$/);\n      return match ? match[1] : '';\n    },\n\n    // Get the cross-browser normalized URL fragment, either from the URL,\n    // the hash, or the override.\n    getFragment: function(fragment, forcePushState) {\n      if (fragment == null) {\n        if (this._hasPushState || !this._wantsHashChange || forcePushState) {\n          fragment = this.location.pathname;\n          var root = this.root.replace(trailingSlash, '');\n          if (!fragment.indexOf(root)) fragment = fragment.substr(root.length);\n        } else {\n          fragment = this.getHash();\n        }\n      }\n      return fragment.replace(routeStripper, '');\n    },\n\n    // Start the hash change handling, returning `true` if the current URL matches\n    // an existing route, and `false` otherwise.\n    start: function(options) {\n      if (History.started) throw new Error(\"Backbone.history has already been started\");\n      History.started = true;\n\n      // Figure out the initial configuration. Do we need an iframe?\n      // Is pushState desired ... is it available?\n      this.options          = _.extend({}, {root: '/'}, this.options, options);\n      this.root             = this.options.root;\n      this._wantsHashChange = this.options.hashChange !== false;\n      this._wantsPushState  = !!this.options.pushState;\n      this._hasPushState    = !!(this.options.pushState && this.history && this.history.pushState);\n      var fragment          = this.getFragment();\n      var docMode           = document.documentMode;\n      var oldIE             = (isExplorer.exec(navigator.userAgent.toLowerCase()) && (!docMode || docMode <= 7));\n\n      // Normalize root to always include a leading and trailing slash.\n      this.root = ('/' + this.root + '/').replace(rootStripper, '/');\n\n      if (oldIE && this._wantsHashChange) {\n        this.iframe = Backbone.$('<iframe src=\"javascript:0\" tabindex=\"-1\" />').hide().appendTo('body')[0].contentWindow;\n        this.navigate(fragment);\n      }\n\n      // Depending on whether we're using pushState or hashes, and whether\n      // 'onhashchange' is supported, determine how we check the URL state.\n      if (this._hasPushState) {\n        Backbone.$(window).bind('popstate', this.checkUrl);\n      } else if (this._wantsHashChange && ('onhashchange' in window) && !oldIE) {\n        Backbone.$(window).bind('hashchange', this.checkUrl);\n      } else if (this._wantsHashChange) {\n        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\n      }\n\n      // Determine if we need to change the base url, for a pushState link\n      // opened by a non-pushState browser.\n      this.fragment = fragment;\n      var loc = this.location;\n      var atRoot = loc.pathname.replace(/[^\\/]$/, '$&/') === this.root;\n\n      // If we've started off with a route from a `pushState`-enabled browser,\n      // but we're currently in a browser that doesn't support it...\n      if (this._wantsHashChange && this._wantsPushState && !this._hasPushState && !atRoot) {\n        this.fragment = this.getFragment(null, true);\n        this.location.replace(this.root + this.location.search + '#' + this.fragment);\n        // Return immediately as browser will do redirect to new url\n        return true;\n\n      // Or if we've started out with a hash-based route, but we're currently\n      // in a browser where it could be `pushState`-based instead...\n      } else if (this._wantsPushState && this._hasPushState && atRoot && loc.hash) {\n        this.fragment = this.getHash().replace(routeStripper, '');\n        this.history.replaceState({}, document.title, this.root + this.fragment + loc.search);\n      }\n\n      if (!this.options.silent) return this.loadUrl();\n    },\n\n    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\n    // but possibly useful for unit testing Routers.\n    stop: function() {\n      Backbone.$(window).unbind('popstate', this.checkUrl).unbind('hashchange', this.checkUrl);\n      clearInterval(this._checkUrlInterval);\n      History.started = false;\n    },\n\n    // Add a route to be tested when the fragment changes. Routes added later\n    // may override previous routes.\n    route: function(route, callback) {\n      this.handlers.unshift({route: route, callback: callback});\n    },\n\n    // Checks the current URL to see if it has changed, and if it has,\n    // calls `loadUrl`, normalizing across the hidden iframe.\n    checkUrl: function(e) {\n      var current = this.getFragment();\n      if (current === this.fragment && this.iframe) {\n        current = this.getFragment(this.getHash(this.iframe));\n      }\n      if (current === this.fragment) return false;\n      if (this.iframe) this.navigate(current);\n      this.loadUrl() || this.loadUrl(this.getHash());\n    },\n\n    // Attempt to load the current URL fragment. If a route succeeds with a\n    // match, returns `true`. If no defined routes matches the fragment,\n    // returns `false`.\n    loadUrl: function(fragmentOverride) {\n      var fragment = this.fragment = this.getFragment(fragmentOverride);\n      var matched = _.any(this.handlers, function(handler) {\n        if (handler.route.test(fragment)) {\n          handler.callback(fragment);\n          return true;\n        }\n      });\n      return matched;\n    },\n\n    // Save a fragment into the hash history, or replace the URL state if the\n    // 'replace' option is passed. You are responsible for properly URL-encoding\n    // the fragment in advance.\n    //\n    // The options object can contain `trigger: true` if you wish to have the\n    // route callback be fired (not usually desirable), or `replace: true`, if\n    // you wish to modify the current URL without adding an entry to the history.\n    navigate: function(fragment, options) {\n      if (!History.started) return false;\n      if (!options || options === true) options = {trigger: options};\n      fragment = this.getFragment(fragment || '');\n      if (this.fragment === fragment) return;\n      this.fragment = fragment;\n      var url = this.root + fragment;\n\n      // If pushState is available, we use it to set the fragment as a real URL.\n      if (this._hasPushState) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n\n      // If hash changes haven't been explicitly disabled, update the hash\n      // fragment to store history.\n      } else if (this._wantsHashChange) {\n        this._updateHash(this.location, fragment, options.replace);\n        if (this.iframe && (fragment !== this.getFragment(this.getHash(this.iframe)))) {\n          // Opening and closing the iframe tricks IE7 and earlier to push a\n          // history entry on hash-tag change.  When replace is true, we don't\n          // want this.\n          if(!options.replace) this.iframe.document.open().close();\n          this._updateHash(this.iframe.location, fragment, options.replace);\n        }\n\n      // If you've told us that you explicitly don't want fallback hashchange-\n      // based history, then `navigate` becomes a page refresh.\n      } else {\n        return this.location.assign(url);\n      }\n      if (options.trigger) this.loadUrl(fragment);\n    },\n\n    // Update the hash location, either replacing the current entry, or adding\n    // a new one to the browser history.\n    _updateHash: function(location, fragment, replace) {\n      if (replace) {\n        var href = location.href.replace(/(javascript:|#).*$/, '');\n        location.replace(href + '#' + fragment);\n      } else {\n        // Some browsers require that `hash` contains a leading #.\n        location.hash = '#' + fragment;\n      }\n    }\n\n  });\n\n  // Create the default Backbone.history.\n  Backbone.history = new History;\n\n  // Backbone.View\n  // -------------\n\n  // Creating a Backbone.View creates its initial element outside of the DOM,\n  // if an existing element is not provided...\n  var View = Backbone.View = function(options) {\n    this.cid = _.uniqueId('view');\n    this._configure(options || {});\n    this._ensureElement();\n    this.initialize.apply(this, arguments);\n    this.delegateEvents();\n  };\n\n  // Cached regex to split keys for `delegate`.\n  var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n  // List of view options to be merged as properties.\n  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\n\n  // Set up all inheritable **Backbone.View** properties and methods.\n  _.extend(View.prototype, Events, {\n\n    // The default `tagName` of a View's element is `\"div\"`.\n    tagName: 'div',\n\n    // jQuery delegate for element lookup, scoped to DOM elements within the\n    // current view. This should be prefered to global lookups where possible.\n    $: function(selector) {\n      return this.$el.find(selector);\n    },\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // **render** is the core function that your view should override, in order\n    // to populate its element (`this.el`), with the appropriate HTML. The\n    // convention is for **render** to always return `this`.\n    render: function() {\n      return this;\n    },\n\n    // Remove this view by taking the element out of the DOM, and removing any\n    // applicable Backbone.Events listeners.\n    remove: function() {\n      this.$el.remove();\n      this.stopListening();\n      return this;\n    },\n\n    // For small amounts of DOM Elements, where a full-blown template isn't\n    // needed, use **make** to manufacture elements, one at a time.\n    //\n    //     var el = this.make('li', {'class': 'row'}, this.model.escape('title'));\n    //\n    make: function(tagName, attributes, content) {\n      var el = document.createElement(tagName);\n      if (attributes) Backbone.$(el).attr(attributes);\n      if (content != null) Backbone.$(el).html(content);\n      return el;\n    },\n\n    // Change the view's element (`this.el` property), including event\n    // re-delegation.\n    setElement: function(element, delegate) {\n      if (this.$el) this.undelegateEvents();\n      this.$el = element instanceof Backbone.$ ? element : Backbone.$(element);\n      this.el = this.$el[0];\n      if (delegate !== false) this.delegateEvents();\n      return this;\n    },\n\n    // Set callbacks, where `this.events` is a hash of\n    //\n    // *{\"event selector\": \"callback\"}*\n    //\n    //     {\n    //       'mousedown .title':  'edit',\n    //       'click .button':     'save'\n    //       'click .open':       function(e) { ... }\n    //     }\n    //\n    // pairs. Callbacks will be bound to the view, with `this` set properly.\n    // Uses event delegation for efficiency.\n    // Omitting the selector binds the event to `this.el`.\n    // This only works for delegate-able events: not `focus`, `blur`, and\n    // not `change`, `submit`, and `reset` in Internet Explorer.\n    delegateEvents: function(events) {\n      if (!(events || (events = _.result(this, 'events')))) return;\n      this.undelegateEvents();\n      for (var key in events) {\n        var method = events[key];\n        if (!_.isFunction(method)) method = this[events[key]];\n        if (!method) throw new Error('Method \"' + events[key] + '\" does not exist');\n        var match = key.match(delegateEventSplitter);\n        var eventName = match[1], selector = match[2];\n        method = _.bind(method, this);\n        eventName += '.delegateEvents' + this.cid;\n        if (selector === '') {\n          this.$el.bind(eventName, method);\n        } else {\n          this.$el.delegate(selector, eventName, method);\n        }\n      }\n    },\n\n    // Clears all callbacks previously bound to the view with `delegateEvents`.\n    // You usually don't need to use this, but may wish to if you have multiple\n    // Backbone views attached to the same DOM element.\n    undelegateEvents: function() {\n      this.$el.unbind('.delegateEvents' + this.cid);\n    },\n\n    // Performs the initial configuration of a View with a set of options.\n    // Keys with special meaning *(model, collection, id, className)*, are\n    // attached directly to the view.\n    _configure: function(options) {\n      if (this.options) options = _.extend({}, _.result(this, 'options'), options);\n      _.extend(this, _.pick(options, viewOptions));\n      this.options = options;\n    },\n\n    // Ensure that the View has a DOM element to render into.\n    // If `this.el` is a string, pass it through `$()`, take the first\n    // matching element, and re-assign it to `el`. Otherwise, create\n    // an element from the `id`, `className` and `tagName` properties.\n    _ensureElement: function() {\n      if (!this.el) {\n        var attrs = _.extend({}, _.result(this, 'attributes'));\n        if (this.id) attrs.id = _.result(this, 'id');\n        if (this.className) attrs['class'] = _.result(this, 'className');\n        this.setElement(this.make(_.result(this, 'tagName'), attrs), false);\n      } else {\n        this.setElement(_.result(this, 'el'), false);\n      }\n    }\n\n  });\n\n  // Backbone.sync\n  // -------------\n\n  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.\n  var methodMap = {\n    'create': 'POST',\n    'update': 'PUT',\n    'patch':  'PATCH',\n    'delete': 'DELETE',\n    'read':   'GET'\n  };\n\n  // Override this function to change the manner in which Backbone persists\n  // models to the server. You will be passed the type of request, and the\n  // model in question. By default, makes a RESTful Ajax request\n  // to the model's `url()`. Some possible customizations could be:\n  //\n  // * Use `setTimeout` to batch rapid-fire updates into a single request.\n  // * Send up the models as XML instead of JSON.\n  // * Persist models via WebSockets instead of Ajax.\n  //\n  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\n  // as `POST`, with a `_method` parameter containing the true HTTP method,\n  // as well as all requests with the body as `application/x-www-form-urlencoded`\n  // instead of `application/json` with the model in a param named `model`.\n  // Useful when interfacing with server-side languages like **PHP** that make\n  // it difficult to read the body of `PUT` requests.\n  Backbone.sync = function(method, model, options) {\n    var type = methodMap[method];\n\n    // Default options, unless specified.\n    _.defaults(options || (options = {}), {\n      emulateHTTP: Backbone.emulateHTTP,\n      emulateJSON: Backbone.emulateJSON\n    });\n\n    // Default JSON-request options.\n    var params = {type: type, dataType: 'json'};\n\n    // Ensure that we have a URL.\n    if (!options.url) {\n      params.url = _.result(model, 'url') || urlError();\n    }\n\n    // Ensure that we have the appropriate request data.\n    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\n      params.contentType = 'application/json';\n      params.data = JSON.stringify(options.attrs || model.toJSON(options));\n    }\n\n    // For older servers, emulate JSON by encoding the request into an HTML-form.\n    if (options.emulateJSON) {\n      params.contentType = 'application/x-www-form-urlencoded';\n      params.data = params.data ? {model: params.data} : {};\n    }\n\n    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\n    // And an `X-HTTP-Method-Override` header.\n    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\n      params.type = 'POST';\n      if (options.emulateJSON) params.data._method = type;\n      var beforeSend = options.beforeSend;\n      options.beforeSend = function(xhr) {\n        xhr.setRequestHeader('X-HTTP-Method-Override', type);\n        if (beforeSend) return beforeSend.apply(this, arguments);\n      };\n    }\n\n    // Don't process data on a non-GET request.\n    if (params.type !== 'GET' && !options.emulateJSON) {\n      params.processData = false;\n    }\n\n    var success = options.success;\n    options.success = function(resp, status, xhr) {\n      if (success) success(resp, status, xhr);\n      model.trigger('sync', model, resp, options);\n    };\n\n    var error = options.error;\n    options.error = function(xhr, status, thrown) {\n      if (error) error(model, xhr, options);\n      model.trigger('error', model, xhr, options);\n    };\n\n    // Make the request, allowing the user to override any Ajax options.\n    var xhr = Backbone.ajax(_.extend(params, options));\n    model.trigger('request', model, xhr, options);\n    return xhr;\n  };\n\n  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.\n  Backbone.ajax = function() {\n    return Backbone.$.ajax.apply(Backbone.$, arguments);\n  };\n\n  // Helpers\n  // -------\n\n  // Helper function to correctly set up the prototype chain, for subclasses.\n  // Similar to `goog.inherits`, but uses a hash of prototype properties and\n  // class properties to be extended.\n  var extend = function(protoProps, staticProps) {\n    var parent = this;\n    var child;\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent's constructor.\n    if (protoProps && _.has(protoProps, 'constructor')) {\n      child = protoProps.constructor;\n    } else {\n      child = function(){ parent.apply(this, arguments); };\n    }\n\n    // Add static properties to the constructor function, if supplied.\n    _.extend(child, parent, staticProps);\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent`'s constructor function.\n    var Surrogate = function(){ this.constructor = child; };\n    Surrogate.prototype = parent.prototype;\n    child.prototype = new Surrogate;\n\n    // Add prototype properties (instance properties) to the subclass,\n    // if supplied.\n    if (protoProps) _.extend(child.prototype, protoProps);\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = parent.prototype;\n\n    return child;\n  };\n\n  // Set up inheritance for the model, collection, router, view and history.\n  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;\n\n  // Throw an error when a URL is needed, and none is supplied.\n  var urlError = function() {\n    throw new Error('A \"url\" property or function must be specified');\n  };\n\n}).call(this);\n","/**\n * |-------------------|\n * | Backbone-Mediator |\n * |-------------------|\n *  Backbone-Mediator is freely distributable under the MIT license.\n *\n *  <a href=\"https://github.com/chalbert/Backbone-Mediator\">More details & documentation</a>\n *\n * @author Nicolas Gilbert\n *\n * @requires _\n * @requires Backbone\n */\n(function(factory){\n  'use strict';\n\n  if (typeof define === 'function' && define.amd) {\n    define(['underscore', 'backbone'], factory);\n  } else {\n    factory(_, Backbone);\n  }\n\n})(function (_, Backbone){\n  'use strict';\n\n  /**\n   * @static\n   */\n  var channels = {},\n      Subscriber,\n      /** @borrows Backbone.View#delegateEvents */\n      delegateEvents = Backbone.View.prototype.delegateEvents,\n      /** @borrows Backbone.View#delegateEvents */\n      undelegateEvents = Backbone.View.prototype.undelegateEvents;\n\n  /**\n   * @class\n   */\n  Backbone.Mediator = {\n\n    /**\n     * Subscribe to a channel\n     *\n     * @param channel\n     */\n    subscribe: function(channel, subscription, context, once) {\n      if (!channels[channel]) channels[channel] = [];\n      channels[channel].push({fn: subscription, context: context || this, once: once});\n    },\n\n    /**\n     * Trigger all callbacks for a channel\n     *\n     * @param channel\n     * @params N Extra parametter to pass to handler\n     */\n    publish: function(channel) {\n      if (!channels[channel]) return;\n\n      var args = [].slice.call(arguments, 1),\n          subscription;\n\n      for (var i = 0; i < channels[channel].length; i++) {\n        subscription = channels[channel][i];\n        subscription.fn.apply(subscription.context, args);\n        if (subscription.once) {\n          Backbone.Mediator.unsubscribe(channel, subscription.fn, subscription.context);\n          i--;\n        }\n      }\n    },\n\n    /**\n     * Cancel subscription\n     *\n     * @param channel\n     * @param fn\n     * @param context\n     */\n\n    unsubscribe: function(channel, fn, context){\n      if (!channels[channel]) return;\n\n      var subscription;\n      for (var i = 0; i < channels[channel].length; i++) {\n        subscription = channels[channel][i];\n        if (subscription.fn === fn && subscription.context === context) {\n          channels[channel].splice(i, 1);\n          i--;\n        }\n      }\n    },\n\n    /**\n     * Subscribing to one event only\n     *\n     * @param channel\n     * @param subscription\n     * @param context\n     */\n    subscribeOnce: function (channel, subscription, context) {\n      Backbone.Mediator.subscribe(channel, subscription, context, true);\n    }\n\n  };\n\n  /**\n   * Allow to define convention-based subscriptions\n   * as an 'subscriptions' hash on a view. Subscriptions\n   * can then be easily setup and cleaned.\n   *\n   * @class\n   */\n\n\n  Subscriber = {\n\n    /**\n     * Extend delegateEvents() to set subscriptions\n     */\n    delegateEvents: function(){\n      delegateEvents.apply(this, arguments);\n      this.setSubscriptions();\n    },\n\n    /**\n     * Extend undelegateEvents() to unset subscriptions\n     */\n    undelegateEvents: function(){\n      undelegateEvents.apply(this, arguments);\n      this.unsetSubscriptions();\n    },\n\n    /** @property {Object} List of subscriptions, to be defined */\n    subscriptions: {},\n\n    /**\n     * Subscribe to each subscription\n     * @param {Object} [subscriptions] An optional hash of subscription to add\n     */\n\n    setSubscriptions: function(subscriptions){\n      if (subscriptions) _.extend(this.subscriptions || {}, subscriptions);\n      subscriptions = subscriptions || this.subscriptions;\n      if (!subscriptions || _.isEmpty(subscriptions)) return;\n      // Just to be sure we don't set duplicate\n      this.unsetSubscriptions(subscriptions);\n\n      _.each(subscriptions, function(subscription, channel){\n        var once;\n        if (subscription.$once) {\n          subscription = subscription.$once;\n          once = true;\n        }\n        if (_.isString(subscription)) {\n          subscription = this[subscription];\n        }\n        Backbone.Mediator.subscribe(channel, subscription, this, once);\n      }, this);\n    },\n\n    /**\n     * Unsubscribe to each subscription\n     * @param {Object} [subscriptions] An optional hash of subscription to remove\n     */\n    unsetSubscriptions: function(subscriptions){\n      subscriptions = subscriptions || this.subscriptions;\n      if (!subscriptions || _.isEmpty(subscriptions)) return;\n      _.each(subscriptions, function(subscription, channel){\n        if (_.isString(subscription)) {\n          subscription = this[subscription];\n        }\n        Backbone.Mediator.unsubscribe(channel, subscription.$once || subscription, this);\n      }, this);\n    }\n  };\n\n  /**\n   * @lends Backbone.View.prototype\n   */\n  _.extend(Backbone.View.prototype, Subscriber);\n\n  /**\n   * @lends Backbone.Mediator\n   */\n  _.extend(Backbone.Mediator, {\n    /**\n     * Shortcut for publish\n     * @function\n     */\n    pub: Backbone.Mediator.publish,\n    /**\n     * Shortcut for subscribe\n     * @function\n     */\n    sub: Backbone.Mediator.subscribe\n  });\n\n  return Backbone;\n\n});","/*\nCopyright (c) 2013 Sencha Inc. - Author: Nicolas Garcia Belmonte (http://philogb.github.com/)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n */\n \n(function () { \n\n/*\n  File: Core.js\n\n */\n\n/*\n Object: $jit\n\n Defines the namespace for all library Classes and Objects.\n This variable is the *only* global variable defined in the Toolkit.\n There are also other interesting properties attached to this variable described below.\n */\nthis.$jit = function(w) {\n  w = w || window;\n  for(var k in $jit) {\n    if($jit[k].$extend) {\n      w[k] = $jit[k];\n    }\n  }\n};\n\n$jit.version = '2.0.1';\n/*\n  Object: $jit.id\n\n  Works just like *document.getElementById*\n\n  Example:\n  (start code js)\n  var element = $jit.id('elementId');\n  (end code)\n\n*/\n\n/*\n Object: $jit.util\n\n Contains utility functions.\n\n Some of the utility functions and the Class system were based in the MooTools Framework\n <http://mootools.net>. Copyright (c) 2006-2010 Valerio Proietti, <http://mad4milk.net/>.\n MIT license <http://mootools.net/license.txt>.\n\n These methods are generally also implemented in DOM manipulation frameworks like JQuery, MooTools and Prototype.\n I'd suggest you to use the functions from those libraries instead of using these, since their functions\n are widely used and tested in many different platforms/browsers. Use these functions only if you have to.\n\n */\nvar $ = function(d) {\n  return document.getElementById(d);\n};\n\n$.empty = function() {\n};\n\n/*\n  Method: extend\n\n  Augment an object by appending another object's properties.\n\n  Parameters:\n\n  original - (object) The object to be extended.\n  extended - (object) An object which properties are going to be appended to the original object.\n\n  Example:\n  (start code js)\n  $jit.util.extend({ 'a': 1, 'b': 2 }, { 'b': 3, 'c': 4 }); //{ 'a':1, 'b': 3, 'c': 4 }\n  (end code)\n*/\n$.extend = function(original, extended) {\n  for ( var key in (extended || {}))\n    original[key] = extended[key];\n  return original;\n};\n\n$.lambda = function(value) {\n  return (typeof value == 'function') ? value : function() {\n    return value;\n  };\n};\n\n$.time = Date.now || function() {\n  return +new Date;\n};\n\n/*\n  Method: splat\n\n  Returns an array wrapping *obj* if *obj* is not an array. Returns *obj* otherwise.\n\n  Parameters:\n\n  obj - (mixed) The object to be wrapped in an array.\n\n  Example:\n  (start code js)\n  $jit.util.splat(3);   //[3]\n  $jit.util.splat([3]); //[3]\n  (end code)\n*/\n$.splat = function(obj) {\n  var type = $.type(obj);\n  return type ? ((type != 'array') ? [ obj ] : obj) : [];\n};\n\n$.type = function(elem) {\n  var type = $.type.s.call(elem).match(/^\\[object\\s(.*)\\]$/)[1].toLowerCase();\n  if(type != 'object') return type;\n  if(elem && elem.$$family) return elem.$$family;\n  if(elem && elem.nodeType == 9) return 'htmldocument';\n  return (elem && elem.nodeName && elem.nodeType == 1)? 'element' : type;\n};\n$.type.s = Object.prototype.toString;\n\n/*\n  Method: each\n\n  Iterates through an iterable applying *f*.\n\n  Parameters:\n\n  iterable - (array) The original array.\n  fn - (function) The function to apply to the array elements.\n\n  Example:\n  (start code js)\n  $jit.util.each([3, 4, 5], function(n) { alert('number ' + n); });\n  (end code)\n*/\n$.each = function(iterable, fn) {\n  var type = $.type(iterable);\n  if (type == 'object') {\n    for ( var key in iterable)\n      fn(iterable[key], key);\n  } else {\n    for ( var i = 0, l = iterable.length; i < l; i++)\n      fn(iterable[i], i);\n  }\n};\n\n$.indexOf = function(array, item) {\n  if(array.indexOf) return array.indexOf(item);\n  for(var i=0,l=array.length; i<l; i++) {\n    if(array[i] === item) return i;\n  }\n  return -1;\n};\n\n/*\n  Method: map\n\n  Maps or collects an array by applying *f*.\n\n  Parameters:\n\n  array - (array) The original array.\n  f - (function) The function to apply to the array elements.\n\n  Example:\n  (start code js)\n  $jit.util.map([3, 4, 5], function(n) { return n*n; }); //[9, 16, 25]\n  (end code)\n*/\n$.map = function(array, f) {\n  var ans = [];\n  $.each(array, function(elem, i) {\n    ans.push(f(elem, i));\n  });\n  return ans;\n};\n\n/*\n  Method: reduce\n\n  Iteratively applies the binary function *f* storing the result in an accumulator.\n\n  Parameters:\n\n  array - (array) The original array.\n  f - (function) The function to apply to the array elements.\n  opt - (optional|mixed) The starting value for the acumulator.\n\n  Example:\n  (start code js)\n  $jit.util.reduce([3, 4, 5], function(x, y) { return x + y; }, 0); //12\n  (end code)\n*/\n$.reduce = function(array, f, opt) {\n  var l = array.length;\n  if(l==0) return opt;\n  var acum = arguments.length == 3? opt : array[--l];\n  while(l--) {\n    acum = f(acum, array[l]);\n  }\n  return acum;\n};\n\n/*\n  Method: merge\n\n  Merges n-objects and their sub-objects creating a new, fresh object.\n\n  Parameters:\n\n  An arbitrary number of objects.\n\n  Example:\n  (start code js)\n  $jit.util.merge({ 'a': 1, 'b': 2 }, { 'b': 3, 'c': 4 }); //{ 'a':1, 'b': 3, 'c': 4 }\n  (end code)\n*/\n$.merge = function() {\n  var mix = {};\n  for ( var i = 0, l = arguments.length; i < l; i++) {\n    var object = arguments[i];\n    if ($.type(object) != 'object')\n      continue;\n    for ( var key in object) {\n      var op = object[key], mp = mix[key];\n      mix[key] = (mp && $.type(op) == 'object' && $.type(mp) == 'object') ? $\n          .merge(mp, op) : $.unlink(op);\n    }\n  }\n  return mix;\n};\n\n$.unlink = function(object) {\n  var unlinked;\n  switch ($.type(object)) {\n  case 'object':\n    unlinked = {};\n    for ( var p in object)\n      unlinked[p] = $.unlink(object[p]);\n    break;\n  case 'array':\n    unlinked = [];\n    for ( var i = 0, l = object.length; i < l; i++)\n      unlinked[i] = $.unlink(object[i]);\n    break;\n  default:\n    return object;\n  }\n  return unlinked;\n};\n\n$.zip = function() {\n  if(arguments.length === 0) return [];\n  for(var j=0, ans=[], l=arguments.length, ml=arguments[0].length; j<ml; j++) {\n    for(var i=0, row=[]; i<l; i++) {\n      row.push(arguments[i][j]);\n    }\n    ans.push(row);\n  }\n  return ans;\n};\n\n/*\n  Method: rgbToHex\n\n  Converts an RGB array into a Hex string.\n\n  Parameters:\n\n  srcArray - (array) An array with R, G and B values\n\n  Example:\n  (start code js)\n  $jit.util.rgbToHex([255, 255, 255]); //'#ffffff'\n  (end code)\n*/\n$.rgbToHex = function(srcArray, array) {\n  if (srcArray.length < 3)\n    return null;\n  if (srcArray.length == 4 && srcArray[3] == 0 && !array)\n    return 'transparent';\n  var hex = [];\n  for ( var i = 0; i < 3; i++) {\n    var bit = (srcArray[i] - 0).toString(16);\n    hex.push(bit.length == 1 ? '0' + bit : bit);\n  }\n  return array ? hex : '#' + hex.join('');\n};\n\n/*\n  Method: hexToRgb\n\n  Converts an Hex color string into an RGB array.\n\n  Parameters:\n\n  hex - (string) A color hex string.\n\n  Example:\n  (start code js)\n  $jit.util.hexToRgb('#fff'); //[255, 255, 255]\n  (end code)\n*/\n$.hexToRgb = function(hex) {\n  if (hex.length != 7) {\n    hex = hex.match(/^#?(\\w{1,2})(\\w{1,2})(\\w{1,2})$/);\n    hex.shift();\n    if (hex.length != 3)\n      return null;\n    var rgb = [];\n    for ( var i = 0; i < 3; i++) {\n      var value = hex[i];\n      if (value.length == 1)\n        value += value;\n      rgb.push(parseInt(value, 16));\n    }\n    return rgb;\n  } else {\n    hex = parseInt(hex.slice(1), 16);\n    return [ hex >> 16, hex >> 8 & 0xff, hex & 0xff ];\n  }\n};\n\n$.destroy = function(elem) {\n  $.clean(elem);\n  if (elem.parentNode)\n    elem.parentNode.removeChild(elem);\n  if (elem.clearAttributes)\n    elem.clearAttributes();\n};\n\n$.clean = function(elem) {\n  for (var ch = elem.childNodes, i = 0, l = ch.length; i < l; i++) {\n    $.destroy(ch[i]);\n  }\n};\n\n/*\n  Method: addEvent\n\n  Cross-browser add event listener.\n\n  Parameters:\n\n  obj - (obj) The Element to attach the listener to.\n  type - (string) The listener type. For example 'click', or 'mousemove'.\n  fn - (function) The callback function to be used when the event is fired.\n\n  Example:\n  (start code js)\n  $jit.util.addEvent(elem, 'click', function(){ alert('hello'); });\n  (end code)\n*/\n$.addEvent = function(obj, type, fn) {\n  if (obj.addEventListener)\n    obj.addEventListener(type, fn, false);\n  else\n    obj.attachEvent('on' + type, fn);\n};\n\n$.addEvents = function(obj, typeObj) {\n  for(var type in typeObj) {\n    $.addEvent(obj, type, typeObj[type]);\n  }\n};\n\n$.hasClass = function(obj, klass) {\n  return (' ' + obj.className + ' ').indexOf(' ' + klass + ' ') > -1;\n};\n\n$.addClass = function(obj, klass) {\n  if (!$.hasClass(obj, klass))\n    obj.className = (obj.className + \" \" + klass);\n};\n\n$.removeClass = function(obj, klass) {\n  obj.className = obj.className.replace(new RegExp(\n      '(^|\\\\s)' + klass + '(?:\\\\s|$)'), '$1');\n};\n\n$.getPos = function(elem) {\n  var offset = getOffsets(elem);\n  var scroll = getScrolls(elem);\n  return {\n    x: offset.x - scroll.x,\n    y: offset.y - scroll.y\n  };\n\n  function getOffsets(elem) {\n    var position = {\n      x: 0,\n      y: 0\n    };\n    while (elem && !isBody(elem)) {\n      position.x += elem.offsetLeft;\n      position.y += elem.offsetTop;\n      elem = elem.offsetParent;\n    }\n    return position;\n  }\n\n  function getScrolls(elem) {\n    var position = {\n      x: 0,\n      y: 0\n    };\n    while (elem && !isBody(elem)) {\n      position.x += elem.scrollLeft;\n      position.y += elem.scrollTop;\n      elem = elem.parentNode;\n    }\n    return position;\n  }\n\n  function isBody(element) {\n    return (/^(?:body|html)$/i).test(element.tagName);\n  }\n};\n\n$.event = {\n  get: function(e, win) {\n    win = win || window;\n    return e || win.event;\n  },\n  getWheel: function(e) {\n    return e.wheelDelta? e.wheelDelta / 120 : -(e.detail || 0) / 3;\n  },\n  isRightClick: function(e) {\n    return (e.which == 3 || e.button == 2);\n  },\n  getPos: function(e, win) {\n    // get mouse position\n    win = win || window;\n    e = e || win.event;\n    var doc = win.document;\n    doc = doc.documentElement || doc.body;\n    //TODO(nico): make touch event handling better\n    if(e.touches && e.touches.length) {\n      e = e.touches[0];\n    }\n    var page = {\n      x: e.pageX || (e.clientX + doc.scrollLeft),\n      y: e.pageY || (e.clientY + doc.scrollTop)\n    };\n    return page;\n  },\n  stop: function(e) {\n    if (e.stopPropagation) e.stopPropagation();\n    e.cancelBubble = true;\n    if (e.preventDefault) e.preventDefault();\n    else e.returnValue = false;\n  }\n};\n\n$jit.util = $jit.id = $;\n\nvar Class = function(properties) {\n  properties = properties || {};\n  var klass = function() {\n    for ( var key in this) {\n      if (typeof this[key] != 'function')\n        this[key] = $.unlink(this[key]);\n    }\n    this.constructor = klass;\n    if (Class.prototyping)\n      return this;\n    var instance = this.initialize ? this.initialize.apply(this, arguments)\n        : this;\n    //typize\n    this.$$family = 'class';\n    return instance;\n  };\n\n  for ( var mutator in Class.Mutators) {\n    if (!properties[mutator])\n      continue;\n    properties = Class.Mutators[mutator](properties, properties[mutator]);\n    delete properties[mutator];\n  }\n\n  $.extend(klass, this);\n  klass.constructor = Class;\n  klass.prototype = properties;\n  return klass;\n};\n\nClass.Mutators = {\n\n  Implements: function(self, klasses) {\n    $.each($.splat(klasses), function(klass) {\n      Class.prototyping = klass;\n      var instance = (typeof klass == 'function') ? new klass : klass;\n      for ( var prop in instance) {\n        if (!(prop in self)) {\n          self[prop] = instance[prop];\n        }\n      }\n      delete Class.prototyping;\n    });\n    return self;\n  }\n\n};\n\n$.extend(Class, {\n\n  inherit: function(object, properties) {\n    for ( var key in properties) {\n      var override = properties[key];\n      var previous = object[key];\n      var type = $.type(override);\n      if (previous && type == 'function') {\n        if (override != previous) {\n          Class.override(object, key, override);\n        }\n      } else if (type == 'object') {\n        object[key] = $.merge(previous, override);\n      } else {\n        object[key] = override;\n      }\n    }\n    return object;\n  },\n\n  override: function(object, name, method) {\n    var parent = Class.prototyping;\n    if (parent && object[name] != parent[name])\n      parent = null;\n    var override = function() {\n      var previous = this.parent;\n      this.parent = parent ? parent[name] : object[name];\n      var value = method.apply(this, arguments);\n      this.parent = previous;\n      return value;\n    };\n    object[name] = override;\n  }\n\n});\n\nClass.prototype.implement = function() {\n  var proto = this.prototype;\n  $.each(Array.prototype.slice.call(arguments || []), function(properties) {\n    Class.inherit(proto, properties);\n  });\n  return this;\n};\n\n$jit.Class = Class;\n\n/*\n  Object: $jit.json\n\n  Provides JSON utility functions.\n\n  Most of these functions are JSON-tree traversal and manipulation functions.\n*/\n$jit.json = {\n  /*\n     Method: prune\n\n     Clears all tree nodes having depth greater than maxLevel.\n\n     Parameters:\n\n        tree - (object) A JSON tree object. For more information please see <Loader.loadJSON>.\n        maxLevel - (number) An integer specifying the maximum level allowed for this tree. All nodes having depth greater than max level will be deleted.\n\n  */\n  prune: function(tree, maxLevel) {\n    this.each(tree, function(elem, i) {\n      if (i == maxLevel && elem.children) {\n        delete elem.children;\n        elem.children = [];\n      }\n    });\n  },\n  /*\n     Method: getParent\n\n     Returns the parent node of the node having _id_ as id.\n\n     Parameters:\n\n        tree - (object) A JSON tree object. See also <Loader.loadJSON>.\n        id - (string) The _id_ of the child node whose parent will be returned.\n\n    Returns:\n\n        A tree JSON node if any, or false otherwise.\n\n  */\n  getParent: function(tree, id) {\n    if (tree.id == id)\n      return false;\n    var ch = tree.children;\n    if (ch && ch.length > 0) {\n      for ( var i = 0; i < ch.length; i++) {\n        if (ch[i].id == id)\n          return tree;\n        else {\n          var ans = this.getParent(ch[i], id);\n          if (ans)\n            return ans;\n        }\n      }\n    }\n    return false;\n  },\n  /*\n     Method: getSubtree\n\n     Returns the subtree that matches the given id.\n\n     Parameters:\n\n        tree - (object) A JSON tree object. See also <Loader.loadJSON>.\n        id - (string) A node *unique* identifier.\n\n     Returns:\n\n        A subtree having a root node matching the given id. Returns null if no subtree matching the id is found.\n\n  */\n  getSubtree: function(tree, id) {\n    if (tree.id == id)\n      return tree;\n    for ( var i = 0, ch = tree.children; ch && i < ch.length; i++) {\n      var t = this.getSubtree(ch[i], id);\n      if (t != null)\n        return t;\n    }\n    return null;\n  },\n  /*\n     Method: eachLevel\n\n      Iterates on tree nodes with relative depth less or equal than a specified level.\n\n     Parameters:\n\n        tree - (object) A JSON tree or subtree. See also <Loader.loadJSON>.\n        initLevel - (number) An integer specifying the initial relative level. Usually zero.\n        toLevel - (number) An integer specifying a top level. This method will iterate only through nodes with depth less than or equal this number.\n        action - (function) A function that receives a node and an integer specifying the actual level of the node.\n\n    Example:\n   (start code js)\n     $jit.json.eachLevel(tree, 0, 3, function(node, depth) {\n        alert(node.name + ' ' + depth);\n     });\n   (end code)\n  */\n  eachLevel: function(tree, initLevel, toLevel, action) {\n    if (initLevel <= toLevel) {\n      action(tree, initLevel);\n      if(!tree.children) return;\n      for ( var i = 0, ch = tree.children; i < ch.length; i++) {\n        this.eachLevel(ch[i], initLevel + 1, toLevel, action);\n      }\n    }\n  },\n  /*\n     Method: each\n\n      A JSON tree iterator.\n\n     Parameters:\n\n        tree - (object) A JSON tree or subtree. See also <Loader.loadJSON>.\n        action - (function) A function that receives a node.\n\n    Example:\n    (start code js)\n      $jit.json.each(tree, function(node) {\n        alert(node.name);\n      });\n    (end code)\n\n  */\n  each: function(tree, action) {\n    this.eachLevel(tree, 0, Number.MAX_VALUE, action);\n  }\n};\n\n\n/*\n     An object containing multiple type of transformations. \n*/\n\n$jit.Trans = {\n  $extend: true,\n  \n  linear: function(p){\n    return p;\n  }\n};\n\nvar Trans = $jit.Trans;\n\n(function(){\n\n  var makeTrans = function(transition, params){\n    params = $.splat(params);\n    return $.extend(transition, {\n      easeIn: function(pos){\n        return transition(pos, params);\n      },\n      easeOut: function(pos){\n        return 1 - transition(1 - pos, params);\n      },\n      easeInOut: function(pos){\n        return (pos <= 0.5)? transition(2 * pos, params) / 2 : (2 - transition(\n            2 * (1 - pos), params)) / 2;\n      }\n    });\n  };\n\n  var transitions = {\n\n    Pow: function(p, x){\n      return Math.pow(p, x[0] || 6);\n    },\n\n    Expo: function(p){\n      return Math.pow(2, 8 * (p - 1));\n    },\n\n    Circ: function(p){\n      return 1 - Math.sin(Math.acos(p));\n    },\n\n    Sine: function(p){\n      return 1 - Math.sin((1 - p) * Math.PI / 2);\n    },\n\n    Back: function(p, x){\n      x = x[0] || 1.618;\n      return Math.pow(p, 2) * ((x + 1) * p - x);\n    },\n\n    Bounce: function(p){\n      var value;\n      for ( var a = 0, b = 1; 1; a += b, b /= 2) {\n        if (p >= (7 - 4 * a) / 11) {\n          value = b * b - Math.pow((11 - 6 * a - 11 * p) / 4, 2);\n          break;\n        }\n      }\n      return value;\n    },\n\n    Elastic: function(p, x){\n      return Math.pow(2, 10 * --p)\n          * Math.cos(20 * p * Math.PI * (x[0] || 1) / 3);\n    }\n\n  };\n\n  $.each(transitions, function(val, key){\n    Trans[key] = makeTrans(val);\n  });\n\n  $.each( [\n      'Quad', 'Cubic', 'Quart', 'Quint'\n  ], function(elem, i){\n    Trans[elem] = makeTrans(function(p){\n      return Math.pow(p, [\n        i + 2\n      ]);\n    });\n  });\n\n})();\n\n/*\n   A Class that can perform animations for generic objects.\n\n   If you are looking for animation transitions please take a look at the <Trans> object.\n\n   Used by:\n\n   <Graph.Plot>\n   \n   Based on:\n   \n   The Animation class is based in the MooTools Framework <http://mootools.net>. Copyright (c) 2006-2009 Valerio Proietti, <http://mad4milk.net/>. MIT license <http://mootools.net/license.txt>.\n\n*/\n\nvar Animation = new Class( {\n\n  initialize: function(options){\n    this.setOptions(options);\n  },\n\n  setOptions: function(options){\n    var opt = {\n      duration: 2500,\n      fps: 40,\n      transition: Trans.Quart.easeInOut,\n      compute: $.empty,\n      complete: $.empty,\n      link: 'ignore'\n    };\n    this.opt = $.merge(opt, options || {});\n    return this;\n  },\n\n  step: function(){\n    var time = $.time(), opt = this.opt;\n    if (time < this.time + opt.duration) {\n      var delta = opt.transition((time - this.time) / opt.duration);\n      opt.compute(delta);\n    } else {\n      this.timer = clearInterval(this.timer);\n      opt.compute(1);\n      opt.complete();\n    }\n  },\n\n  start: function(){\n    if (!this.check())\n      return this;\n    this.time = 0;\n    this.startTimer();\n    return this;\n  },\n\n  startTimer: function(){\n    var that = this, fps = this.opt.fps;\n    if (this.timer)\n      return false;\n    this.time = $.time() - this.time;\n    this.timer = setInterval((function(){\n      that.step();\n    }), Math.round(1000 / fps));\n    return true;\n  },\n\n  pause: function(){\n    this.stopTimer();\n    return this;\n  },\n\n  resume: function(){\n    this.startTimer();\n    return this;\n  },\n\n  stopTimer: function(){\n    if (!this.timer)\n      return false;\n    this.time = $.time() - this.time;\n    this.timer = clearInterval(this.timer);\n    return true;\n  },\n\n  check: function(){\n    if (!this.timer)\n      return true;\n    if (this.opt.link == 'cancel') {\n      this.stopTimer();\n      return true;\n    }\n    return false;\n  }\n});\n\n\nvar Options = function() {\n  var args = arguments;\n  for(var i=0, l=args.length, ans={}; i<l; i++) {\n    var opt = Options[args[i]];\n    if(opt.$extend) {\n      $.extend(ans, opt);\n    } else {\n      ans[args[i]] = opt;  \n    }\n  }\n  return ans;\n};\n\n/*\n * File: Options.Canvas.js\n *\n*/\n\n/*\n  Object: Options.Canvas\n  \n  These are Canvas general options, like where to append it in the DOM, its dimensions, background, \n  and other more advanced options.\n  \n  Syntax:\n  \n  (start code js)\n\n  Options.Canvas = {\n    injectInto: 'id',\n    type: '2D', //'3D'\n    width: false,\n    height: false,\n    useCanvas: false,\n    withLabels: true,\n    background: false\n  };  \n  (end code)\n  \n  Example:\n  \n  (start code js)\n  var viz = new $jit.Viz({\n    injectInto: 'someContainerId',\n    width: 500,\n    height: 700\n  });\n  (end code)\n  \n  Parameters:\n  \n  injectInto - *required* (string|element) The id of the DOM container for the visualization. It can also be an Element provided that it has an id.\n  type - (string) Context type. Default's 2D but can be 3D for webGL enabled browsers.\n  width - (number) Default's to the *container's offsetWidth*. The width of the canvas.\n  height - (number) Default's to the *container's offsetHeight*. The height of the canvas.\n  useCanvas - (boolean|object) Default's *false*. You can pass another <Canvas> instance to be used by the visualization.\n  withLabels - (boolean) Default's *true*. Whether to use a label container for the visualization.\n  background - (boolean|object) Default's *false*. An object containing information about the rendering of a background canvas.\n*/\n\nOptions.Canvas = {\n    $extend: true,\n    \n    injectInto: 'id',\n    type: '2D',\n    width: false,\n    height: false,\n    useCanvas: false,\n    withLabels: true,\n    background: false,\n    \n    Scene: {\n      Lighting: {\n        enable: false,\n        ambient: [1, 1, 1],\n        directional: {\n          direction: { x: -100, y: -100, z: -100 },\n          color: [0.5, 0.3, 0.1]\n        }\n      }\n    }\n};\n\n/*\n * File: Options.Tree.js\n *\n*/\n\n/*\n  Object: Options.Tree\n\n  Options related to (strict) Tree layout algorithms. These options are used by the <ST> visualization.\n\n  Syntax:\n\n  (start code js)\n  Options.Tree = {\n    orientation: \"left\",\n    subtreeOffset: 8,\n    siblingOffset: 5,\n    indent:10,\n    multitree: false,\n    align:\"center\"\n  };\n  (end code)\n\n  Example:\n\n  (start code js)\n  var st = new $jit.ST({\n    orientation: 'left',\n    subtreeOffset: 1,\n    siblingOFfset: 5,\n    multitree: true\n  });\n  (end code)\n\n  Parameters:\n\n  subtreeOffset - (number) Default's 8. Separation offset between subtrees.\n  siblingOffset - (number) Default's 5. Separation offset between siblings.\n  orientation - (string) Default's 'left'. Tree orientation layout. Possible values are 'left', 'top', 'right', 'bottom'.\n  align - (string) Default's *center*. Whether the tree alignment is 'left', 'center' or 'right'.\n  indent - (number) Default's 10. Used when *align* is left or right and shows an indentation between parent and children.\n  multitree - (boolean) Default's *false*. Used with the node $orn data property for creating multitrees.\n  levelSpacing - (string) Whether each level is evenly spaced or level spacing is relative tothe size of the parent node. The former (which is the default) is 'even', the latter is 'parent'.\n\n*/\nOptions.Tree = {\n    $extend: true,\n\n    orientation: \"left\",\n    subtreeOffset: 8,\n    siblingOffset: 5,\n    indent:10,\n    multitree: false,\n    align:\"center\",\n    levelSpacing: \"even\"\n};\n\n\n/*\n * File: Options.Node.js\n *\n*/\n\n/*\n  Object: Options.Node\n\n  Provides Node rendering options for Tree and Graph based visualizations.\n\n  Syntax:\n    \n  (start code js)\n  Options.Node = {\n    overridable: false,\n    type: 'circle',\n    color: '#ccb',\n    alpha: 1,\n    dim: 3,\n    height: 20,\n    width: 90,\n    autoHeight: false,\n    autoWidth: false,\n    lineWidth: 1,\n    transform: true,\n    align: \"center\",\n    angularWidth:1,\n    span:1,\n    CanvasStyles: {}\n  };\n  (end code)\n  \n  Example:\n  \n  (start code js)\n  var viz = new $jit.Viz({\n    Node: {\n      overridable: true,\n      width: 30,\n      autoHeight: true,\n      type: 'rectangle'\n    }\n  });\n  (end code)\n  \n  Parameters:\n\n  overridable - (boolean) Default's *false*. Determine whether or not general node properties can be overridden by a particular <Graph.Node>.\n  type - (string) Default's *circle*. Node's shape. Node built-in types include 'circle', 'rectangle', 'square', 'ellipse', 'triangle', 'star'. The default Node type might vary in each visualization. You can also implement (non built-in) custom Node types into your visualizations.\n  color - (string) Default's *#ccb*. Node color.\n  alpha - (number) Default's *1*. The Node's alpha value. *1* is for full opacity.\n  dim - (number) Default's *3*. An extra parameter used by 'circle', 'square', 'triangle' and 'star' node types. Depending on each shape, this parameter can set the radius of a circle, half the length of the side of a square, half the base and half the height of a triangle or the length of a side of a star (concave decagon).\n  height - (number) Default's *20*. Used by 'rectangle' and 'ellipse' node types. The height of the node shape.\n  width - (number) Default's *90*. Used by 'rectangle' and 'ellipse' node types. The width of the node shape.\n  autoHeight - (boolean) Default's *false*. Whether to set an auto height for the node depending on the content of the Node's label.\n  autoWidth - (boolean) Default's *false*. Whether to set an auto width for the node depending on the content of the Node's label.\n  lineWidth - (number) Default's *1*. Used only by some Node shapes. The line width of the strokes of a node.\n  transform - (boolean) Default's *true*. Only used by the <Hypertree> visualization. Whether to scale the nodes according to the moebius transformation.\n  align - (string) Default's *center*. Possible values are 'center', 'left' or 'right'. Used only by the <ST> visualization, these parameters are used for aligning nodes when some of they dimensions vary.\n  angularWidth - (number) Default's *1*. Used in radial layouts (like <RGraph> or <Sunburst> visualizations). The amount of relative 'space' set for a node.\n  span - (number) Default's *1*. Used in radial layouts (like <RGraph> or <Sunburst> visualizations). The angle span amount set for a node.\n  CanvasStyles - (object) Default's an empty object (i.e. {}). Attach any other canvas specific property that you'd set to the canvas context before plotting a Node.\n\n*/\nOptions.Node = {\n  $extend: false,\n  \n  overridable: false,\n  type: 'circle',\n  color: '#ccb',\n  alpha: 1,\n  dim: 3,\n  height: 20,\n  width: 90,\n  autoHeight: false,\n  autoWidth: false,\n  lineWidth: 1,\n  transform: true,\n  align: \"center\",\n  angularWidth:1,\n  span:1,\n  //Raw canvas styles to be\n  //applied to the context instance\n  //before plotting a node\n  CanvasStyles: {}\n};\n\n\n/*\n * File: Options.Edge.js\n *\n*/\n\n/*\n  Object: Options.Edge\n\n  Provides Edge rendering options for Tree and Graph based visualizations.\n\n  Syntax:\n    \n  (start code js)\n  Options.Edge = {\n    overridable: false,\n    type: 'line',\n    color: '#ccb',\n    lineWidth: 1,\n    dim:15,\n    alpha: 1,\n    CanvasStyles: {}\n  };\n  (end code)\n  \n  Example:\n  \n  (start code js)\n  var viz = new $jit.Viz({\n    Edge: {\n      overridable: true,\n      type: 'line',\n      color: '#fff',\n      CanvasStyles: {\n        shadowColor: '#ccc',\n        shadowBlur: 10\n      }\n    }\n  });\n  (end code)\n  \n  Parameters:\n    \n   overridable - (boolean) Default's *false*. Determine whether or not general edges properties can be overridden by a particular <Graph.Adjacence>.\n   type - (string) Default's 'line'. Edge styles include 'line', 'hyperline', 'arrow'. The default Edge type might vary in each visualization. You can also implement custom Edge types.\n   color - (string) Default's '#ccb'. Edge color.\n   lineWidth - (number) Default's *1*. Line/Edge width.\n   alpha - (number) Default's *1*. The Edge's alpha value. *1* is for full opacity.\n   dim - (number) Default's *15*. An extra parameter used by other complex shapes such as quadratic, bezier or arrow, to determine the shape's diameter.\n   epsilon - (number) Default's *7*. Only used when using *enableForEdges* in <Options.Events>. This dimension is used to create an area for the line where the contains method for the edge returns *true*.\n   CanvasStyles - (object) Default's an empty object (i.e. {}). Attach any other canvas specific property that you'd set to the canvas context before plotting an Edge.\n\n  See also:\n   \n   If you want to know more about how to customize Node/Edge data per element, in the JSON or programmatically, take a look at this article.\n*/\nOptions.Edge = {\n  $extend: false,\n  \n  overridable: false,\n  type: 'line',\n  color: '#ccb',\n  lineWidth: 1,\n  dim:15,\n  alpha: 1,\n  epsilon: 7,\n\n  //Raw canvas styles to be\n  //applied to the context instance\n  //before plotting an edge\n  CanvasStyles: {}\n};\n\n\n/*\n * File: Options.Fx.js\n *\n*/\n\n/*\n  Object: Options.Fx\n\n  Provides animation options like duration of the animations, frames per second and animation transitions.  \n\n  Syntax:\n  \n  (start code js)\n    Options.Fx = {\n      fps:40,\n      duration: 2500,\n      transition: $jit.Trans.Quart.easeInOut,\n      clearCanvas: true\n    };\n  (end code)\n  \n  Example:\n  \n  (start code js)\n  var viz = new $jit.Viz({\n    duration: 1000,\n    fps: 35,\n    transition: $jit.Trans.linear\n  });\n  (end code)\n  \n  Parameters:\n  \n  clearCanvas - (boolean) Default's *true*. Whether to clear the frame/canvas when the viz is plotted or animated.\n  duration - (number) Default's *2500*. Duration of the animation in milliseconds.\n  fps - (number) Default's *40*. Frames per second.\n  transition - (object) Default's *$jit.Trans.Quart.easeInOut*. The transition used for the animations. See below for a more detailed explanation.\n  \n  Object: $jit.Trans\n  \n  This object is used for specifying different animation transitions in all visualizations.\n\n  There are many different type of animation transitions.\n\n  linear:\n\n  Displays a linear transition\n\n  >Trans.linear\n  \n  (see Linear.png)\n\n  Quad:\n\n  Displays a Quadratic transition.\n\n  >Trans.Quad.easeIn\n  >Trans.Quad.easeOut\n  >Trans.Quad.easeInOut\n  \n (see Quad.png)\n\n Cubic:\n\n Displays a Cubic transition.\n\n >Trans.Cubic.easeIn\n >Trans.Cubic.easeOut\n >Trans.Cubic.easeInOut\n\n (see Cubic.png)\n\n Quart:\n\n Displays a Quartetic transition.\n\n >Trans.Quart.easeIn\n >Trans.Quart.easeOut\n >Trans.Quart.easeInOut\n\n (see Quart.png)\n\n Quint:\n\n Displays a Quintic transition.\n\n >Trans.Quint.easeIn\n >Trans.Quint.easeOut\n >Trans.Quint.easeInOut\n\n (see Quint.png)\n\n Expo:\n\n Displays an Exponential transition.\n\n >Trans.Expo.easeIn\n >Trans.Expo.easeOut\n >Trans.Expo.easeInOut\n\n (see Expo.png)\n\n Circ:\n\n Displays a Circular transition.\n\n >Trans.Circ.easeIn\n >Trans.Circ.easeOut\n >Trans.Circ.easeInOut\n\n (see Circ.png)\n\n Sine:\n\n Displays a Sineousidal transition.\n\n >Trans.Sine.easeIn\n >Trans.Sine.easeOut\n >Trans.Sine.easeInOut\n\n (see Sine.png)\n\n Back:\n\n >Trans.Back.easeIn\n >Trans.Back.easeOut\n >Trans.Back.easeInOut\n\n (see Back.png)\n\n Bounce:\n\n Bouncy transition.\n\n >Trans.Bounce.easeIn\n >Trans.Bounce.easeOut\n >Trans.Bounce.easeInOut\n\n (see Bounce.png)\n\n Elastic:\n\n Elastic curve.\n\n >Trans.Elastic.easeIn\n >Trans.Elastic.easeOut\n >Trans.Elastic.easeInOut\n\n (see Elastic.png)\n \n Based on:\n     \n Easing and Transition animation methods are based in the MooTools Framework <http://mootools.net>. Copyright (c) 2006-2010 Valerio Proietti, <http://mad4milk.net/>. MIT license <http://mootools.net/license.txt>.\n\n\n*/\nOptions.Fx = {\n  $extend: true,\n  \n  fps:40,\n  duration: 2500,\n  transition: $jit.Trans.Quart.easeInOut,\n  clearCanvas: true\n};\n\n/*\n * File: Options.Label.js\n *\n*/\n/*\n  Object: Options.Label\n\n  Provides styling for Labels such as font size, family, etc. Also sets Node labels as HTML, SVG or Native canvas elements.  \n\n  Syntax:\n  \n  (start code js)\n    Options.Label = {\n      overridable: false,\n      type: 'HTML', //'SVG', 'Native'\n      style: ' ',\n      size: 10,\n      family: 'sans-serif',\n      textAlign: 'center',\n      textBaseline: 'alphabetic',\n      color: '#fff'\n    };\n  (end code)\n  \n  Example:\n  \n  (start code js)\n  var viz = new $jit.Viz({\n    Label: {\n      type: 'Native',\n      size: 11,\n      color: '#ccc'\n    }\n  });\n  (end code)\n  \n  Parameters:\n    \n  overridable - (boolean) Default's *false*. Determine whether or not general label properties can be overridden by a particular <Graph.Node>.\n  type - (string) Default's *HTML*. The type for the labels. Can be 'HTML', 'SVG' or 'Native' canvas labels.\n  style - (string) Default's *empty string*. Can be 'italic' or 'bold'. This parameter is only taken into account when using 'Native' canvas labels. For DOM based labels the className *node* is added to the DOM element for styling via CSS. You can also use <Options.Controller> methods to style individual labels.\n  size - (number) Default's *10*. The font's size. This parameter is only taken into account when using 'Native' canvas labels. For DOM based labels the className *node* is added to the DOM element for styling via CSS. You can also use <Options.Controller> methods to style individual labels.\n  family - (string) Default's *sans-serif*. The font's family. This parameter is only taken into account when using 'Native' canvas labels. For DOM based labels the className *node* is added to the DOM element for styling via CSS. You can also use <Options.Controller> methods to style individual labels.\n  color - (string) Default's *#fff*. The font's color. This parameter is only taken into account when using 'Native' canvas labels. For DOM based labels the className *node* is added to the DOM element for styling via CSS. You can also use <Options.Controller> methods to style individual labels.\n*/\nOptions.Label = {\n  $extend: false,\n  \n  overridable: false,\n  type: 'HTML', //'SVG', 'Native'\n  style: ' ',\n  size: 10,\n  family: 'sans-serif',\n  textAlign: 'center',\n  textBaseline: 'alphabetic',\n  color: '#fff'\n};\n\n\n/*\n * File: Options.Tips.js\n *\n */\n\n/*\n  Object: Options.Tips\n  \n  Tips options\n  \n  Syntax:\n    \n  (start code js)\n  Options.Tips = {\n    enable: false,\n    type: 'auto',\n    offsetX: 20,\n    offsetY: 20,\n    onShow: $.empty,\n    onHide: $.empty\n  };\n  (end code)\n  \n  Example:\n  \n  (start code js)\n  var viz = new $jit.Viz({\n    Tips: {\n      enable: true,\n      type: 'Native',\n      offsetX: 10,\n      offsetY: 10,\n      onShow: function(tip, node) {\n        tip.innerHTML = node.name;\n      }\n    }\n  });\n  (end code)\n\n  Parameters:\n\n  enable - (boolean) Default's *false*. If *true*, a tooltip will be shown when a node is hovered. The tooltip is a div DOM element having \"tip\" as CSS class. \n  type - (string) Default's *auto*. Defines where to attach the MouseEnter/Leave tooltip events. Possible values are 'Native' to attach them to the canvas or 'HTML' to attach them to DOM label elements (if defined). 'auto' sets this property to the value of <Options.Label>'s *type* property.\n  offsetX - (number) Default's *20*. An offset added to the current tooltip x-position (which is the same as the current mouse position). Default's 20.\n  offsetY - (number) Default's *20*. An offset added to the current tooltip y-position (which is the same as the current mouse position). Default's 20.\n  onShow(tip, node) - This callack is used right before displaying a tooltip. The first formal parameter is the tip itself (which is a DivElement). The second parameter may be a <Graph.Node> for graph based visualizations or an object with label, value properties for charts.\n  onHide() - This callack is used when hiding a tooltip.\n\n*/\nOptions.Tips = {\n  $extend: false,\n  \n  enable: false,\n  type: 'auto',\n  offsetX: 20,\n  offsetY: 20,\n  force: false,\n  onShow: $.empty,\n  onHide: $.empty\n};\n\n\n/*\n * File: Options.NodeStyles.js\n *\n */\n\n/*\n  Object: Options.NodeStyles\n  \n  Apply different styles when a node is hovered or selected.\n  \n  Syntax:\n    \n  (start code js)\n  Options.NodeStyles = {\n    enable: false,\n    type: 'auto',\n    stylesHover: false,\n    stylesClick: false\n  };\n  (end code)\n  \n  Example:\n  \n  (start code js)\n  var viz = new $jit.Viz({\n    NodeStyles: {\n      enable: true,\n      type: 'Native',\n      stylesHover: {\n        dim: 30,\n        color: '#fcc'\n      },\n      duration: 600\n    }\n  });\n  (end code)\n\n  Parameters:\n  \n  enable - (boolean) Default's *false*. Whether to enable this option.\n  type - (string) Default's *auto*. Use this to attach the hover/click events in the nodes or the nodes labels (if they have been defined as DOM elements: 'HTML' or 'SVG', see <Options.Label> for more details). The default 'auto' value will set NodeStyles to the same type defined for <Options.Label>.\n  stylesHover - (boolean|object) Default's *false*. An object with node styles just like the ones defined for <Options.Node> or *false* otherwise.\n  stylesClick - (boolean|object) Default's *false*. An object with node styles just like the ones defined for <Options.Node> or *false* otherwise.\n*/\n\nOptions.NodeStyles = {\n  $extend: false,\n  \n  enable: false,\n  type: 'auto',\n  stylesHover: false,\n  stylesClick: false\n};\n\n\n/*\n * File: Options.Events.js\n *\n*/\n\n/*\n  Object: Options.Events\n  \n  Configuration for adding mouse/touch event handlers to Nodes.\n  \n  Syntax:\n  \n  (start code js)\n  Options.Events = {\n    enable: false,\n    enableForEdges: false,\n    type: 'auto',\n    onClick: $.empty,\n    onRightClick: $.empty,\n    onMouseMove: $.empty,\n    onMouseEnter: $.empty,\n    onMouseLeave: $.empty,\n    onDragStart: $.empty,\n    onDragMove: $.empty,\n    onDragCancel: $.empty,\n    onDragEnd: $.empty,\n    onTouchStart: $.empty,\n    onTouchMove: $.empty,\n    onTouchEnd: $.empty,\n    onTouchCancel: $.empty,\n    onMouseWheel: $.empty\n  };\n  (end code)\n  \n  Example:\n  \n  (start code js)\n  var viz = new $jit.Viz({\n    Events: {\n      enable: true,\n      onClick: function(node, eventInfo, e) {\n        viz.doSomething();\n      },\n      onMouseEnter: function(node, eventInfo, e) {\n        viz.canvas.getElement().style.cursor = 'pointer';\n      },\n      onMouseLeave: function(node, eventInfo, e) {\n        viz.canvas.getElement().style.cursor = '';\n      }\n    }\n  });\n  (end code)\n  \n  Parameters:\n  \n  enable - (boolean) Default's *false*. Whether to enable the Event system.\n  enableForEdges - (boolean) Default's *false*. Whether to track events also in arcs. If *true* the same callbacks -described below- are used for nodes *and* edges. A simple duck type check for edges is to check for *node.nodeFrom*.\n  type - (string) Default's 'auto'. Whether to attach the events onto the HTML labels (via event delegation) or to use the custom 'Native' canvas Event System of the library. 'auto' is set when you let the <Options.Label> *type* parameter decide this.\n  onClick(node, eventInfo, e) - Triggered when a user performs a click in the canvas. *node* is the <Graph.Node> clicked or false if no node has been clicked. *e* is the grabbed event (should return the native event in a cross-browser manner). *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas. \n  onRightClick(node, eventInfo, e) - Triggered when a user performs a right click in the canvas. *node* is the <Graph.Node> right clicked or false if no node has been clicked. *e* is the grabbed event (should return the native event in a cross-browser manner). *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas. \n  onMouseMove(node, eventInfo, e) - Triggered when the user moves the mouse. *node* is the <Graph.Node> under the cursor as it's moving over the canvas or false if no node has been clicked. *e* is the grabbed event (should return the native event in a cross-browser manner).  *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas.\n  onMouseEnter(node, eventInfo, e) - Triggered when a user moves the mouse over a node. *node* is the <Graph.Node> that the mouse just entered. *e* is the grabbed event (should return the native event in a cross-browser manner). *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas. \n  onMouseLeave(node, eventInfo, e) - Triggered when the user mouse-outs a node. *node* is the <Graph.Node> 'mouse-outed'. *e* is the grabbed event (should return the native event in a cross-browser manner). *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas. \n  onDragStart(node, eventInfo, e) - Triggered when the user mouse-downs over a node. *node* is the <Graph.Node> being pressed. *e* is the grabbed event (should return the native event in a cross-browser manner). *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas. \n  onDragMove(node, eventInfo, e) - Triggered when a user, after pressing the mouse button over a node, moves the mouse around. *node* is the <Graph.Node> being dragged. *e* is the grabbed event (should return the native event in a cross-browser manner). *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas. \n  onDragEnd(node, eventInfo, e) - Triggered when a user finished dragging a node. *node* is the <Graph.Node> being dragged. *e* is the grabbed event (should return the native event in a cross-browser manner). *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas. \n  onDragCancel(node, eventInfo, e) - Triggered when the user releases the mouse button over a <Graph.Node> that wasn't dragged (i.e. the user didn't perform any mouse movement after pressing the mouse button). *node* is the <Graph.Node> being dragged. *e* is the grabbed event (should return the native event in a cross-browser manner). *eventInfo* is an object containing useful methods like *getPos* to get the mouse position relative to the canvas. \n  onTouchStart(node, eventInfo, e) - Behaves just like onDragStart. \n  onTouchMove(node, eventInfo, e) - Behaves just like onDragMove. \n  onTouchEnd(node, eventInfo, e) - Behaves just like onDragEnd. \n  onTouchCancel(node, eventInfo, e) - Behaves just like onDragCancel.\n  onMouseWheel(delta, e) - Triggered when the user uses the mouse scroll over the canvas. *delta* is 1 or -1 depending on the sense of the mouse scroll.\n*/\n\nOptions.Events = {\n  $extend: false,\n  \n  enable: false,\n  enableForEdges: false,\n  type: 'auto',\n  onClick: $.empty,\n  onRightClick: $.empty,\n  onMouseMove: $.empty,\n  onMouseEnter: $.empty,\n  onMouseLeave: $.empty,\n  onDragStart: $.empty,\n  onDragMove: $.empty,\n  onDragCancel: $.empty,\n  onDragEnd: $.empty,\n  onTouchStart: $.empty,\n  onTouchMove: $.empty,\n  onTouchEnd: $.empty,\n  onTouchCancel: $.empty,\n  onMouseWheel: $.empty\n};\n\n\n/*\n * File: Options.Navigation.js\n *\n*/\n\n/*\n  Object: Options.Navigation\n  \n  Panning and zooming options for Graph/Tree based visualizations. These options are implemented \n  by all visualizations except charts (<AreaChart>, <BarChart> and <PieChart>).\n  \n  Syntax:\n  \n  (start code js)\n\n  Options.Navigation = {\n    enable: false,\n    type: 'auto',\n    panning: false, //true, 'avoid nodes'\n    zooming: false\n  };\n  \n  (end code)\n  \n  Example:\n    \n  (start code js)\n  var viz = new $jit.Viz({\n    Navigation: {\n      enable: true,\n      panning: 'avoid nodes',\n      zooming: 20\n    }\n  });\n  (end code)\n  \n  Parameters:\n  \n  enable - (boolean) Default's *false*. Whether to enable Navigation capabilities.\n  type - (string) Default's 'auto'. Whether to attach the navigation events onto the HTML labels (via event delegation) or to use the custom 'Native' canvas Event System of the library. When 'auto' set when you let the <Options.Label> *type* parameter decide this.\n  panning - (boolean|string) Default's *false*. Set this property to *true* if you want to add Drag and Drop panning support to the visualization. You can also set this parameter to 'avoid nodes' to enable DnD panning but disable it if the DnD is taking place over a node. This is useful when some other events like Drag & Drop for nodes are added to <Graph.Nodes>.\n  zooming - (boolean|number) Default's *false*. Set this property to a numeric value to turn mouse-scroll zooming on. The number will be proportional to the mouse-scroll sensitivity.\n  \n*/\n\nOptions.Navigation = {\n  $extend: false,\n  \n  enable: false,\n  type: 'auto',\n  panning: false, //true | 'avoid nodes'\n  zooming: false\n};\n\n/*\n * File: Options.Controller.js\n *\n*/\n\n/*\n  Object: Options.Controller\n  \n  Provides controller methods. Controller methods are callback functions that get called at different stages \n  of the animation, computing or plotting of the visualization.\n  \n  Implemented by:\n    \n  All visualizations except charts (<AreaChart>, <BarChart> and <PieChart>).\n  \n  Syntax:\n  \n  (start code js)\n\n  Options.Controller = {\n    onBeforeCompute: $.empty,\n    onAfterCompute:  $.empty,\n    onCreateLabel:   $.empty,\n    onPlaceLabel:    $.empty,\n    onComplete:      $.empty,\n    onBeforePlotLine:$.empty,\n    onAfterPlotLine: $.empty,\n    onBeforePlotNode:$.empty,\n    onAfterPlotNode: $.empty,\n    request:         false\n  };\n  \n  (end code)\n  \n  Example:\n    \n  (start code js)\n  var viz = new $jit.Viz({\n    onBeforePlotNode: function(node) {\n      if(node.selected) {\n        node.setData('color', '#ffc');\n      } else {\n        node.removeData('color');\n      }\n    },\n    onBeforePlotLine: function(adj) {\n      if(adj.nodeFrom.selected && adj.nodeTo.selected) {\n        adj.setData('color', '#ffc');\n      } else {\n        adj.removeData('color');\n      }\n    },\n    onAfterCompute: function() {\n      alert(\"computed!\");\n    }\n  });\n  (end code)\n  \n  Parameters:\n\n   onBeforeCompute(node) - This method is called right before performing all computations and animations. The selected <Graph.Node> is passed as parameter.\n   onAfterCompute() - This method is triggered after all animations or computations ended.\n   onCreateLabel(domElement, node) - This method receives a new label DIV element as first parameter, and the corresponding <Graph.Node> as second parameter. This method will only be called once for each label. This method is useful when adding events or styles to the labels used by the JIT.\n   onPlaceLabel(domElement, node) - This method receives a label DIV element as first parameter and the corresponding <Graph.Node> as second parameter. This method is called each time a label has been placed in the visualization, for example at each step of an animation, and thus it allows you to update the labels properties, such as size or position. Note that onPlaceLabel will be triggered after updating the labels positions. That means that, for example, the left and top css properties are already updated to match the nodes positions. Width and height properties are not set however.\n   onBeforePlotNode(node) - This method is triggered right before plotting each <Graph.Node>. This method is useful for changing a node style right before plotting it.\n   onAfterPlotNode(node) - This method is triggered right after plotting each <Graph.Node>.\n   onBeforePlotLine(adj) - This method is triggered right before plotting a <Graph.Adjacence>. This method is useful for adding some styles to a particular edge before being plotted.\n   onAfterPlotLine(adj) - This method is triggered right after plotting a <Graph.Adjacence>.\n   onBeforeRemoveNode(node) - This method is triggered right before removing each <Graph.Node>.\n   \n    *Used in <ST>, <TM.Base> and <Icicle> visualizations*\n    \n    request(nodeId, level, onComplete) - This method is used for buffering information into the visualization. When clicking on an empty node, the visualization will make a request for this node's subtrees, specifying a given level for this subtree (defined by _levelsToShow_). Once the request is completed, the onComplete callback should be called with the given result. This is useful to provide on-demand information into the visualizations withought having to load the entire information from start. The parameters used by this method are _nodeId_, which is the id of the root of the subtree to request, _level_ which is the depth of the subtree to be requested (0 would mean just the root node). _onComplete_ is an object having the callback method _onComplete.onComplete(json)_ that should be called once the json has been retrieved.  \n \n */\nOptions.Controller = {\n  $extend: true,\n  \n  onBeforeCompute:   $.empty,\n  onAfterCompute:    $.empty,\n  onCreateLabel:     $.empty,\n  onPlaceLabel:      $.empty,\n  onComplete:        $.empty,\n  onBeforePlotLine:  $.empty,\n  onAfterPlotLine:   $.empty,\n  onBeforePlotNode:  $.empty,\n  onAfterPlotNode:   $.empty,\n  onBeforeRemoveNode:$.empty,\n  request:         false\n};\n\n\n/*\n * File: Extras.js\n * \n * Provides Extras such as Tips and Style Effects.\n * \n * Description:\n * \n * Provides the <Tips> and <NodeStyles> classes and functions.\n *\n */\n\n/*\n * Manager for mouse events (clicking and mouse moving).\n * \n * This class is used for registering objects implementing onClick\n * and onMousemove methods. These methods are called when clicking or\n * moving the mouse around  the Canvas.\n * For now, <Tips> and <NodeStyles> are classes implementing these methods.\n * \n */\nvar ExtrasInitializer = {\n  initialize: function(className, viz) {\n    this.viz = viz;\n    this.canvas = viz.canvas;\n    this.config = viz.config[className];\n    this.nodeTypes = viz.fx.nodeTypes;\n    var type = this.config.type;\n    this.dom = type == 'auto'? (viz.config.Label.type != 'Native') : (type != 'Native');\n    this.labelContainer = this.dom && viz.labels.getLabelContainer();\n    this.isEnabled() && this.initializePost();\n  },\n  initializePost: $.empty,\n  setAsProperty: $.lambda(false),\n  isEnabled: function() {\n    return this.config.enable;\n  },\n  isLabel: function(e, win, group) {\n    e = $.event.get(e, win);\n    var labelContainer = this.labelContainer,\n        target = e.target || e.srcElement,\n        related = e.relatedTarget;\n    if(group) {\n      return related && related == this.viz.canvas.getCtx().canvas \n          && !!target && this.isDescendantOf(target, labelContainer);\n    } else {\n      return this.isDescendantOf(target, labelContainer);\n    }\n  },\n  isDescendantOf: function(elem, par) {\n    while(elem && elem.parentNode) {\n      if(elem.parentNode == par)\n        return elem;\n      elem = elem.parentNode;\n    }\n    return false;\n  }\n};\n\nvar EventsInterface = {\n  onMouseUp: $.empty,\n  onMouseDown: $.empty,\n  onMouseMove: $.empty,\n  onMouseOver: $.empty,\n  onMouseOut: $.empty,\n  onMouseWheel: $.empty,\n  onTouchStart: $.empty,\n  onTouchMove: $.empty,\n  onTouchEnd: $.empty,\n  onTouchCancel: $.empty\n};\n\nvar MouseEventsManager = new Class({\n  initialize: function(viz) {\n    this.viz = viz;\n    this.canvas = viz.canvas;\n    this.node = false;\n    this.edge = false;\n    this.registeredObjects = [];\n    this.attachEvents();\n  },\n  \n  attachEvents: function() {\n    var htmlCanvas = this.canvas.getElement(), \n        that = this;\n    htmlCanvas.oncontextmenu = $.lambda(false);\n    $.addEvents(htmlCanvas, {\n      'mouseup': function(e, win) {\n        var event = $.event.get(e, win);\n        that.handleEvent('MouseUp', e, win, \n            that.makeEventObject(e, win), \n            $.event.isRightClick(event));\n      },\n      'mousedown': function(e, win) {\n        var event = $.event.get(e, win);\n        that.handleEvent('MouseDown', e, win, that.makeEventObject(e, win), \n            $.event.isRightClick(event));\n      },\n      'mousemove': function(e, win) {\n        that.handleEvent('MouseMove', e, win, that.makeEventObject(e, win));\n      },\n      'mouseover': function(e, win) {\n        that.handleEvent('MouseOver', e, win, that.makeEventObject(e, win));\n      },\n      'mouseout': function(e, win) {\n        that.handleEvent('MouseOut', e, win, that.makeEventObject(e, win));\n      },\n      'touchstart': function(e, win) {\n        that.handleEvent('TouchStart', e, win, that.makeEventObject(e, win));\n      },\n      'touchmove': function(e, win) {\n        that.handleEvent('TouchMove', e, win, that.makeEventObject(e, win));\n      },\n      'touchend': function(e, win) {\n        that.handleEvent('TouchEnd', e, win, that.makeEventObject(e, win));\n      }\n    });\n    //attach mousewheel event\n    var handleMouseWheel = function(e, win) {\n      var event = $.event.get(e, win);\n      var wheel = $.event.getWheel(event);\n      that.handleEvent('MouseWheel', e, win, wheel);\n    };\n    //TODO(nico): this is a horrible check for non-gecko browsers!\n    if(!document.getBoxObjectFor && window.mozInnerScreenX == null) {\n      $.addEvent(htmlCanvas, 'mousewheel', handleMouseWheel);\n    } else {\n      htmlCanvas.addEventListener('DOMMouseScroll', handleMouseWheel, false);\n    }\n  },\n  \n  register: function(obj) {\n    this.registeredObjects.push(obj);\n  },\n  \n  handleEvent: function() {\n    var args = Array.prototype.slice.call(arguments),\n        type = args.shift();\n    for(var i=0, regs=this.registeredObjects, l=regs.length; i<l; i++) {\n      regs[i]['on' + type].apply(regs[i], args);\n    }\n  },\n  \n  makeEventObject: function(e, win) {\n    var that = this,\n        graph = this.viz.graph,\n        fx = this.viz.fx,\n        ntypes = fx.nodeTypes,\n        etypes = fx.edgeTypes;\n    return {\n      pos: false,\n      node: false,\n      edge: false,\n      contains: false,\n      getNodeCalled: false,\n      getEdgeCalled: false,\n      getPos: function() {\n        //TODO(nico): check why this can't be cache anymore when using edge detection\n        //if(this.pos) return this.pos;\n        var canvas = that.viz.canvas,\n            s = canvas.getSize(),\n            p = canvas.getPos(),\n            ox = canvas.translateOffsetX,\n            oy = canvas.translateOffsetY,\n            sx = canvas.scaleOffsetX,\n            sy = canvas.scaleOffsetY,\n            pos = $.event.getPos(e, win);\n        this.pos = {\n          x: (pos.x - p.x - s.width/2 - ox) * 1/sx,\n          y: (pos.y - p.y - s.height/2 - oy) * 1/sy\n        };\n        return this.pos;\n      },\n      getNode: function() {\n        if(this.getNodeCalled) return this.node;\n        this.getNodeCalled = true;\n        for(var id in graph.nodes) {\n          var n = graph.nodes[id],\n              geom = n && ntypes[n.getData('type')],\n              contains = geom && geom.contains && geom.contains.call(fx, n, this.getPos());\n          if(contains) {\n            this.contains = contains;\n            return that.node = this.node = n;\n          }\n        }\n        return that.node = this.node = false;\n      },\n      getEdge: function() {\n        if(this.getEdgeCalled) return this.edge;\n        this.getEdgeCalled = true;\n        var hashset = {};\n        for(var id in graph.edges) {\n          var edgeFrom = graph.edges[id];\n          hashset[id] = true;\n          for(var edgeId in edgeFrom) {\n            if(edgeId in hashset) continue;\n            var e = edgeFrom[edgeId],\n                geom = e && etypes[e.getData('type')],\n                contains = geom && geom.contains && geom.contains.call(fx, e, this.getPos());\n            if(contains) {\n              this.contains = contains;\n              return that.edge = this.edge = e;\n            }\n          }\n        }\n        return that.edge = this.edge = false;\n      },\n      getContains: function() {\n        if(this.getNodeCalled) return this.contains;\n        this.getNode();\n        return this.contains;\n      }\n    };\n  }\n});\n\n/* \n * Provides the initialization function for <NodeStyles> and <Tips> implemented \n * by all main visualizations.\n *\n */\nvar Extras = {\n  initializeExtras: function() {\n    var mem = new MouseEventsManager(this), that = this;\n    $.each(['NodeStyles', 'Tips', 'Navigation', 'Events'], function(k) {\n      var obj = new Extras.Classes[k](k, that);\n      if(obj.isEnabled()) {\n        mem.register(obj);\n      }\n      if(obj.setAsProperty()) {\n        that[k.toLowerCase()] = obj;\n      }\n    });\n  }   \n};\n\nExtras.Classes = {};\n/*\n  Class: Events\n   \n  This class defines an Event API to be accessed by the user.\n  The methods implemented are the ones defined in the <Options.Events> object.\n*/\n\nExtras.Classes.Events = new Class({\n  Implements: [ExtrasInitializer, EventsInterface],\n  \n  initializePost: function() {\n    this.fx = this.viz.fx;\n    this.ntypes = this.viz.fx.nodeTypes;\n    this.etypes = this.viz.fx.edgeTypes;\n    \n    this.hovered = false;\n    this.pressed = false;\n    this.touched = false;\n\n    this.touchMoved = false;\n    this.moved = false;\n    \n  },\n  \n  setAsProperty: $.lambda(true),\n  \n  onMouseUp: function(e, win, event, isRightClick) {\n    var evt = $.event.get(e, win);\n    if(!this.moved) {\n      if(isRightClick) {\n        this.config.onRightClick(this.hovered, event, evt);\n      } else {\n        this.config.onClick(this.pressed, event, evt);\n      }\n    }\n    if(this.pressed) {\n      if(this.moved) {\n        this.config.onDragEnd(this.pressed, event, evt);\n      } else {\n        this.config.onDragCancel(this.pressed, event, evt);\n      }\n      this.pressed = this.moved = false;\n    }\n  },\n\n  onMouseOut: function(e, win, event) {\n   //mouseout a label\n   var evt = $.event.get(e, win), label;\n   if(this.dom && (label = this.isLabel(e, win, true))) {\n     this.config.onMouseLeave(this.viz.graph.getNode(label.id),\n                              event, evt);\n     this.hovered = false;\n     return;\n   }\n   //mouseout canvas\n   var rt = evt.relatedTarget,\n       canvasWidget = this.canvas.getElement();\n   while(rt && rt.parentNode) {\n     if(canvasWidget == rt.parentNode) return;\n     rt = rt.parentNode;\n   }\n   if(this.hovered) {\n     this.config.onMouseLeave(this.hovered,\n         event, evt);\n     this.hovered = false;\n   }\n  },\n  \n  onMouseOver: function(e, win, event) {\n    //mouseover a label\n    var evt = $.event.get(e, win), label;\n    if(this.dom && (label = this.isLabel(e, win, true))) {\n      this.hovered = this.viz.graph.getNode(label.id);\n      this.config.onMouseEnter(this.hovered,\n                               event, evt);\n    }\n  },\n  \n  onMouseMove: function(e, win, event) {\n   var label, evt = $.event.get(e, win);\n   if(this.pressed) {\n     this.moved = true;\n     this.config.onDragMove(this.pressed, event, evt);\n     return;\n   }\n   if(this.dom) {\n     this.config.onMouseMove(this.hovered,\n         event, evt);\n   } else {\n     if(this.hovered) {\n       var hn = this.hovered;\n       var geom = hn.nodeFrom? this.etypes[hn.getData('type')] : this.ntypes[hn.getData('type')];\n       var contains = geom && geom.contains \n         && geom.contains.call(this.fx, hn, event.getPos());\n       if(contains) {\n         this.config.onMouseMove(hn, event, evt);\n         return;\n       } else {\n         this.config.onMouseLeave(hn, event, evt);\n         this.hovered = false;\n       }\n     }\n     if(this.hovered = (event.getNode() || (this.config.enableForEdges && event.getEdge()))) {\n       this.config.onMouseEnter(this.hovered, event, evt);\n     } else {\n       this.config.onMouseMove(false, event, evt);\n     }\n   }\n  },\n  \n  onMouseWheel: function(e, win, delta) {\n    this.config.onMouseWheel(delta, $.event.get(e, win));\n  },\n  \n  onMouseDown: function(e, win, event) {\n    var evt = $.event.get(e, win), label;\n    if(this.dom) {\n      if(label = this.isLabel(e, win)) {\n        this.pressed = this.viz.graph.getNode(label.id);\n      }\n    } else {\n      this.pressed = event.getNode() || (this.config.enableForEdges && event.getEdge());\n    }\n    this.pressed && this.config.onDragStart(this.pressed, event, evt);\n  },\n  \n  onTouchStart: function(e, win, event) {\n    var evt = $.event.get(e, win), label;\n    if(this.dom && (label = this.isLabel(e, win))) {\n      this.touched = this.viz.graph.getNode(label.id);\n    } else {\n      this.touched = event.getNode() || (this.config.enableForEdges && event.getEdge());\n    }\n    this.touched && this.config.onTouchStart(this.touched, event, evt);\n  },\n  \n  onTouchMove: function(e, win, event) {\n    var evt = $.event.get(e, win);\n    if(this.touched) {\n      this.touchMoved = true;\n      this.config.onTouchMove(this.touched, event, evt);\n    }\n  },\n  \n  onTouchEnd: function(e, win, event) {\n    var evt = $.event.get(e, win);\n    if(this.touched) {\n      if(this.touchMoved) {\n        this.config.onTouchEnd(this.touched, event, evt);\n      } else {\n        this.config.onTouchCancel(this.touched, event, evt);\n      }\n      this.touched = this.touchMoved = false;\n    }\n  }\n});\n\n/*\n   Class: Tips\n    \n   A class containing tip related functions. This class is used internally.\n   \n   Used by:\n   \n   <ST>, <Sunburst>, <Hypertree>, <RGraph>, <TM>, <ForceDirected>, <Icicle>\n   \n   See also:\n   \n   <Options.Tips>\n*/\n\nExtras.Classes.Tips = new Class({\n  Implements: [ExtrasInitializer, EventsInterface],\n  \n  initializePost: function() {\n    //add DOM tooltip\n    if(document.body) {\n      var tip = $('_tooltip') || document.createElement('div');\n      tip.id = '_tooltip';\n      tip.className = 'tip';\n      $.extend(tip.style, {\n        position: 'absolute',\n        display: 'none',\n        zIndex: 13000\n      });\n      document.body.appendChild(tip);\n      this.tip = tip;\n      this.node = false;\n    }\n  },\n  \n  setAsProperty: $.lambda(true),\n  \n  onMouseOut: function(e, win) {\n    //mouseout a label\n    var evt = $.event.get(e, win);\n    if(this.dom && this.isLabel(e, win, true)) {\n      this.hide(true);\n      return;\n    }\n    //mouseout canvas\n    var rt = e.relatedTarget,\n        canvasWidget = this.canvas.getElement();\n    while(rt && rt.parentNode) {\n      if(canvasWidget == rt.parentNode) return;\n      rt = rt.parentNode;\n    }\n    this.hide(false);\n  },\n  \n  onMouseOver: function(e, win) {\n    //mouseover a label\n    var label;\n    if(this.dom && (label = this.isLabel(e, win, false))) {\n      this.node = this.viz.graph.getNode(label.id);\n      this.config.onShow(this.tip, this.node, label);\n    }\n  },\n  \n  onMouseMove: function(e, win, opt) {\n    if(this.dom && this.isLabel(e, win)) {\n      this.setTooltipPosition($.event.getPos(e, win));\n    }\n    if(!this.dom) {\n      var node = opt.getNode();\n      if(!node) {\n        this.hide(true);\n        return;\n      }\n      if(this.config.force || !this.node || this.node.id != node.id) {\n        this.node = node;\n        this.config.onShow(this.tip, node, opt.getContains());\n      }\n      this.setTooltipPosition($.event.getPos(e, win));\n    }\n  },\n  \n  setTooltipPosition: function(pos) {\n    var tip = this.tip, \n        style = tip.style, \n        cont = this.config;\n    style.display = '';\n    //get viewport dimensions\n    var elem = document.compatMode === \"CSS1Compat\" && document.documentElement ||\n               document.body ||\n               document.documentElement;\n    var view = {\n      'width': elem.clientWidth,\n      'height': elem.clientHeight,\n      'x': window.pageXOffset ||\n           document.documentElement && document.documentElement.scrollLeft ||\n           document.body && document.body.scrollLeft ||\n           0,\n      'y': window.pageYOffset ||\n           document.documentElement && document.documentElement.scrollTop ||\n           document.body && document.body.scrollTop ||\n           0\n    };\n    //get tooltip dimensions\n    var obj = {\n      'width': tip.offsetWidth,\n      'height': tip.offsetHeight  \n    };\n    //set tooltip position\n    var x = cont.offsetX, y = cont.offsetY;\n    style.top = ((pos.y + obj.height + y > view.height + view.y)?\n        (pos.y - obj.height - y) : pos.y + y) + 'px';\n    style.left = ((pos.x + obj.width + x > view.width + view.x)?\n        (pos.x - obj.width - x) : pos.x + x) + 'px';\n  },\n  \n  hide: function(triggerCallback) {\n    this.tip.style.display = 'none';\n    triggerCallback && this.config.onHide();\n  }\n});\n\n/*\n  Class: NodeStyles\n   \n  Change node styles when clicking or hovering a node. This class is used internally.\n  \n  Used by:\n  \n  <ST>, <Sunburst>, <Hypertree>, <RGraph>, <TM>, <ForceDirected>, <Icicle>\n  \n  See also:\n  \n  <Options.NodeStyles>\n*/\nExtras.Classes.NodeStyles = new Class({\n  Implements: [ExtrasInitializer, EventsInterface],\n  \n  initializePost: function() {\n    this.fx = this.viz.fx;\n    this.types = this.viz.fx.nodeTypes;\n    this.nStyles = this.config;\n    this.nodeStylesOnHover = this.nStyles.stylesHover;\n    this.nodeStylesOnClick = this.nStyles.stylesClick;\n    this.hoveredNode = false;\n    this.fx.nodeFxAnimation = new Animation();\n    \n    this.down = false;\n    this.move = false;\n  },\n  \n  onMouseOut: function(e, win) {\n    this.down = this.move = false;\n    if(!this.hoveredNode) return;\n    //mouseout a label\n    if(this.dom && this.isLabel(e, win, true)) {\n      this.toggleStylesOnHover(this.hoveredNode, false);\n    }\n    //mouseout canvas\n    var rt = e.relatedTarget,\n        canvasWidget = this.canvas.getElement();\n    while(rt && rt.parentNode) {\n      if(canvasWidget == rt.parentNode) return;\n      rt = rt.parentNode;\n    }\n    this.toggleStylesOnHover(this.hoveredNode, false);\n    this.hoveredNode = false;\n  },\n  \n  onMouseOver: function(e, win) {\n    //mouseover a label\n    var label;\n    if(this.dom && (label = this.isLabel(e, win, true))) {\n      var node = this.viz.graph.getNode(label.id);\n      if(node.selected) return;\n      this.hoveredNode = node;\n      this.toggleStylesOnHover(this.hoveredNode, true);\n    }\n  },\n  \n  onMouseDown: function(e, win, event, isRightClick) {\n    if(isRightClick) return;\n    var label;\n    if(this.dom && (label = this.isLabel(e, win))) {\n      this.down = this.viz.graph.getNode(label.id);\n    } else if(!this.dom) {\n      this.down = event.getNode();\n    }\n    this.move = false;\n  },\n  \n  onMouseUp: function(e, win, event, isRightClick) {\n    if(isRightClick) return;\n    if(!this.move) {\n      this.onClick(event.getNode());\n    }\n    this.down = this.move = false;\n  },\n  \n  getRestoredStyles: function(node, type) {\n    var restoredStyles = {}, \n        nStyles = this['nodeStylesOn' + type];\n    for(var prop in nStyles) {\n      restoredStyles[prop] = node.styles['$' + prop];\n    }\n    return restoredStyles;\n  },\n  \n  toggleStylesOnHover: function(node, set) {\n    if(this.nodeStylesOnHover) {\n      this.toggleStylesOn('Hover', node, set);\n    }\n  },\n\n  toggleStylesOnClick: function(node, set) {\n    if(this.nodeStylesOnClick) {\n      this.toggleStylesOn('Click', node, set);\n    }\n  },\n  \n  toggleStylesOn: function(type, node, set) {\n    var viz = this.viz;\n    var nStyles = this.nStyles;\n    if(set) {\n      var that = this;\n      if(!node.styles) {\n        node.styles = $.merge(node.data, {});\n      }\n      for(var s in this['nodeStylesOn' + type]) {\n        var $s = '$' + s;\n        if(!($s in node.styles)) {\n            node.styles[$s] = node.getData(s); \n        }\n      }\n      viz.fx.nodeFx($.extend({\n        'elements': {\n          'id': node.id,\n          'properties': that['nodeStylesOn' + type]\n         },\n         transition: Trans.Quart.easeOut,\n         duration:300,\n         fps:40\n      }, this.config));\n    } else {\n      var restoredStyles = this.getRestoredStyles(node, type);\n      viz.fx.nodeFx($.extend({\n        'elements': {\n          'id': node.id,\n          'properties': restoredStyles\n         },\n         transition: Trans.Quart.easeOut,\n         duration:300,\n         fps:40\n      }, this.config));\n    }\n  },\n\n  onClick: function(node) {\n    if(!node) return;\n    var nStyles = this.nodeStylesOnClick;\n    if(!nStyles) return;\n    //if the node is selected then unselect it\n    if(node.selected) {\n      this.toggleStylesOnClick(node, false);\n      delete node.selected;\n    } else {\n      //unselect all selected nodes...\n      this.viz.graph.eachNode(function(n) {\n        if(n.selected) {\n          for(var s in nStyles) {\n            n.setData(s, n.styles['$' + s], 'end');\n          }\n          delete n.selected;\n        }\n      });\n      //select clicked node\n      this.toggleStylesOnClick(node, true);\n      node.selected = true;\n      delete node.hovered;\n      this.hoveredNode = false;\n    }\n  },\n  \n  onMouseMove: function(e, win, event) {\n    //if mouse button is down and moving set move=true\n    if(this.down) this.move = true;\n    //already handled by mouseover/out\n    if(this.dom && this.isLabel(e, win)) return;\n    var nStyles = this.nodeStylesOnHover;\n    if(!nStyles) return;\n    \n    if(!this.dom) {\n      if(this.hoveredNode) {\n        var geom = this.types[this.hoveredNode.getData('type')];\n        var contains = geom && geom.contains && geom.contains.call(this.fx, \n            this.hoveredNode, event.getPos());\n        if(contains) return;\n      }\n      var node = event.getNode();\n      //if no node is being hovered then just exit\n      if(!this.hoveredNode && !node) return;\n      //if the node is hovered then exit\n      if(node.hovered) return;\n      //select hovered node\n      if(node && !node.selected) {\n        //check if an animation is running and exit it\n        this.fx.nodeFxAnimation.stopTimer();\n        //unselect all hovered nodes...\n        this.viz.graph.eachNode(function(n) {\n          if(n.hovered && !n.selected) {\n            for(var s in nStyles) {\n              n.setData(s, n.styles['$' + s], 'end');\n            }\n            delete n.hovered;\n          }\n        });\n        //select hovered node\n        node.hovered = true;\n        this.hoveredNode = node;\n        this.toggleStylesOnHover(node, true);\n      } else if(this.hoveredNode && !this.hoveredNode.selected) {\n        //check if an animation is running and exit it\n        this.fx.nodeFxAnimation.stopTimer();\n        //unselect hovered node\n        this.toggleStylesOnHover(this.hoveredNode, false);\n        delete this.hoveredNode.hovered;\n        this.hoveredNode = false;\n      }\n    }\n  }\n});\n\nExtras.Classes.Navigation = new Class({\n  Implements: [ExtrasInitializer, EventsInterface],\n  \n  initializePost: function() {\n    this.pos = false;\n    this.pressed = false;\n  },\n  \n  onMouseWheel: function(e, win, scroll) {\n    if(!this.config.zooming) return;\n    $.event.stop($.event.get(e, win));\n    var val = this.config.zooming / 1000,\n        ans = 1 + scroll * val;\n    this.canvas.scale(ans, ans);\n  },\n  \n  onMouseDown: function(e, win, eventInfo) {\n    if(!this.config.panning) return;\n    e.preventDefault ? e.preventDefault() : e.returnValue = false;\n    $.addClass(this.canvas.getElement(), 'grabbing');\n    if(this.config.panning == 'avoid nodes' && (this.dom? this.isLabel(e, win) : (eventInfo.getNode() || eventInfo.getEdge()))) return;\n    this.pressed = true;\n    this.pos = eventInfo.getPos();\n    var canvas = this.canvas,\n        ox = canvas.translateOffsetX,\n        oy = canvas.translateOffsetY,\n        sx = canvas.scaleOffsetX,\n        sy = canvas.scaleOffsetY;\n    this.pos.x *= sx;\n    this.pos.x += ox;\n    this.pos.y *= sy;\n    this.pos.y += oy;\n  },\n  \n  onMouseMove: function(e, win, eventInfo) {\n    if(!this.config.panning) return;\n    if(!this.pressed) return;\n    if(this.config.panning == 'avoid nodes' && (this.dom? this.isLabel(e, win) : eventInfo.getNode())) return;\n    var thispos = this.pos, \n        currentPos = eventInfo.getPos(),\n        canvas = this.canvas,\n        ox = canvas.translateOffsetX,\n        oy = canvas.translateOffsetY,\n        sx = canvas.scaleOffsetX,\n        sy = canvas.scaleOffsetY;\n    currentPos.x *= sx;\n    currentPos.y *= sy;\n    currentPos.x += ox;\n    currentPos.y += oy;\n    var x = currentPos.x - thispos.x,\n        y = currentPos.y - thispos.y;\n    this.pos = currentPos;\n    this.canvas.translate(x * 1/sx, y * 1/sy);\n  },\n  \n  onMouseUp: function(e, win, eventInfo, isRightClick) {\n    if(!this.config.panning) return;\n    $.removeClass(this.canvas.getElement(), 'grabbing');\n    this.pressed = false;\n  }\n});\n\n\n/*\n * File: Canvas.js\n *\n */\n\n/*\n Class: Canvas\n \n \tA canvas widget used by all visualizations. The canvas object can be accessed by doing *viz.canvas*. If you want to \n \tknow more about <Canvas> options take a look at <Options.Canvas>.\n \n A canvas widget is a set of DOM elements that wrap the native canvas DOM Element providing a consistent API and behavior \n across all browsers. It can also include Elements to add DOM (SVG or HTML) label support to all visualizations.\n \n Example:\n \n Suppose we have this HTML\n \n (start code xml)\n \t<div id=\"infovis\"></div>\n (end code)\n \n Now we create a new Visualization\n \n (start code js)\n \tvar viz = new $jit.Viz({\n \t\t//Where to inject the canvas. Any div container will do.\n \t\t'injectInto':'infovis',\n\t\t //width and height for canvas. \n\t\t //Default's to the container offsetWidth and Height.\n\t\t 'width': 900,\n\t\t 'height':500\n\t });\n (end code)\n\n The generated HTML will look like this\n \n (start code xml)\n <div id=\"infovis\">\n \t<div id=\"infovis-canvaswidget\" style=\"position:relative;\">\n \t<canvas id=\"infovis-canvas\" width=900 height=500\n \tstyle=\"position:absolute; top:0; left:0; width:900px; height:500px;\" />\n \t<div id=\"infovis-label\"\n \tstyle=\"overflow:visible; position:absolute; top:0; left:0; width:900px; height:0px\">\n \t</div>\n \t</div>\n </div>\n (end code)\n \n As you can see, the generated HTML consists of a canvas DOM Element of id *infovis-canvas* and a div label container\n of id *infovis-label*, wrapped in a main div container of id *infovis-canvaswidget*.\n */\n\nvar Canvas;\n(function() {\n  //check for native canvas support\n  var canvasType = typeof HTMLCanvasElement,\n      supportsCanvas = (canvasType == 'object' || canvasType == 'function');\n  //create element function\n  function $E(tag, props) {\n    var elem = document.createElement(tag);\n    for(var p in props) {\n      if(typeof props[p] == \"object\") {\n        $.extend(elem[p], props[p]);\n      } else {\n        elem[p] = props[p];\n      }\n    }\n    if (tag == \"canvas\" && !supportsCanvas && G_vmlCanvasManager) {\n      elem = G_vmlCanvasManager.initElement(document.body.appendChild(elem));\n    }\n    return elem;\n  }\n  //canvas widget which we will call just Canvas\n  $jit.Canvas = Canvas = new Class({\n    canvases: [],\n    pos: false,\n    element: false,\n    labelContainer: false,\n    translateOffsetX: 0,\n    translateOffsetY: 0,\n    scaleOffsetX: 1,\n    scaleOffsetY: 1,\n    \n    initialize: function(viz, opt) {\n      this.viz = viz;\n      this.opt = this.config = opt;\n      var id = $.type(opt.injectInto) == 'string'? \n          opt.injectInto:opt.injectInto.id,\n          type = opt.type,\n          idLabel = id + \"-label\", \n          wrapper = $(id),\n          width = opt.width || wrapper.offsetWidth,\n          height = opt.height || wrapper.offsetHeight;\n      this.id = id;\n      //canvas options\n      var canvasOptions = {\n        injectInto: id,\n        width: width,\n        height: height\n      };\n      //create main wrapper\n      this.element = $E('div', {\n        'id': id + '-canvaswidget',\n        'style': {\n          'position': 'relative',\n          'width': width + 'px',\n          'height': height + 'px'\n        }\n      });\n      //create label container\n      this.labelContainer = this.createLabelContainer(opt.Label.type, \n          idLabel, canvasOptions);\n      //create primary canvas\n      this.canvases.push(new Canvas.Base[type]({\n        config: $.extend({idSuffix: '-canvas'}, canvasOptions),\n        plot: function(base) {\n          viz.fx.plot();\n        },\n        resize: function() {\n          viz.refresh();\n        }\n      }));\n      //create secondary canvas\n      var back = opt.background;\n      if(back) {\n        var backCanvas = new Canvas.Background[back.type](viz, $.extend(back, canvasOptions));\n        this.canvases.push(new Canvas.Base[type](backCanvas));\n      }\n      //insert canvases\n      var len = this.canvases.length;\n      while(len--) {\n        this.element.appendChild(this.canvases[len].canvas);\n        if(len > 0) {\n          this.canvases[len].plot();\n        }\n      }\n      this.element.appendChild(this.labelContainer);\n      wrapper.appendChild(this.element);\n      //Update canvas position when the page is scrolled.\n      var timer = null, that = this;\n      $.addEvent(window, 'scroll', function() {\n        clearTimeout(timer);\n        timer = setTimeout(function() {\n          that.getPos(true); //update canvas position\n        }, 500);\n      });\n    },\n    /*\n      Method: getCtx\n      \n      Returns the main canvas context object\n      \n      Example:\n      \n      (start code js)\n       var ctx = canvas.getCtx();\n       //Now I can use the native canvas context\n       //and for example change some canvas styles\n       ctx.globalAlpha = 1;\n      (end code)\n    */\n    getCtx: function(i) {\n      return this.canvases[i || 0].getCtx();\n    },\n    /*\n      Method: getConfig\n      \n      Returns the current Configuration for this Canvas Widget.\n      \n      Example:\n      \n      (start code js)\n       var config = canvas.getConfig();\n      (end code)\n    */\n    getConfig: function() {\n      return this.opt;\n    },\n    /*\n      Method: getElement\n\n      Returns the main Canvas DOM wrapper\n      \n      Example:\n      \n      (start code js)\n       var wrapper = canvas.getElement();\n       //Returns <div id=\"infovis-canvaswidget\" ... >...</div> as element\n      (end code)\n    */\n    getElement: function() {\n      return this.element;\n    },\n    /*\n      Method: getSize\n      \n      Returns canvas dimensions.\n      \n      Returns:\n      \n      An object with *width* and *height* properties.\n      \n      Example:\n      (start code js)\n      canvas.getSize(); //returns { width: 900, height: 500 }\n      (end code)\n    */\n    getSize: function(i) {\n      return this.canvases[i || 0].getSize();\n    },\n    /*\n      Method: resize\n      \n      Resizes the canvas.\n      \n      Parameters:\n      \n      width - New canvas width.\n      height - New canvas height.\n      \n      Example:\n      \n      (start code js)\n       canvas.resize(width, height);\n      (end code)\n    \n    */\n    resize: function(width, height) {\n      this.getPos(true);\n      this.translateOffsetX = this.translateOffsetY = 0;\n      this.scaleOffsetX = this.scaleOffsetY = 1;\n      for(var i=0, l=this.canvases.length; i<l; i++) {\n        this.canvases[i].resize(width, height);\n      }\n      var style = this.element.style;\n      style.width = width + 'px';\n      style.height = height + 'px';\n      if(this.labelContainer)\n        this.labelContainer.style.width = width + 'px';\n    },\n    /*\n      Method: translate\n      \n      Applies a translation to the canvas.\n      \n      Parameters:\n      \n      x - (number) x offset.\n      y - (number) y offset.\n      disablePlot - (boolean) Default's *false*. Set this to *true* if you don't want to refresh the visualization.\n      \n      Example:\n      \n      (start code js)\n       canvas.translate(30, 30);\n      (end code)\n    \n    */\n    translate: function(x, y, disablePlot) {\n      this.translateOffsetX += x*this.scaleOffsetX;\n      this.translateOffsetY += y*this.scaleOffsetY;\n      for(var i=0, l=this.canvases.length; i<l; i++) {\n        this.canvases[i].translate(x, y, disablePlot);\n      }\n    },\n    /*\n      Method: scale\n      \n      Scales the canvas.\n      \n      Parameters:\n      \n      x - (number) scale value.\n      y - (number) scale value.\n      disablePlot - (boolean) Default's *false*. Set this to *true* if you don't want to refresh the visualization.\n      \n      Example:\n      \n      (start code js)\n       canvas.scale(0.5, 0.5);\n      (end code)\n    \n    */\n    scale: function(x, y, disablePlot) {\n      var px = this.scaleOffsetX * x,\n          py = this.scaleOffsetY * y;\n      var dx = this.translateOffsetX * (x -1) / px,\n          dy = this.translateOffsetY * (y -1) / py;\n      this.scaleOffsetX = px;\n      this.scaleOffsetY = py;\n      for(var i=0, l=this.canvases.length; i<l; i++) {\n        this.canvases[i].scale(x, y, true);\n      }\n      this.translate(dx, dy, false);\n    },\n    /*\n      Method: getZoom\n\n      Returns canvas zooming factors. *1* means initial zoom.\n\n      Returns:\n\n      An object with *x* and *y* properties.\n    */\n    getZoom: function() {\n      return new Complex(this.scaleOffsetX, this.scaleOffsetY);\n    },\n    /*\n      Method: setZoom\n\n      Sets the zoom to given factors. *1* means initial zoom.\n\n      Parameters:\n\n      x - (number) zooming factor\n      y - (number) zooming factor\n      disablePlot - (boolean) Default's *false*. Set this to *true* if you don't want to refresh the visualization.\n\n      Example:\n      (start code js)\n      canvas.setZoom(2, 2); //sets 2x zoom\n      (end code)\n    */\n    setZoom: function(x, y, disablePlot) {\n      var cur = this.getZoom(),\n          px = x / cur.x,\n          py = y / cur.y;\n      this.scale(px, py, disablePlot);\n    },\n    /*\n      Method: getPos\n      \n      Returns the canvas position as an *x, y* object.\n      \n      Parameters:\n      \n      force - (boolean) Default's *false*. Set this to *true* if you want to recalculate the position without using any cache information.\n      \n      Returns:\n      \n      An object with *x* and *y* properties.\n      \n      Example:\n      (start code js)\n      canvas.getPos(true); //returns { x: 900, y: 500 }\n      (end code)\n    */\n    getPos: function(force){\n      if(force || !this.pos) {\n        return this.pos = $.getPos(this.getElement());\n      }\n      return this.pos;\n    },\n    /*\n       Method: clear\n       \n       Clears the canvas.\n    */\n    clear: function(i){\n      this.canvases[i||0].clear();\n    },\n    \n    path: function(type, action){\n      var ctx = this.canvases[0].getCtx();\n      ctx.beginPath();\n      action(ctx);\n      ctx[type]();\n      ctx.closePath();\n    },\n    \n    createLabelContainer: function(type, idLabel, dim) {\n      var NS = 'http://www.w3.org/2000/svg';\n      if(type == 'HTML' || type == 'Native') {\n        return $E('div', {\n          'id': idLabel,\n          'style': {\n            'overflow': 'visible',\n            'position': 'absolute',\n            'top': 0,\n            'left': 0,\n            'width': dim.width + 'px',\n            'height': 0\n          }\n        });\n      } else if(type == 'SVG') {\n        var svgContainer = document.createElementNS(NS, 'svg:svg');\n        svgContainer.setAttribute(\"width\", dim.width);\n        svgContainer.setAttribute('height', dim.height);\n        var style = svgContainer.style;\n        style.position = 'absolute';\n        style.left = style.top = '0px';\n        var labelContainer = document.createElementNS(NS, 'svg:g');\n        labelContainer.setAttribute('width', dim.width);\n        labelContainer.setAttribute('height', dim.height);\n        labelContainer.setAttribute('x', 0);\n        labelContainer.setAttribute('y', 0);\n        labelContainer.setAttribute('id', idLabel);\n        svgContainer.appendChild(labelContainer);\n        return svgContainer;\n      }\n    }\n  });\n  //base canvas wrapper\n  Canvas.Base = {};\n  Canvas.Base['2D'] = new Class({\n    translateOffsetX: 0,\n    translateOffsetY: 0,\n    scaleOffsetX: 1,\n    scaleOffsetY: 1,\n\n    initialize: function(viz) {\n      this.viz = viz;\n      this.opt = viz.config;\n      this.size = false;\n      this.createCanvas();\n      this.translateToCenter();\n    },\n    createCanvas: function() {\n      var opt = this.opt,\n          width = opt.width,\n          height = opt.height;\n      this.canvas = $E('canvas', {\n        'id': opt.injectInto + opt.idSuffix,\n        'width': width,\n        'height': height,\n        'style': {\n          'position': 'absolute',\n          'top': 0,\n          'left': 0,\n          'width': width + 'px',\n          'height': height + 'px'\n        }\n      });\n    },\n    getCtx: function() {\n      if(!this.ctx) \n        return this.ctx = this.canvas.getContext('2d');\n      return this.ctx;\n    },\n    getSize: function() {\n      if(this.size) return this.size;\n      var canvas = this.canvas;\n      return this.size = {\n        width: canvas.width,\n        height: canvas.height\n      };\n    },\n    translateToCenter: function(ps) {\n      var size = this.getSize(),\n          width = ps? (size.width - ps.width - this.translateOffsetX*2) : size.width;\n          height = ps? (size.height - ps.height - this.translateOffsetY*2) : size.height;\n      var ctx = this.getCtx();\n      ps && ctx.scale(1/this.scaleOffsetX, 1/this.scaleOffsetY);\n      ctx.translate(width/2, height/2);\n    },\n    resize: function(width, height) {\n      var size = this.getSize(),\n          canvas = this.canvas,\n          styles = canvas.style;\n      this.size = false;\n      canvas.width = width;\n      canvas.height = height;\n      styles.width = width + \"px\";\n      styles.height = height + \"px\";\n      //small ExCanvas fix\n      if(!supportsCanvas) {\n        this.translateToCenter(size);\n      } else {\n        this.translateToCenter();\n      }\n      this.translateOffsetX =\n        this.translateOffsetY = 0;\n      this.scaleOffsetX = \n        this.scaleOffsetY = 1;\n      this.clear();\n      this.viz.resize(width, height, this);\n    },\n    translate: function(x, y, disablePlot) {\n      var sx = this.scaleOffsetX,\n          sy = this.scaleOffsetY;\n      this.translateOffsetX += x*sx;\n      this.translateOffsetY += y*sy;\n      this.getCtx().translate(x, y);\n      !disablePlot && this.plot();\n    },\n    scale: function(x, y, disablePlot) {\n      this.scaleOffsetX *= x;\n      this.scaleOffsetY *= y;\n      this.getCtx().scale(x, y);\n      !disablePlot && this.plot();\n    },\n    clear: function(){\n      var size = this.getSize(),\n          ox = this.translateOffsetX,\n          oy = this.translateOffsetY,\n          sx = this.scaleOffsetX,\n          sy = this.scaleOffsetY;\n      this.getCtx().clearRect((-size.width / 2 - ox) * 1/sx, \n                              (-size.height / 2 - oy) * 1/sy, \n                              size.width * 1/sx, size.height * 1/sy);\n    },\n    plot: function() {\n      this.clear();\n      this.viz.plot(this);\n    }\n  });\n  //background canvases\n  //TODO(nico): document this!\n  Canvas.Background = {};\n  Canvas.Background.Circles = new Class({\n    initialize: function(viz, options) {\n      this.viz = viz;\n      this.config = $.merge({\n        idSuffix: '-bkcanvas',\n        levelDistance: 100,\n        numberOfCircles: 6,\n        CanvasStyles: {},\n        offset: 0\n      }, options);\n    },\n    resize: function(width, height, base) {\n      this.plot(base);\n    },\n    plot: function(base) {\n      var canvas = base.canvas,\n          ctx = base.getCtx(),\n          conf = this.config,\n          styles = conf.CanvasStyles;\n      //set canvas styles\n      for(var s in styles) ctx[s] = styles[s];\n      var n = conf.numberOfCircles,\n          rho = conf.levelDistance;\n      for(var i=1; i<=n; i++) {\n        ctx.beginPath();\n        ctx.arc(0, 0, rho * i, 0, 2 * Math.PI, false);\n        ctx.stroke();\n        ctx.closePath();\n      }\n      //TODO(nico): print labels too!\n    }\n  });\n})();\n\n\n/*\n * File: Polar.js\n * \n * Defines the <Polar> class.\n *\n * Description:\n *\n * The <Polar> class, just like the <Complex> class, is used by the <Hypertree>, <ST> and <RGraph> as a 2D point representation.\n *\n * See also:\n *\n * <http://en.wikipedia.org/wiki/Polar_coordinates>\n *\n*/\n\n/*\n   Class: Polar\n\n   A multi purpose polar representation.\n\n   Description:\n \n   The <Polar> class, just like the <Complex> class, is used by the <Hypertree>, <ST> and <RGraph> as a 2D point representation.\n \n   See also:\n \n   <http://en.wikipedia.org/wiki/Polar_coordinates>\n \n   Parameters:\n\n      theta - An angle.\n      rho - The norm.\n*/\n\nvar Polar = function(theta, rho) {\n  this.theta = theta || 0;\n  this.rho = rho || 0;\n};\n\n$jit.Polar = Polar;\n\nPolar.prototype = {\n    /*\n       Method: getc\n    \n       Returns a complex number.\n    \n       Parameters:\n\n       simple - _optional_ If *true*, this method will return only an object holding x and y properties and not a <Complex> instance. Default's *false*.\n\n      Returns:\n    \n          A complex number.\n    */\n    getc: function(simple) {\n        return this.toComplex(simple);\n    },\n\n    /*\n       Method: getp\n    \n       Returns a <Polar> representation.\n    \n       Returns:\n    \n          A variable in polar coordinates.\n    */\n    getp: function() {\n        return this;\n    },\n\n\n    /*\n       Method: set\n    \n       Sets a number.\n\n       Parameters:\n\n       v - A <Complex> or <Polar> instance.\n    \n    */\n    set: function(v) {\n        v = v.getp();\n        this.theta = v.theta; this.rho = v.rho;\n    },\n\n    /*\n       Method: setc\n    \n       Sets a <Complex> number.\n\n       Parameters:\n\n       x - A <Complex> number real part.\n       y - A <Complex> number imaginary part.\n    \n    */\n    setc: function(x, y) {\n        this.rho = Math.sqrt(x * x + y * y);\n        this.theta = Math.atan2(y, x);\n        if(this.theta < 0) this.theta += Math.PI * 2;\n    },\n\n    /*\n       Method: setp\n    \n       Sets a polar number.\n\n       Parameters:\n\n       theta - A <Polar> number angle property.\n       rho - A <Polar> number rho property.\n    \n    */\n    setp: function(theta, rho) {\n        this.theta = theta; \n        this.rho = rho;\n    },\n\n    /*\n       Method: clone\n    \n       Returns a copy of the current object.\n    \n       Returns:\n    \n          A copy of the real object.\n    */\n    clone: function() {\n        return new Polar(this.theta, this.rho);\n    },\n\n    /*\n       Method: toComplex\n    \n        Translates from polar to cartesian coordinates and returns a new <Complex> instance.\n    \n        Parameters:\n\n        simple - _optional_ If *true* this method will only return an object with x and y properties (and not the whole <Complex> instance). Default's *false*.\n \n        Returns:\n    \n          A new <Complex> instance.\n    */\n    toComplex: function(simple) {\n        var x = Math.cos(this.theta) * this.rho;\n        var y = Math.sin(this.theta) * this.rho;\n        if(simple) return { 'x': x, 'y': y};\n        return new Complex(x, y);\n    },\n\n    /*\n       Method: add\n    \n        Adds two <Polar> instances.\n    \n       Parameters:\n\n       polar - A <Polar> number.\n\n       Returns:\n    \n          A new Polar instance.\n    */\n    add: function(polar) {\n        return new Polar(this.theta + polar.theta, this.rho + polar.rho);\n    },\n    \n    /*\n       Method: scale\n    \n        Scales a polar norm.\n    \n        Parameters:\n\n        number - A scale factor.\n        \n        Returns:\n    \n          A new Polar instance.\n    */\n    scale: function(number) {\n        return new Polar(this.theta, this.rho * number);\n    },\n    \n    /*\n       Method: equals\n    \n       Comparison method.\n\n       Returns *true* if the theta and rho properties are equal.\n\n       Parameters:\n\n       c - A <Polar> number.\n\n       Returns:\n\n       *true* if the theta and rho parameters for these objects are equal. *false* otherwise.\n    */\n    equals: function(c) {\n        return this.theta == c.theta && this.rho == c.rho;\n    },\n    \n    /*\n       Method: $add\n    \n        Adds two <Polar> instances affecting the current object.\n    \n       Paramters:\n\n       polar - A <Polar> instance.\n\n       Returns:\n    \n          The changed object.\n    */\n    $add: function(polar) {\n        this.theta = this.theta + polar.theta; this.rho += polar.rho;\n        return this;\n    },\n\n    /*\n       Method: $madd\n    \n        Adds two <Polar> instances affecting the current object. The resulting theta angle is modulo 2pi.\n    \n       Parameters:\n\n       polar - A <Polar> instance.\n\n       Returns:\n    \n          The changed object.\n    */\n    $madd: function(polar) {\n        this.theta = (this.theta + polar.theta) % (Math.PI * 2); this.rho += polar.rho;\n        return this;\n    },\n\n    \n    /*\n       Method: $scale\n    \n        Scales a polar instance affecting the object.\n    \n      Parameters:\n\n      number - A scaling factor.\n\n      Returns:\n    \n          The changed object.\n    */\n    $scale: function(number) {\n        this.rho *= number;\n        return this;\n    },\n    \n    /*\n      Method: isZero\n   \n      Returns *true* if the number is zero.\n   \n   */\n    isZero: function () {\n      var almostZero = 0.0001, abs = Math.abs;\n      return abs(this.theta) < almostZero && abs(this.rho) < almostZero;\n    },\n\n    /*\n       Method: interpolate\n    \n        Calculates a polar interpolation between two points at a given delta moment.\n\n        Parameters:\n      \n        elem - A <Polar> instance.\n        delta - A delta factor ranging [0, 1].\n    \n       Returns:\n    \n          A new <Polar> instance representing an interpolation between _this_ and _elem_\n    */\n    interpolate: function(elem, delta) {\n        var pi = Math.PI, pi2 = pi * 2;\n        var ch = function(t) {\n            var a =  (t < 0)? (t % pi2) + pi2 : t % pi2;\n            return a;\n        };\n        var tt = this.theta, et = elem.theta;\n        var sum, diff = Math.abs(tt - et);\n        if(diff == pi) {\n          if(tt > et) {\n            sum = ch((et + ((tt - pi2) - et) * delta)) ;\n          } else {\n            sum = ch((et - pi2 + (tt - (et)) * delta));\n          }\n        } else if(diff >= pi) {\n          if(tt > et) {\n            sum = ch((et + ((tt - pi2) - et) * delta)) ;\n          } else {\n            sum = ch((et - pi2 + (tt - (et - pi2)) * delta));\n          }\n        } else {  \n          sum = ch((et + (tt - et) * delta)) ;\n        }\n        var r = (this.rho - elem.rho) * delta + elem.rho;\n        return {\n          'theta': sum,\n          'rho': r\n        };\n    }\n};\n\n\nvar $P = function(a, b) { return new Polar(a, b); };\n\nPolar.KER = $P(0, 0);\n\n\n\n/*\n * File: Complex.js\n * \n * Defines the <Complex> class.\n *\n * Description:\n *\n * The <Complex> class, just like the <Polar> class, is used by the <Hypertree>, <ST> and <RGraph> as a 2D point representation.\n *\n * See also:\n *\n * <http://en.wikipedia.org/wiki/Complex_number>\n *\n*/\n\n/*\n   Class: Complex\n    \n   A multi-purpose Complex Class with common methods.\n \n   Description:\n \n   The <Complex> class, just like the <Polar> class, is used by the <Hypertree>, <ST> and <RGraph> as a 2D point representation.\n \n   See also:\n \n   <http://en.wikipedia.org/wiki/Complex_number>\n\n   Parameters:\n\n   x - _optional_ A Complex number real part.\n   y - _optional_ A Complex number imaginary part.\n \n*/\n\nvar Complex = function(x, y) {\n  this.x = x || 0;\n  this.y = y || 0;\n};\n\n$jit.Complex = Complex;\n\nComplex.prototype = {\n    /*\n       Method: getc\n    \n       Returns a complex number.\n    \n       Returns:\n    \n          A complex number.\n    */\n    getc: function() {\n        return this;\n    },\n\n    /*\n       Method: getp\n    \n       Returns a <Polar> representation of this number.\n    \n       Parameters:\n\n       simple - _optional_ If *true*, this method will return only an object holding theta and rho properties and not a <Polar> instance. Default's *false*.\n\n       Returns:\n    \n          A variable in <Polar> coordinates.\n    */\n    getp: function(simple) {\n        return this.toPolar(simple);\n    },\n\n\n    /*\n       Method: set\n    \n       Sets a number.\n\n       Parameters:\n\n       c - A <Complex> or <Polar> instance.\n    \n    */\n    set: function(c) {\n      c = c.getc(true);\n      this.x = c.x; \n      this.y = c.y;\n    },\n\n    /*\n       Method: setc\n    \n       Sets a complex number.\n\n       Parameters:\n\n       x - A <Complex> number Real part.\n       y - A <Complex> number Imaginary part.\n    \n    */\n    setc: function(x, y) {\n        this.x = x; \n        this.y = y;\n    },\n\n    /*\n       Method: setp\n    \n       Sets a polar number.\n\n       Parameters:\n\n       theta - A <Polar> number theta property.\n       rho - A <Polar> number rho property.\n    \n    */\n    setp: function(theta, rho) {\n        this.x = Math.cos(theta) * rho;\n        this.y = Math.sin(theta) * rho;\n    },\n\n    /*\n       Method: clone\n    \n       Returns a copy of the current object.\n    \n       Returns:\n    \n          A copy of the real object.\n    */\n    clone: function() {\n        return new Complex(this.x, this.y);\n    },\n\n    /*\n       Method: toPolar\n    \n       Transforms cartesian to polar coordinates.\n    \n       Parameters:\n\n       simple - _optional_ If *true* this method will only return an object with theta and rho properties (and not the whole <Polar> instance). Default's *false*.\n       \n       Returns:\n    \n          A new <Polar> instance.\n    */\n    \n    toPolar: function(simple) {\n        var rho = this.norm();\n        var atan = Math.atan2(this.y, this.x);\n        if(atan < 0) atan += Math.PI * 2;\n        if(simple) return { 'theta': atan, 'rho': rho };\n        return new Polar(atan, rho);\n    },\n    /*\n       Method: norm\n    \n       Calculates a <Complex> number norm.\n    \n       Returns:\n    \n          A real number representing the complex norm.\n    */\n    norm: function () {\n        return Math.sqrt(this.squaredNorm());\n    },\n    \n    /*\n       Method: squaredNorm\n    \n       Calculates a <Complex> number squared norm.\n    \n       Returns:\n    \n          A real number representing the complex squared norm.\n    */\n    squaredNorm: function () {\n        return this.x*this.x + this.y*this.y;\n    },\n\n    /*\n       Method: add\n    \n       Returns the result of adding two complex numbers.\n       \n       Does not alter the original object.\n\n       Parameters:\n    \n          pos - A <Complex> instance.\n    \n       Returns:\n    \n         The result of adding two complex numbers.\n    */\n    add: function(pos) {\n        return new Complex(this.x + pos.x, this.y + pos.y);\n    },\n\n    /*\n       Method: prod\n    \n       Returns the result of multiplying two <Complex> numbers.\n       \n       Does not alter the original object.\n\n       Parameters:\n    \n          pos - A <Complex> instance.\n    \n       Returns:\n    \n         The result of multiplying two complex numbers.\n    */\n    prod: function(pos) {\n        return new Complex(this.x*pos.x - this.y*pos.y, this.y*pos.x + this.x*pos.y);\n    },\n\n    /*\n       Method: conjugate\n    \n       Returns the conjugate of this <Complex> number.\n\n       Does not alter the original object.\n\n       Returns:\n    \n         The conjugate of this <Complex> number.\n    */\n    conjugate: function() {\n        return new Complex(this.x, -this.y);\n    },\n\n\n    /*\n       Method: scale\n    \n       Returns the result of scaling a <Complex> instance.\n       \n       Does not alter the original object.\n\n       Parameters:\n    \n          factor - A scale factor.\n    \n       Returns:\n    \n         The result of scaling this complex to a factor.\n    */\n    scale: function(factor) {\n        return new Complex(this.x * factor, this.y * factor);\n    },\n\n    /*\n       Method: equals\n    \n       Comparison method.\n\n       Returns *true* if both real and imaginary parts are equal.\n\n       Parameters:\n\n       c - A <Complex> instance.\n\n       Returns:\n\n       A boolean instance indicating if both <Complex> numbers are equal.\n    */\n    equals: function(c) {\n        return this.x == c.x && this.y == c.y;\n    },\n\n    /*\n       Method: $add\n    \n       Returns the result of adding two <Complex> numbers.\n       \n       Alters the original object.\n\n       Parameters:\n    \n          pos - A <Complex> instance.\n    \n       Returns:\n    \n         The result of adding two complex numbers.\n    */\n    $add: function(pos) {\n        this.x += pos.x; this.y += pos.y;\n        return this;    \n    },\n    \n    /*\n       Method: $prod\n    \n       Returns the result of multiplying two <Complex> numbers.\n       \n       Alters the original object.\n\n       Parameters:\n    \n          pos - A <Complex> instance.\n    \n       Returns:\n    \n         The result of multiplying two complex numbers.\n    */\n    $prod:function(pos) {\n        var x = this.x, y = this.y;\n        this.x = x*pos.x - y*pos.y;\n        this.y = y*pos.x + x*pos.y;\n        return this;\n    },\n    \n    /*\n       Method: $conjugate\n    \n       Returns the conjugate for this <Complex>.\n       \n       Alters the original object.\n\n       Returns:\n    \n         The conjugate for this complex.\n    */\n    $conjugate: function() {\n        this.y = -this.y;\n        return this;\n    },\n    \n    /*\n       Method: $scale\n    \n       Returns the result of scaling a <Complex> instance.\n       \n       Alters the original object.\n\n       Parameters:\n    \n          factor - A scale factor.\n    \n       Returns:\n    \n         The result of scaling this complex to a factor.\n    */\n    $scale: function(factor) {\n        this.x *= factor; this.y *= factor;\n        return this;\n    },\n    \n    /*\n       Method: $div\n    \n       Returns the division of two <Complex> numbers.\n       \n       Alters the original object.\n\n       Parameters:\n    \n          pos - A <Complex> number.\n    \n       Returns:\n    \n         The result of scaling this complex to a factor.\n    */\n    $div: function(pos) {\n        var x = this.x, y = this.y;\n        var sq = pos.squaredNorm();\n        this.x = x * pos.x + y * pos.y; this.y = y * pos.x - x * pos.y;\n        return this.$scale(1 / sq);\n    },\n\n    /*\n      Method: isZero\n   \n      Returns *true* if the number is zero.\n   \n   */\n    isZero: function () {\n      var almostZero = 0.0001, abs = Math.abs;\n      return abs(this.x) < almostZero && abs(this.y) < almostZero;\n    }\n};\n\nvar $C = function(a, b) { return new Complex(a, b); };\n\nComplex.KER = $C(0, 0);\nComplex.IM = $C(0, 1);\n\n\n\n/*\n * File: Graph.js\n *\n*/\n\n/*\n Class: Graph\n\n A Graph Class that provides useful manipulation functions. You can find more manipulation methods in the <Graph.Util> object.\n\n An instance of this class can be accessed by using the *graph* parameter of any tree or graph visualization.\n \n Example:\n\n (start code js)\n   //create new visualization\n   var viz = new $jit.Viz(options);\n   //load JSON data\n   viz.loadJSON(json);\n   //access model\n   viz.graph; //<Graph> instance\n (end code)\n \n Implements:\n \n The following <Graph.Util> methods are implemented in <Graph>\n \n  - <Graph.Util.getNode>\n  - <Graph.Util.eachNode>\n  - <Graph.Util.computeLevels>\n  - <Graph.Util.eachBFS>\n  - <Graph.Util.clean>\n  - <Graph.Util.getClosestNodeToPos>\n  - <Graph.Util.getClosestNodeToOrigin>\n \n*/  \n\n$jit.Graph = new Class({\n\n  initialize: function(opt, Node, Edge, Label) {\n    var innerOptions = {\n    'klass': Complex,\n    'Node': {}\n    };\n    this.Node = Node;\n    this.Edge = Edge;\n    this.Label = Label;\n    this.opt = $.merge(innerOptions, opt || {});\n    this.nodes = {};\n    this.edges = {};\n    \n    //add nodeList methods\n    var that = this;\n    this.nodeList = {};\n    for(var p in Accessors) {\n      that.nodeList[p] = (function(p) {\n        return function() {\n          var args = Array.prototype.slice.call(arguments);\n          that.eachNode(function(n) {\n            n[p].apply(n, args);\n          });\n        };\n      })(p);\n    }\n\n },\n\n/*\n     Method: getNode\n    \n     Returns a <Graph.Node> by *id*.\n\n     Parameters:\n\n     id - (string) A <Graph.Node> id.\n\n     Example:\n\n     (start code js)\n       var node = graph.getNode('nodeId');\n     (end code)\n*/  \n getNode: function(id) {\n    if(this.hasNode(id)) return this.nodes[id];\n    return false;\n },\n\n /*\n     Method: get\n    \n     An alias for <Graph.Util.getNode>. Returns a node by *id*.\n    \n     Parameters:\n    \n     id - (string) A <Graph.Node> id.\n    \n     Example:\n    \n     (start code js)\n       var node = graph.get('nodeId');\n     (end code)\n*/  \n  get: function(id) {\n    return this.getNode(id);\n  },\n\n /*\n   Method: getByName\n  \n   Returns a <Graph.Node> by *name*.\n  \n   Parameters:\n  \n   name - (string) A <Graph.Node> name.\n  \n   Example:\n  \n   (start code js)\n     var node = graph.getByName('someName');\n   (end code)\n  */  \n  getByName: function(name) {\n    for(var id in this.nodes) {\n      var n = this.nodes[id];\n      if(n.name == name) return n;\n    }\n    return false;\n  },\n\n/*\n   Method: getAdjacence\n  \n   Returns a <Graph.Adjacence> object connecting nodes with ids *id* and *id2*.\n\n   Parameters:\n\n   id - (string) A <Graph.Node> id.\n   id2 - (string) A <Graph.Node> id.\n*/  \n  getAdjacence: function (id, id2) {\n    if(id in this.edges) {\n      return this.edges[id][id2];\n    }\n    return false;\n },\n\n    /*\n     Method: addNode\n    \n     Adds a node.\n     \n     Parameters:\n    \n      obj - An object with the properties described below\n\n      id - (string) A node id\n      name - (string) A node's name\n      data - (object) A node's data hash\n\n    See also:\n    <Graph.Node>\n\n  */  \n  addNode: function(obj) { \n   if(!this.nodes[obj.id]) {  \n     var edges = this.edges[obj.id] = {};\n     this.nodes[obj.id] = new Graph.Node($.extend({\n        'id': obj.id,\n        'name': obj.name,\n        'data': $.merge(obj.data || {}, {}),\n        'adjacencies': edges \n      }, this.opt.Node), \n      this.opt.klass, \n      this.Node, \n      this.Edge,\n      this.Label);\n    }\n    return this.nodes[obj.id];\n  },\n  \n    /*\n     Method: addAdjacence\n    \n     Connects nodes specified by *obj* and *obj2*. If not found, nodes are created.\n     \n     Parameters:\n    \n      obj - (object) A <Graph.Node> object.\n      obj2 - (object) Another <Graph.Node> object.\n      data - (object) A data object. Used to store some extra information in the <Graph.Adjacence> object created.\n\n    See also:\n\n    <Graph.Node>, <Graph.Adjacence>\n    */  \n  addAdjacence: function (obj, obj2, data) {\n    if(!this.hasNode(obj.id)) { this.addNode(obj); }\n    if(!this.hasNode(obj2.id)) { this.addNode(obj2); }\n    obj = this.nodes[obj.id]; obj2 = this.nodes[obj2.id];\n    if(!obj.adjacentTo(obj2)) {\n      var adjsObj = this.edges[obj.id] = this.edges[obj.id] || {};\n      var adjsObj2 = this.edges[obj2.id] = this.edges[obj2.id] || {};\n      adjsObj[obj2.id] = adjsObj2[obj.id] = new Graph.Adjacence(obj, obj2, data, this.Edge, this.Label);\n      return adjsObj[obj2.id];\n    }\n    return this.edges[obj.id][obj2.id];\n },\n\n    /*\n     Method: removeNode\n    \n     Removes a <Graph.Node> matching the specified *id*.\n\n     Parameters:\n\n     id - (string) A node's id.\n\n    */  \n  removeNode: function(id) {\n    if(this.hasNode(id)) {\n      delete this.nodes[id];\n      var adjs = this.edges[id];\n      for(var to in adjs) {\n        delete this.edges[to][id];\n      }\n      delete this.edges[id];\n    }\n  },\n  \n/*\n     Method: removeAdjacence\n    \n     Removes a <Graph.Adjacence> matching *id1* and *id2*.\n\n     Parameters:\n\n     id1 - (string) A <Graph.Node> id.\n     id2 - (string) A <Graph.Node> id.\n*/  \n  removeAdjacence: function(id1, id2) {\n    delete this.edges[id1][id2];\n    delete this.edges[id2][id1];\n  },\n\n   /*\n     Method: hasNode\n    \n     Returns a boolean indicating if the node belongs to the <Graph> or not.\n     \n     Parameters:\n    \n        id - (string) Node id.\n   */  \n  hasNode: function(id) {\n    return id in this.nodes;\n  },\n  \n  /*\n    Method: empty\n\n    Empties the Graph\n\n  */\n  empty: function() { this.nodes = {}; this.edges = {};}\n\n});\n\nvar Graph = $jit.Graph;\n\n/*\n Object: Accessors\n \n Defines a set of methods for data, canvas and label styles manipulation implemented by <Graph.Node> and <Graph.Adjacence> instances.\n \n */\nvar Accessors;\n\n(function () {\n  var getDataInternal = function(prefix, prop, type, force, prefixConfig) {\n    var data;\n    type = type || 'current';\n    prefix = \"$\" + (prefix ? prefix + \"-\" : \"\");\n\n    if(type == 'current') {\n      data = this.data;\n    } else if(type == 'start') {\n      data = this.startData;\n    } else if(type == 'end') {\n      data = this.endData;\n    }\n\n    var dollar = prefix + prop;\n\n    if(force) {\n      return data[dollar];\n    }\n\n    if(!this.Config.overridable)\n      return prefixConfig[prop] || 0;\n\n    return (dollar in data) ?\n      data[dollar] : ((dollar in this.data) ? this.data[dollar] : (prefixConfig[prop] || 0));\n  }\n\n  var setDataInternal = function(prefix, prop, value, type) {\n    type = type || 'current';\n    prefix = '$' + (prefix ? prefix + '-' : '');\n\n    var data;\n\n    if(type == 'current') {\n      data = this.data;\n    } else if(type == 'start') {\n      data = this.startData;\n    } else if(type == 'end') {\n      data = this.endData;\n    }\n\n    data[prefix + prop] = value;\n  }\n\n  var removeDataInternal = function(prefix, properties) {\n    prefix = '$' + (prefix ? prefix + '-' : '');\n    var that = this;\n    $.each(properties, function(prop) {\n      var pref = prefix + prop;\n      delete that.data[pref];\n      delete that.endData[pref];\n      delete that.startData[pref];\n    });\n  }\n\n  Accessors = {\n    /*\n    Method: getData\n\n    Returns the specified data value property.\n    This is useful for querying special/reserved <Graph.Node> data properties\n    (i.e dollar prefixed properties).\n\n    Parameters:\n\n      prop  - (string) The name of the property. The dollar sign is not needed. For\n              example *getData(width)* will return *data.$width*.\n      type  - (string) The type of the data property queried. Default's \"current\". You can access *start* and *end* \n              data properties also. These properties are used when making animations.\n      force - (boolean) Whether to obtain the true value of the property (equivalent to\n              *data.$prop*) or to check for *node.overridable = true* first.\n\n    Returns:\n\n      The value of the dollar prefixed property or the global Node/Edge property\n      value if *overridable=false*\n\n    Example:\n    (start code js)\n     node.getData('width'); //will return node.data.$width if Node.overridable=true;\n    (end code)\n    */\n    getData: function(prop, type, force) {\n      return getDataInternal.call(this, \"\", prop, type, force, this.Config);\n    },\n\n\n    /*\n    Method: setData\n\n    Sets the current data property with some specific value.\n    This method is only useful for reserved (dollar prefixed) properties.\n\n    Parameters:\n\n      prop  - (string) The name of the property. The dollar sign is not necessary. For\n              example *setData(width)* will set *data.$width*.\n      value - (mixed) The value to store.\n      type  - (string) The type of the data property to store. Default's \"current\" but\n              can also be \"start\" or \"end\".\n\n    Example:\n    \n    (start code js)\n     node.setData('width', 30);\n    (end code)\n    \n    If we were to make an animation of a node/edge width then we could do\n    \n    (start code js)\n      var node = viz.getNode('nodeId');\n      //set start and end values\n      node.setData('width', 10, 'start');\n      node.setData('width', 30, 'end');\n      //will animate nodes width property\n      viz.fx.animate({\n        modes: ['node-property:width'],\n        duration: 1000\n      });\n    (end code)\n    */\n    setData: function(prop, value, type) {\n      setDataInternal.call(this, \"\", prop, value, type);\n    },\n\n    /*\n    Method: setDataset\n\n    Convenience method to set multiple data values at once.\n    \n    Parameters:\n    \n    types - (array|string) A set of 'current', 'end' or 'start' values.\n    obj - (object) A hash containing the names and values of the properties to be altered.\n\n    Example:\n    (start code js)\n      node.setDataset(['current', 'end'], {\n        'width': [100, 5],\n        'color': ['#fff', '#ccc']\n      });\n      //...or also\n      node.setDataset('end', {\n        'width': 5,\n        'color': '#ccc'\n      });\n    (end code)\n    \n    See also: \n    \n    <Accessors.setData>\n    \n    */\n    setDataset: function(types, obj) {\n      types = $.splat(types);\n      for(var attr in obj) {\n        for(var i=0, val = $.splat(obj[attr]), l=types.length; i<l; i++) {\n          this.setData(attr, val[i], types[i]);\n        }\n      }\n    },\n    \n    /*\n    Method: removeData\n\n    Remove data properties.\n\n    Parameters:\n\n    One or more property names as arguments. The dollar sign is not needed.\n\n    Example:\n    (start code js)\n    node.removeData('width'); //now the default width value is returned\n    (end code)\n    */\n    removeData: function() {\n      removeDataInternal.call(this, \"\", Array.prototype.slice.call(arguments));\n    },\n\n    /*\n    Method: getCanvasStyle\n\n    Returns the specified canvas style data value property. This is useful for\n    querying special/reserved <Graph.Node> canvas style data properties (i.e.\n    dollar prefixed properties that match with $canvas-<name of canvas style>).\n\n    Parameters:\n\n      prop  - (string) The name of the property. The dollar sign is not needed. For\n              example *getCanvasStyle(shadowBlur)* will return *data[$canvas-shadowBlur]*.\n      type  - (string) The type of the data property queried. Default's *current*. You can access *start* and *end* \n              data properties also.\n              \n    Example:\n    (start code js)\n      node.getCanvasStyle('shadowBlur');\n    (end code)\n    \n    See also:\n    \n    <Accessors.getData>\n    */\n    getCanvasStyle: function(prop, type, force) {\n      return getDataInternal.call(\n          this, 'canvas', prop, type, force, this.Config.CanvasStyles);\n    },\n\n    /*\n    Method: setCanvasStyle\n\n    Sets the canvas style data property with some specific value.\n    This method is only useful for reserved (dollar prefixed) properties.\n    \n    Parameters:\n    \n    prop - (string) Name of the property. Can be any canvas property like 'shadowBlur', 'shadowColor', 'strokeStyle', etc.\n    value - (mixed) The value to set to the property.\n    type - (string) Default's *current*. Whether to set *start*, *current* or *end* type properties.\n    \n    Example:\n    \n    (start code js)\n     node.setCanvasStyle('shadowBlur', 30);\n    (end code)\n    \n    If we were to make an animation of a node/edge shadowBlur canvas style then we could do\n    \n    (start code js)\n      var node = viz.getNode('nodeId');\n      //set start and end values\n      node.setCanvasStyle('shadowBlur', 10, 'start');\n      node.setCanvasStyle('shadowBlur', 30, 'end');\n      //will animate nodes canvas style property for nodes\n      viz.fx.animate({\n        modes: ['node-style:shadowBlur'],\n        duration: 1000\n      });\n    (end code)\n    \n    See also:\n    \n    <Accessors.setData>.\n    */\n    setCanvasStyle: function(prop, value, type) {\n      setDataInternal.call(this, 'canvas', prop, value, type);\n    },\n\n    /*\n    Method: setCanvasStyles\n\n    Convenience method to set multiple styles at once.\n\n    Parameters:\n    \n    types - (array|string) A set of 'current', 'end' or 'start' values.\n    obj - (object) A hash containing the names and values of the properties to be altered.\n\n    See also:\n    \n    <Accessors.setDataset>.\n    */\n    setCanvasStyles: function(types, obj) {\n      types = $.splat(types);\n      for(var attr in obj) {\n        for(var i=0, val = $.splat(obj[attr]), l=types.length; i<l; i++) {\n          this.setCanvasStyle(attr, val[i], types[i]);\n        }\n      }\n    },\n\n    /*\n    Method: removeCanvasStyle\n\n    Remove canvas style properties from data.\n\n    Parameters:\n    \n    A variable number of canvas style strings.\n\n    See also:\n    \n    <Accessors.removeData>.\n    */\n    removeCanvasStyle: function() {\n      removeDataInternal.call(this, 'canvas', Array.prototype.slice.call(arguments));\n    },\n\n    /*\n    Method: getLabelData\n\n    Returns the specified label data value property. This is useful for\n    querying special/reserved <Graph.Node> label options (i.e.\n    dollar prefixed properties that match with $label-<name of label style>).\n\n    Parameters:\n\n      prop  - (string) The name of the property. The dollar sign prefix is not needed. For\n              example *getLabelData(size)* will return *data[$label-size]*.\n      type  - (string) The type of the data property queried. Default's *current*. You can access *start* and *end* \n              data properties also.\n              \n    See also:\n    \n    <Accessors.getData>.\n    */\n    getLabelData: function(prop, type, force) {\n      return getDataInternal.call(\n          this, 'label', prop, type, force, this.Label);\n    },\n\n    /*\n    Method: setLabelData\n\n    Sets the current label data with some specific value.\n    This method is only useful for reserved (dollar prefixed) properties.\n\n    Parameters:\n    \n    prop - (string) Name of the property. Can be any canvas property like 'shadowBlur', 'shadowColor', 'strokeStyle', etc.\n    value - (mixed) The value to set to the property.\n    type - (string) Default's *current*. Whether to set *start*, *current* or *end* type properties.\n    \n    Example:\n    \n    (start code js)\n     node.setLabelData('size', 30);\n    (end code)\n    \n    If we were to make an animation of a node label size then we could do\n    \n    (start code js)\n      var node = viz.getNode('nodeId');\n      //set start and end values\n      node.setLabelData('size', 10, 'start');\n      node.setLabelData('size', 30, 'end');\n      //will animate nodes label size\n      viz.fx.animate({\n        modes: ['label-property:size'],\n        duration: 1000\n      });\n    (end code)\n    \n    See also:\n    \n    <Accessors.setData>.\n    */\n    setLabelData: function(prop, value, type) {\n      setDataInternal.call(this, 'label', prop, value, type);\n    },\n\n    /*\n    Method: setLabelDataset\n\n    Convenience function to set multiple label data at once.\n\n    Parameters:\n    \n    types - (array|string) A set of 'current', 'end' or 'start' values.\n    obj - (object) A hash containing the names and values of the properties to be altered.\n\n    See also:\n    \n    <Accessors.setDataset>.\n    */\n    setLabelDataset: function(types, obj) {\n      types = $.splat(types);\n      for(var attr in obj) {\n        for(var i=0, val = $.splat(obj[attr]), l=types.length; i<l; i++) {\n          this.setLabelData(attr, val[i], types[i]);\n        }\n      }\n    },\n\n    /*\n    Method: removeLabelData\n\n    Remove label properties from data.\n    \n    Parameters:\n    \n    A variable number of label property strings.\n\n    See also:\n    \n    <Accessors.removeData>.\n    */\n    removeLabelData: function() {\n      removeDataInternal.call(this, 'label', Array.prototype.slice.call(arguments));\n    }\n  };\n})();\n\n/*\n     Class: Graph.Node\n\n     A <Graph> node.\n     \n     Implements:\n     \n     <Accessors> methods.\n     \n     The following <Graph.Util> methods are implemented by <Graph.Node>\n     \n    - <Graph.Util.eachAdjacency>\n    - <Graph.Util.eachLevel>\n    - <Graph.Util.eachSubgraph>\n    - <Graph.Util.eachSubnode>\n    - <Graph.Util.anySubnode>\n    - <Graph.Util.getSubnodes>\n    - <Graph.Util.getParents>\n    - <Graph.Util.isDescendantOf>     \n*/\nGraph.Node = new Class({\n    \n  initialize: function(opt, klass, Node, Edge, Label) {\n    var innerOptions = {\n      'id': '',\n      'name': '',\n      'data': {},\n      'startData': {},\n      'endData': {},\n      'adjacencies': {},\n\n      'selected': false,\n      'drawn': false,\n      'exist': false,\n\n      'angleSpan': {\n        'begin': 0,\n        'end' : 0\n      },\n\n      'pos': new klass,\n      'startPos': new klass,\n      'endPos': new klass\n    };\n    \n    $.extend(this, $.extend(innerOptions, opt));\n    this.Config = this.Node = Node;\n    this.Edge = Edge;\n    this.Label = Label;\n  },\n\n    /*\n       Method: adjacentTo\n    \n       Indicates if the node is adjacent to the node specified by id\n\n       Parameters:\n    \n          id - (string) A node id.\n    \n       Example:\n       (start code js)\n        node.adjacentTo('nodeId') == true;\n       (end code)\n    */\n    adjacentTo: function(node) {\n        return node.id in this.adjacencies;\n    },\n\n    /*\n     Method: adjacentWithDirectionTo\n\n     Indicates if the node has a directed edge to the node specified by id\n\n     Parameters:\n\n     id - (string) A node id.\n\n     Example:\n     (start code js)\n     node.adjacentWithDirectionTo('nodeId') == true;\n     (end code)\n     */\n    adjacentWithDirectionTo: function(node) {\n        var areNeighbors = node.id in this.adjacencies;\n        if (!areNeighbors) {\n            return false;\n        }\n\n        var direction = this.adjacencies[node.id].data.$direction;\n        return direction[0] === this.id ;\n    },\n\n    /*\n       Method: getAdjacency\n    \n       Returns a <Graph.Adjacence> object connecting the current <Graph.Node> and the node having *id* as id.\n\n       Parameters:\n    \n          id - (string) A node id.\n    */  \n    getAdjacency: function(id) {\n        return this.adjacencies[id];\n    },\n\n    /*\n      Method: getPos\n   \n      Returns the position of the node.\n  \n      Parameters:\n   \n         type - (string) Default's *current*. Possible values are \"start\", \"end\" or \"current\".\n   \n      Returns:\n   \n        A <Complex> or <Polar> instance.\n  \n      Example:\n      (start code js)\n       var pos = node.getPos('end');\n      (end code)\n   */\n   getPos: function(type) {\n       type = type || \"current\";\n       if(type == \"current\") {\n         return this.pos;\n       } else if(type == \"end\") {\n         return this.endPos;\n       } else if(type == \"start\") {\n         return this.startPos;\n       }\n   },\n   /*\n     Method: setPos\n  \n     Sets the node's position.\n  \n     Parameters:\n  \n        value - (object) A <Complex> or <Polar> instance.\n        type - (string) Default's *current*. Possible values are \"start\", \"end\" or \"current\".\n  \n     Example:\n     (start code js)\n      node.setPos(new $jit.Complex(0, 0), 'end');\n     (end code)\n  */\n  setPos: function(value, type) {\n      type = type || \"current\";\n      var pos;\n      if(type == \"current\") {\n        pos = this.pos;\n      } else if(type == \"end\") {\n        pos = this.endPos;\n      } else if(type == \"start\") {\n        pos = this.startPos;\n      }\n      pos.set(value);\n  }\n});\n\nGraph.Node.implement(Accessors);\n\n/*\n     Class: Graph.Adjacence\n\n     A <Graph> adjacence (or edge) connecting two <Graph.Nodes>.\n     \n     Implements:\n     \n     <Accessors> methods.\n\n     See also:\n\n     <Graph>, <Graph.Node>\n\n     Properties:\n     \n      nodeFrom - A <Graph.Node> connected by this edge.\n      nodeTo - Another  <Graph.Node> connected by this edge.\n      data - Node data property containing a hash (i.e {}) with custom options.\n*/\nGraph.Adjacence = new Class({\n  \n  initialize: function(nodeFrom, nodeTo, data, Edge, Label) {\n    this.nodeFrom = nodeFrom;\n    this.nodeTo = nodeTo;\n    this.data = data || {};\n    this.startData = {};\n    this.endData = {};\n    this.Config = this.Edge = Edge;\n    this.Label = Label;\n  }\n});\n\nGraph.Adjacence.implement(Accessors);\n\n/*\n   Object: Graph.Util\n\n   <Graph> traversal and processing utility object.\n   \n   Note:\n   \n   For your convenience some of these methods have also been appended to <Graph> and <Graph.Node> classes.\n*/\nGraph.Util = {\n    /*\n       filter\n    \n       For internal use only. Provides a filtering function based on flags.\n    */\n    filter: function(param) {\n        if(!param || !($.type(param) == 'string')) return function() { return true; };\n        var props = param.split(\" \");\n        return function(elem) {\n            for(var i=0; i<props.length; i++) { \n              if(elem[props[i]]) { \n                return false; \n              }\n            }\n            return true;\n        };\n    },\n    /*\n       Method: getNode\n    \n       Returns a <Graph.Node> by *id*.\n       \n       Also implemented by:\n       \n       <Graph>\n\n       Parameters:\n\n       graph - (object) A <Graph> instance.\n       id - (string) A <Graph.Node> id.\n\n       Example:\n\n       (start code js)\n         $jit.Graph.Util.getNode(graph, 'nodeid');\n         //or...\n         graph.getNode('nodeid');\n       (end code)\n    */\n    getNode: function(graph, id) {\n        return graph.nodes[id];\n    },\n    \n    /*\n       Method: eachNode\n    \n       Iterates over <Graph> nodes performing an *action*.\n       \n       Also implemented by:\n       \n       <Graph>.\n\n       Parameters:\n\n       graph - (object) A <Graph> instance.\n       action - (function) A callback function having a <Graph.Node> as first formal parameter.\n\n       Example:\n       (start code js)\n         $jit.Graph.Util.eachNode(graph, function(node) {\n          alert(node.name);\n         });\n         //or...\n         graph.eachNode(function(node) {\n           alert(node.name);\n         });\n       (end code)\n    */\n    eachNode: function(graph, action, flags) {\n        var filter = this.filter(flags);\n        for(var i in graph.nodes) {\n          if(filter(graph.nodes[i])) action(graph.nodes[i]);\n        } \n    },\n    \n    /*\n      Method: each\n   \n      Iterates over <Graph> nodes performing an *action*. It's an alias for <Graph.Util.eachNode>.\n      \n      Also implemented by:\n      \n      <Graph>.\n  \n      Parameters:\n  \n      graph - (object) A <Graph> instance.\n      action - (function) A callback function having a <Graph.Node> as first formal parameter.\n  \n      Example:\n      (start code js)\n        $jit.Graph.Util.each(graph, function(node) {\n         alert(node.name);\n        });\n        //or...\n        graph.each(function(node) {\n          alert(node.name);\n        });\n      (end code)\n   */\n   each: function(graph, action, flags) {\n      this.eachNode(graph, action, flags); \n   },\n\n /*\n       Method: eachAdjacency\n    \n       Iterates over <Graph.Node> adjacencies applying the *action* function.\n       \n       Also implemented by:\n       \n       <Graph.Node>.\n\n       Parameters:\n\n       node - (object) A <Graph.Node>.\n       action - (function) A callback function having <Graph.Adjacence> as first formal parameter.\n\n       Example:\n       (start code js)\n         $jit.Graph.Util.eachAdjacency(node, function(adj) {\n          alert(adj.nodeTo.name);\n         });\n         //or...\n         node.eachAdjacency(function(adj) {\n           alert(adj.nodeTo.name);\n         });\n       (end code)\n    */\n    eachAdjacency: function(node, action, flags) {\n        var adj = node.adjacencies, filter = this.filter(flags);\n        for(var id in adj) {\n          var a = adj[id];\n          if(filter(a)) {\n            if(a.nodeFrom != node) {\n              var tmp = a.nodeFrom;\n              a.nodeFrom = a.nodeTo;\n              a.nodeTo = tmp;\n            }\n            action(a, id);\n          }\n        }\n    },\n\n     /*\n       Method: computeLevels\n    \n       Performs a BFS traversal setting the correct depth for each node.\n        \n       Also implemented by:\n       \n       <Graph>.\n       \n       Note:\n       \n       The depth of each node can then be accessed by \n       >node._depth\n\n       Parameters:\n\n       graph - (object) A <Graph>.\n       id - (string) A starting node id for the BFS traversal.\n       startDepth - (optional|number) A minimum depth value. Default's 0.\n\n    */\n    computeLevels: function(graph, id, startDepth, flags) {\n        startDepth = startDepth || 0;\n        var filter = this.filter(flags);\n        this.eachNode(graph, function(elem) {\n            elem._flag = false;\n            elem._depth = -1;\n        }, flags);\n        var root = graph.getNode(id);\n        root._depth = startDepth;\n        var queue = [root];\n        while(queue.length != 0) {\n            var node = queue.pop();\n            node._flag = true;\n            this.eachAdjacency(node, function(adj) {\n                var n = adj.nodeTo;\n                if(n._flag == false && filter(n) && !adj._hiding) {\n                    if(n._depth < 0) n._depth = node._depth + 1 + startDepth;\n                    queue.unshift(n);\n                }\n            }, flags);\n        }\n    },\n\n    /*\n       Method: eachBFS\n    \n       Performs a BFS traversal applying *action* to each <Graph.Node>.\n       \n       Also implemented by:\n       \n       <Graph>.\n\n       Parameters:\n\n       graph - (object) A <Graph>.\n       id - (string) A starting node id for the BFS traversal.\n       action - (function) A callback function having a <Graph.Node> as first formal parameter.\n\n       Example:\n       (start code js)\n         $jit.Graph.Util.eachBFS(graph, 'mynodeid', function(node) {\n          alert(node.name);\n         });\n         //or...\n         graph.eachBFS('mynodeid', function(node) {\n           alert(node.name);\n         });\n       (end code)\n    */\n    eachBFS: function(graph, id, action, flags) {\n        var filter = this.filter(flags);\n        this.clean(graph);\n        var queue = [graph.getNode(id)];\n        while(queue.length != 0) {\n            var node = queue.pop();\n            if (!node) return;\n            node._flag = true;\n            action(node, node._depth);\n            this.eachAdjacency(node, function(adj) {\n                var n = adj.nodeTo;\n                if(n._flag == false && filter(n) && !adj._hiding) {\n                    n._flag = true;\n                    queue.unshift(n);\n                }\n            }, flags);\n        }\n    },\n    \n    /*\n       Method: eachLevel\n    \n       Iterates over a node's subgraph applying *action* to the nodes of relative depth between *levelBegin* and *levelEnd*.\n       In case you need to break the iteration, *action* should return false.\n       \n       Also implemented by:\n       \n       <Graph.Node>.\n\n       Parameters:\n       \n       node - (object) A <Graph.Node>.\n       levelBegin - (number) A relative level value.\n       levelEnd - (number) A relative level value.\n       action - (function) A callback function having a <Graph.Node> as first formal parameter.\n\n    */\n    eachLevel: function(node, levelBegin, levelEnd, action, flags) {\n        var d = node._depth, filter = this.filter(flags), that = this, shouldContinue = true;\n        levelEnd = levelEnd === false? Number.MAX_VALUE -d : levelEnd;\n        (function loopLevel(node, levelBegin, levelEnd) {\n            if(!shouldContinue) return;\n            var d = node._depth, ret;\n            if(d >= levelBegin && d <= levelEnd && filter(node)) ret = action(node, d);\n            if(typeof ret !== \"undefined\") shouldContinue = ret;\n            if(shouldContinue && d < levelEnd) {\n                that.eachAdjacency(node, function(adj) {\n                    var n = adj.nodeTo;\n                    if(n._depth > d) loopLevel(n, levelBegin, levelEnd);\n                });\n            }\n        })(node, levelBegin + d, levelEnd + d);\n    },\n\n    /*\n       Method: eachSubgraph\n    \n       Iterates over a node's children recursively.\n       \n       Also implemented by:\n       \n       <Graph.Node>.\n\n       Parameters:\n       node - (object) A <Graph.Node>.\n       action - (function) A callback function having a <Graph.Node> as first formal parameter.\n\n       Example:\n       (start code js)\n         $jit.Graph.Util.eachSubgraph(node, function(node) {\n           alert(node.name);\n         });\n         //or...\n         node.eachSubgraph(function(node) {\n           alert(node.name);\n         });\n       (end code)\n    */\n    eachSubgraph: function(node, action, flags) {\n      this.eachLevel(node, 0, false, action, flags);\n    },\n\n    /*\n       Method: eachSubnode\n    \n       Iterates over a node's children (without deeper recursion).\n       \n       Also implemented by:\n       \n       <Graph.Node>.\n       \n       Parameters:\n       node - (object) A <Graph.Node>.\n       action - (function) A callback function having a <Graph.Node> as first formal parameter.\n\n       Example:\n       (start code js)\n         $jit.Graph.Util.eachSubnode(node, function(node) {\n          alert(node.name);\n         });\n         //or...\n         node.eachSubnode(function(node) {\n           alert(node.name);\n         });\n       (end code)\n    */\n    eachSubnode: function(node, action, flags) {\n        this.eachLevel(node, 1, 1, action, flags);\n    },\n\n    /*\n       Method: anySubnode\n    \n       Returns *true* if any subnode matches the given condition.\n       \n       Also implemented by:\n       \n       <Graph.Node>.\n\n       Parameters:\n       node - (object) A <Graph.Node>.\n       cond - (function) A callback function returning a Boolean instance. This function has as first formal parameter a <Graph.Node>.\n\n       Example:\n       (start code js)\n         $jit.Graph.Util.anySubnode(node, function(node) { return node.name == \"mynodename\"; });\n         //or...\n         node.anySubnode(function(node) { return node.name == 'mynodename'; });\n       (end code)\n    */\n    anySubnode: function(node, cond, flags) {\n      var flag = false;\n      cond = cond || $.lambda(true);\n      var c = $.type(cond) == 'string'? function(n) { return n[cond]; } : cond;\n      this.eachSubnode(node, function(elem) {\n        if(c(elem)) flag = true;\n      }, flags);\n      return flag;\n    },\n  \n    /*\n       Method: getSubnodes\n    \n       Collects all subnodes for a specified node. \n       The *level* parameter filters nodes having relative depth of *level* from the root node. \n       \n       Also implemented by:\n       \n       <Graph.Node>.\n\n       Parameters:\n       node - (object) A <Graph.Node>.\n       level - (optional|number) Default's *0*. A starting relative depth for collecting nodes.\n\n       Returns:\n       An array of nodes.\n\n    */\n    getSubnodes: function(node, level, flags) {\n        var ans = [], that = this;\n        level = level || 0;\n        var levelStart, levelEnd;\n        if($.type(level) == 'array') {\n            levelStart = level[0];\n            levelEnd = level[1];\n        } else {\n            levelStart = level;\n            levelEnd = Number.MAX_VALUE - node._depth;\n        }\n        this.eachLevel(node, levelStart, levelEnd, function(n) {\n            ans.push(n);\n        }, flags);\n        return ans;\n    },\n  \n  \n    /*\n       Method: getParents\n    \n       Returns an Array of <Graph.Nodes> which are parents of the given node.\n       \n       Also implemented by:\n       \n       <Graph.Node>.\n\n       Parameters:\n       node - (object) A <Graph.Node>.\n\n       Returns:\n       An Array of <Graph.Nodes>.\n\n       Example:\n       (start code js)\n         var pars = $jit.Graph.Util.getParents(node);\n         //or...\n         var pars = node.getParents();\n         \n         if(pars.length > 0) {\n           //do stuff with parents\n         }\n       (end code)\n    */\n    getParents: function(node) {\n        var ans = [];\n        this.eachAdjacency(node, function(adj) {\n            var n = adj.nodeTo;\n            if(n._depth < node._depth) ans.push(n);\n        });\n        return ans;\n    },\n    \n    /*\n    Method: isDescendantOf\n \n    Returns a boolean indicating if some node is descendant of the node with the given id. \n\n    Also implemented by:\n    \n    <Graph.Node>.\n    \n    \n    Parameters:\n    node - (object) A <Graph.Node>.\n    id - (string) A <Graph.Node> id.\n\n    Example:\n    (start code js)\n      $jit.Graph.Util.isDescendantOf(node, \"nodeid\"); //true|false\n      //or...\n      node.isDescendantOf('nodeid');//true|false\n    (end code)\n */\n isDescendantOf: function(node, id) {\n    if(node.id == id) return true;\n    var pars = this.getParents(node), ans = false;\n    for ( var i = 0; !ans && i < pars.length; i++) {\n    ans = ans || this.isDescendantOf(pars[i], id);\n  }\n    return ans;\n },\n\n /*\n     Method: clean\n  \n     Cleans flags from nodes.\n\n     Also implemented by:\n     \n     <Graph>.\n     \n     Parameters:\n     graph - A <Graph> instance.\n  */\n  clean: function(graph) { this.eachNode(graph, function(elem) { elem._flag = false; }); },\n  \n  /* \n    Method: getClosestNodeToOrigin \n  \n    Returns the closest node to the center of canvas.\n  \n    Also implemented by:\n    \n    <Graph>.\n    \n    Parameters:\n   \n     graph - (object) A <Graph> instance.\n     prop - (optional|string) Default's 'current'. A <Graph.Node> position property. Possible properties are 'start', 'current' or 'end'.\n  \n  */\n  getClosestNodeToOrigin: function(graph, prop, flags) {\n   return this.getClosestNodeToPos(graph, Polar.KER, prop, flags);\n  },\n  \n  /* \n    Method: getClosestNodeToPos\n  \n    Returns the closest node to the given position.\n  \n    Also implemented by:\n    \n    <Graph>.\n    \n    Parameters:\n   \n     graph - (object) A <Graph> instance.\n     pos - (object) A <Complex> or <Polar> instance.\n     prop - (optional|string) Default's *current*. A <Graph.Node> position property. Possible properties are 'start', 'current' or 'end'.\n  \n  */\n  getClosestNodeToPos: function(graph, pos, prop, flags) {\n   var node = null;\n   prop = prop || 'current';\n   pos = pos && pos.getc(true) || Complex.KER;\n   var distance = function(a, b) {\n     var d1 = a.x - b.x, d2 = a.y - b.y;\n     return d1 * d1 + d2 * d2;\n   };\n   this.eachNode(graph, function(elem) {\n     node = (node == null || distance(elem.getPos(prop).getc(true), pos) < distance(\n         node.getPos(prop).getc(true), pos)) ? elem : node;\n   }, flags);\n   return node;\n  } \n};\n\n//Append graph methods to <Graph>\n$.each(['get', 'getNode', 'each', 'eachNode', 'computeLevels', 'eachBFS', 'clean', 'getClosestNodeToPos', 'getClosestNodeToOrigin'], function(m) {\n  Graph.prototype[m] = function() {\n    return Graph.Util[m].apply(Graph.Util, [this].concat(Array.prototype.slice.call(arguments)));\n  };\n});\n\n//Append node methods to <Graph.Node>\n$.each(['eachAdjacency', 'eachLevel', 'eachSubgraph', 'eachSubnode', 'anySubnode', 'getSubnodes', 'getParents', 'isDescendantOf'], function(m) {\n  Graph.Node.prototype[m] = function() {\n    return Graph.Util[m].apply(Graph.Util, [this].concat(Array.prototype.slice.call(arguments)));\n  };\n});\n\n/*\n * File: Graph.Op.js\n *\n*/\n\n/*\n   Object: Graph.Op\n\n   Perform <Graph> operations like adding/removing <Graph.Nodes> or <Graph.Adjacences>, \n   morphing a <Graph> into another <Graph>, contracting or expanding subtrees, etc.\n\n*/\nGraph.Op = {\n\n    options: {\n      type: 'nothing',\n      duration: 2000,\n      hideLabels: true,\n      fps:30\n    },\n    \n    initialize: function(viz) {\n      this.viz = viz;\n    },\n\n    /*\n       Method: removeNode\n    \n       Removes one or more <Graph.Nodes> from the visualization. \n       It can also perform several animations like fading sequentially, fading concurrently, iterating or replotting.\n\n       Parameters:\n    \n        node - (string|array) The node's id. Can also be an array having many ids.\n        opt - (object) Animation options. It's an object with optional properties described below\n        type - (string) Default's *nothing*. Type of the animation. Can be \"nothing\", \"replot\", \"fade:seq\",  \"fade:con\" or \"iter\".\n        duration - Described in <Options.Fx>.\n        fps - Described in <Options.Fx>.\n        transition - Described in <Options.Fx>.\n        hideLabels - (boolean) Default's *true*. Hide labels during the animation.\n   \n      Example:\n      (start code js)\n        var viz = new $jit.Viz(options);\n        viz.op.removeNode('nodeId', {\n          type: 'fade:seq',\n          duration: 1000,\n          hideLabels: false,\n          transition: $jit.Trans.Quart.easeOut\n        });\n        //or also\n        viz.op.removeNode(['someId', 'otherId'], {\n          type: 'fade:con',\n          duration: 1500\n        });\n      (end code)\n    */\n  \n    removeNode: function(node, opt) {\n        var viz = this.viz;\n        var options = $.merge(this.options, viz.controller, opt);\n        var n = $.splat(node);\n        var i, that, nodeObj;\n        switch(options.type) {\n            case 'nothing':\n                for(i=0; i<n.length; i++) {\n                    options.onBeforeRemoveNode(viz.graph.getNode(n[i]));\n                    viz.graph.removeNode(n[i]);\n                }\n                break;\n            \n            case 'replot':\n                this.removeNode(n, { type: 'nothing' });\n                viz.labels.clearLabels();\n                viz.refresh(true);\n                break;\n            \n            case 'fade:seq': case 'fade':\n                that = this;\n                //set alpha to 0 for nodes to remove.\n                for(i=0; i<n.length; i++) {\n                    nodeObj = viz.graph.getNode(n[i]);\n                    nodeObj.setData('alpha', 0, 'end');\n                }\n                viz.fx.animate($.merge(options, {\n                    modes: ['node-property:alpha'],\n                    onComplete: function() {\n                        that.removeNode(n, { type: 'nothing' });\n                        viz.labels.clearLabels();\n                        viz.reposition();\n                        viz.fx.animate($.merge(options, {\n                            modes: ['linear']\n                        }));\n                    }\n                }));\n                break;\n            \n            case 'fade:con':\n                that = this;\n                //set alpha to 0 for nodes to remove. Tag them for being ignored on computing positions.\n                for(i=0; i<n.length; i++) {\n                    nodeObj = viz.graph.getNode(n[i]);\n                    nodeObj.setData('alpha', 0, 'end');\n                    nodeObj.ignore = true;\n                }\n                viz.reposition();\n                viz.fx.animate($.merge(options, {\n                    modes: ['node-property:alpha', 'linear'],\n                    onComplete: function() {\n                        that.removeNode(n, { type: 'nothing' });\n                        options.onComplete && options.onComplete();\n                    }\n                }));\n                break;\n            \n            case 'iter':\n                that = this;\n                viz.fx.sequence({\n                    condition: function() { return n.length != 0; },\n                    step: function() { that.removeNode(n.shift(), { type: 'nothing' });  viz.labels.clearLabels(); },\n                    onComplete: function() { options.onComplete && options.onComplete(); },\n                    duration: Math.ceil(options.duration / n.length)\n                });\n                break;\n                \n            default: this.doError();\n        }\n    },\n    \n    /*\n       Method: removeEdge\n    \n       Removes one or more <Graph.Adjacences> from the visualization. \n       It can also perform several animations like fading sequentially, fading concurrently, iterating or replotting.\n\n       Parameters:\n    \n       vertex - (array) An array having two strings which are the ids of the nodes connected by this edge (i.e ['id1', 'id2']). Can also be a two dimensional array holding many edges (i.e [['id1', 'id2'], ['id3', 'id4'], ...]).\n       opt - (object) Animation options. It's an object with optional properties described below\n       type - (string) Default's *nothing*. Type of the animation. Can be \"nothing\", \"replot\", \"fade:seq\",  \"fade:con\" or \"iter\".\n       duration - Described in <Options.Fx>.\n       fps - Described in <Options.Fx>.\n       transition - Described in <Options.Fx>.\n       hideLabels - (boolean) Default's *true*. Hide labels during the animation.\n   \n      Example:\n      (start code js)\n        var viz = new $jit.Viz(options);\n        viz.op.removeEdge(['nodeId', 'otherId'], {\n          type: 'fade:seq',\n          duration: 1000,\n          hideLabels: false,\n          transition: $jit.Trans.Quart.easeOut\n        });\n        //or also\n        viz.op.removeEdge([['someId', 'otherId'], ['id3', 'id4']], {\n          type: 'fade:con',\n          duration: 1500\n        });\n      (end code)\n    \n    */\n    removeEdge: function(vertex, opt) {\n        var viz = this.viz;\n        var options = $.merge(this.options, viz.controller, opt);\n        var v = ($.type(vertex[0]) == 'string')? [vertex] : vertex;\n        var i, that, adj;\n        switch(options.type) {\n            case 'nothing':\n                for(i=0; i<v.length; i++)   viz.graph.removeAdjacence(v[i][0], v[i][1]);\n                break;\n            \n            case 'replot':\n                this.removeEdge(v, { type: 'nothing' });\n                viz.refresh(true);\n                break;\n            \n            case 'fade:seq': case 'fade':\n                that = this;\n                //set alpha to 0 for edges to remove.\n                for(i=0; i<v.length; i++) {\n                    adj = viz.graph.getAdjacence(v[i][0], v[i][1]);\n                    if(adj) {\n                        adj.setData('alpha', 0,'end');\n                    }\n                }\n                viz.fx.animate($.merge(options, {\n                    modes: ['edge-property:alpha'],\n                    onComplete: function() {\n                        that.removeEdge(v, { type: 'nothing' });\n                        viz.reposition();\n                        viz.fx.animate($.merge(options, {\n                            modes: ['linear']\n                        }));\n                    }\n                }));\n                break;\n            \n            case 'fade:con':\n                that = this;\n                //set alpha to 0 for nodes to remove. Tag them for being ignored when computing positions.\n                for(i=0; i<v.length; i++) {\n                    adj = viz.graph.getAdjacence(v[i][0], v[i][1]);\n                    if(adj) {\n                        adj.setData('alpha',0 ,'end');\n                        adj.ignore = true;\n                    }\n                }\n                viz.reposition();\n                viz.fx.animate($.merge(options, {\n                    modes: ['edge-property:alpha', 'linear'],\n                    onComplete: function() {\n                        that.removeEdge(v, { type: 'nothing' });\n                        options.onComplete && options.onComplete();\n                    }\n                }));\n                break;\n            \n            case 'iter':\n                that = this;\n                viz.fx.sequence({\n                    condition: function() { return v.length != 0; },\n                    step: function() { that.removeEdge(v.shift(), { type: 'nothing' }); viz.labels.clearLabels(); },\n                    onComplete: function() { options.onComplete(); },\n                    duration: Math.ceil(options.duration / v.length)\n                });\n                break;\n                \n            default: this.doError();\n        }\n    },\n    \n    /*\n       Method: sum\n    \n       Adds a new graph to the visualization. \n       The JSON graph (or tree) must at least have a common node with the current graph plotted by the visualization. \n       The resulting graph can be defined as follows <http://mathworld.wolfram.com/GraphSum.html>\n\n       Parameters:\n    \n       json - (object) A json tree or graph structure. See also <Loader.loadJSON>.\n       opt - (object) Animation options. It's an object with optional properties described below\n       type - (string) Default's *nothing*. Type of the animation. Can be \"nothing\", \"replot\", \"fade:seq\",  \"fade:con\".\n       duration - Described in <Options.Fx>.\n       fps - Described in <Options.Fx>.\n       transition - Described in <Options.Fx>.\n       hideLabels - (boolean) Default's *true*. Hide labels during the animation.\n   \n      Example:\n      (start code js)\n        //...json contains a tree or graph structure...\n\n        var viz = new $jit.Viz(options);\n        viz.op.sum(json, {\n          type: 'fade:seq',\n          duration: 1000,\n          hideLabels: false,\n          transition: $jit.Trans.Quart.easeOut\n        });\n        //or also\n        viz.op.sum(json, {\n          type: 'fade:con',\n          duration: 1500\n        });\n      (end code)\n    \n    */\n    sum: function(json, opt) {\n        var viz = this.viz;\n        var options = $.merge(this.options, viz.controller, opt), root = viz.root;\n        var graph;\n        viz.root = opt.id || viz.root;\n        switch(options.type) {\n            case 'nothing':\n                graph = viz.construct(json);\n                graph.eachNode(function(elem) {\n                    elem.eachAdjacency(function(adj) {\n                        viz.graph.addAdjacence(adj.nodeFrom, adj.nodeTo, adj.data);\n                    });\n                });\n                break;\n            \n            case 'replot':\n                viz.refresh(true);\n                this.sum(json, { type: 'nothing' });\n                viz.refresh(true);\n                break;\n            \n            case 'fade:seq': case 'fade': case 'fade:con':\n                that = this;\n                graph = viz.construct(json);\n\n                //set alpha to 0 for nodes to add.\n                var fadeEdges = this.preprocessSum(graph);\n                var modes = !fadeEdges? ['node-property:alpha'] : ['node-property:alpha', 'edge-property:alpha'];\n                viz.reposition();\n                if(options.type != 'fade:con') {\n                    viz.fx.animate($.merge(options, {\n                        modes: ['linear'],\n                        onComplete: function() {\n                            viz.fx.animate($.merge(options, {\n                                modes: modes,\n                                onComplete: function() {\n                                    options.onComplete();\n                                }\n                            }));\n                        }\n                    }));\n                } else {\n                    viz.graph.eachNode(function(elem) {\n                        if (elem.id != root && elem.pos.isZero()) {\n                          elem.pos.set(elem.endPos); \n                          elem.startPos.set(elem.endPos);\n                        }\n                    });\n                    viz.fx.animate($.merge(options, {\n                        modes: ['linear'].concat(modes)\n                    }));\n                }\n                break;\n\n            default: this.doError();\n        }\n    },\n    \n    /*\n       Method: morph\n    \n       This method will transform the current visualized graph into the new JSON representation passed in the method. \n       The JSON object must at least have the root node in common with the current visualized graph.\n\n       Parameters:\n    \n       json - (object) A json tree or graph structure. See also <Loader.loadJSON>.\n       opt - (object) Animation options. It's an object with optional properties described below\n       type - (string) Default's *nothing*. Type of the animation. Can be \"nothing\", \"replot\", \"fade:con\".\n       duration - Described in <Options.Fx>.\n       fps - Described in <Options.Fx>.\n       transition - Described in <Options.Fx>.\n       hideLabels - (boolean) Default's *true*. Hide labels during the animation.\n       id - (string) The shared <Graph.Node> id between both graphs.\n       \n       extraModes - (optional|object) When morphing with an animation, dollar prefixed data parameters are added to \n                    *endData* and not *data* itself. This way you can animate dollar prefixed parameters during your morphing operation. \n                    For animating these extra-parameters you have to specify an object that has animation groups as keys and animation \n                    properties as values, just like specified in <Graph.Plot.animate>.\n   \n      Example:\n      (start code js)\n        //...json contains a tree or graph structure...\n\n        var viz = new $jit.Viz(options);\n        viz.op.morph(json, {\n          type: 'fade',\n          duration: 1000,\n          hideLabels: false,\n          transition: $jit.Trans.Quart.easeOut\n        });\n        //or also\n        viz.op.morph(json, {\n          type: 'fade',\n          duration: 1500\n        });\n        //if the json data contains dollar prefixed params\n        //like $width or $height these too can be animated\n        viz.op.morph(json, {\n          type: 'fade',\n          duration: 1500\n        }, {\n          'node-property': ['width', 'height']\n        });\n      (end code)\n    \n    */\n    morph: function(json, opt, extraModes) {\n        extraModes = extraModes || {};\n        var viz = this.viz;\n        var options = $.merge(this.options, viz.controller, opt), root = viz.root;\n        var graph;\n        //TODO(nico) this hack makes morphing work with the Hypertree. \n        //Need to check if it has been solved and this can be removed.\n        viz.root = opt.id || viz.root;\n        switch(options.type) {\n            case 'nothing':\n                graph = viz.construct(json);\n                graph.eachNode(function(elem) {\n                  var nodeExists = viz.graph.hasNode(elem.id);  \n                  elem.eachAdjacency(function(adj) {\n                    var adjExists = !!viz.graph.getAdjacence(adj.nodeFrom.id, adj.nodeTo.id);\n                    viz.graph.addAdjacence(adj.nodeFrom, adj.nodeTo, adj.data);\n                    //Update data properties if the node existed\n                    if(adjExists) {\n                      var addedAdj = viz.graph.getAdjacence(adj.nodeFrom.id, adj.nodeTo.id);\n                      for(var prop in (adj.data || {})) {\n                        addedAdj.data[prop] = adj.data[prop];\n                      }\n                    }\n                  });\n                  //Update data properties if the node existed\n                  if(nodeExists) {\n                    var addedNode = viz.graph.getNode(elem.id);\n                    for(var prop in (elem.data || {})) {\n                      addedNode.data[prop] = elem.data[prop];\n                    }\n                  }\n                });\n                viz.graph.eachNode(function(elem) {\n                    elem.eachAdjacency(function(adj) {\n                        if(!graph.getAdjacence(adj.nodeFrom.id, adj.nodeTo.id)) {\n                            viz.graph.removeAdjacence(adj.nodeFrom.id, adj.nodeTo.id);\n                        }\n                    });\n                    if(!graph.hasNode(elem.id)) viz.graph.removeNode(elem.id);\n                });\n                \n                break;\n            \n            case 'replot':\n                viz.labels.clearLabels(true);\n                this.morph(json, { type: 'nothing' });\n                viz.refresh(true);\n                viz.refresh(true);\n                break;\n                \n            case 'fade:seq': case 'fade': case 'fade:con':\n                that = this;\n                graph = viz.construct(json);\n                //preprocessing for nodes to delete.\n                //get node property modes to interpolate\n                var nodeModes = ('node-property' in extraModes) \n                  && $.map($.splat(extraModes['node-property']), \n                      function(n) { return '$' + n; });\n                viz.graph.eachNode(function(elem) {\n                  var graphNode = graph.getNode(elem.id);   \n                  if(!graphNode) {\n                      elem.setData('alpha', 1);\n                      elem.setData('alpha', 1, 'start');\n                      elem.setData('alpha', 0, 'end');\n                      elem.ignore = true;\n                    } else {\n                      //Update node data information\n                      var graphNodeData = graphNode.data;\n                      for(var prop in graphNodeData) {\n                        if(nodeModes && ($.indexOf(nodeModes, prop) > -1)) {\n                          elem.endData[prop] = graphNodeData[prop];\n                        } else {\n                          elem.data[prop] = graphNodeData[prop];\n                        }\n                      }\n                    }\n                }); \n                viz.graph.eachNode(function(elem) {\n                    if(elem.ignore) return;\n                    elem.eachAdjacency(function(adj) {\n                        if(adj.nodeFrom.ignore || adj.nodeTo.ignore) return;\n                        var nodeFrom = graph.getNode(adj.nodeFrom.id);\n                        var nodeTo = graph.getNode(adj.nodeTo.id);\n                        if(!nodeFrom.adjacentTo(nodeTo)) {\n                            var adj = viz.graph.getAdjacence(nodeFrom.id, nodeTo.id);\n                            fadeEdges = true;\n                            adj.setData('alpha', 1);\n                            adj.setData('alpha', 1, 'start');\n                            adj.setData('alpha', 0, 'end');\n                            adj._hiding = true;\n                        } else if (adj.data.$direction && adj.data.$direction[0] === nodeFrom.id) {\n                            // only check one direction (from -> to)\n                            if (!nodeFrom.adjacentWithDirectionTo(nodeTo)) {\n                                adj._reversing = true;\n                            }\n                        }\n                    });\n                }); \n                //preprocessing for adding nodes.\n                var fadeEdges = this.preprocessSum(graph);\n\n                var modes = !fadeEdges? ['node-property:alpha'] : \n                                        ['node-property:alpha', \n                                         'edge-property:alpha'];\n                //Append extra node-property animations (if any)\n                modes[0] = modes[0] + (('node-property' in extraModes)? \n                    (':' + $.splat(extraModes['node-property']).join(':')) : '');\n                //Append extra edge-property animations (if any)\n                modes[1] = (modes[1] || 'edge-property:alpha') + (('edge-property' in extraModes)? \n                    (':' + $.splat(extraModes['edge-property']).join(':')) : '');\n                //Add label-property animations (if any)\n                if('label-property' in extraModes) {\n                  modes.push('label-property:' + $.splat(extraModes['label-property']).join(':'))\n                }\n                //only use reposition if its implemented.\n                if (viz.reposition) {\n                  viz.reposition();\n                } else {\n                  viz.compute('end');\n                }\n                this._updateDirectedEdges();\n\n                viz.graph.eachNode(function(elem) {\n                    if (elem.id != root && elem.pos.getp().equals(Polar.KER)) {\n                      elem.pos.set(elem.endPos); elem.startPos.set(elem.endPos);\n                    }\n                });\n                viz.fx.animate($.merge(options, {\n                    modes: [extraModes.position || 'polar'].concat(modes),\n                    onComplete: function() {\n                        viz.graph.eachNode(function(elem) {\n                            if(elem.ignore) viz.graph.removeNode(elem.id);\n                        });\n                        viz.graph.eachNode(function(elem) {\n                            elem.eachAdjacency(function(adj) {\n                                if(adj.ignore) viz.graph.removeAdjacence(adj.nodeFrom.id, adj.nodeTo.id);\n                            });\n                        });\n                        options.onComplete();\n                    }\n                }));\n                break;\n\n            default:;\n        }\n    },\n\n    _updateDirectedEdges: function () {\n        var graph = this.viz.graph;\n        graph.eachNode(function(node) {\n            node.eachAdjacency(function (adj) {\n\n                var isDirectedEdge = adj.data.$direction;\n                if (isDirectedEdge && adj.nodeFrom.id !== adj.data.$direction[0]) {\n                    return;\n                }\n\n                if (adj._hiding) {\n                    graph.removeAdjacence(adj.nodeFrom.id, adj.nodeTo.id);\n                }\n\n                if (adj._reversing) {\n                    var from = adj.nodeFrom.id;\n                    var to = adj.nodeTo.id;\n//\n//                    // swap instead of adding and removing\n                    var edge1 = graph.edges[from][to];\n                    var edge2 = graph.edges[to][from];\n\n                    edge1.data.$direction = [to, from];\n                    edge2.data.$direction = [to, from];\n\n                    adj._reversing = undefined;\n                }\n            });\n        });\n    },\n    \n  /*\n    Method: contract\n \n    Collapses the subtree of the given node. The node will have a _collapsed=true_ property.\n    \n    Parameters:\n \n    node - (object) A <Graph.Node>.\n    opt - (object) An object containing options described below\n    type - (string) Whether to 'replot' or 'animate' the contraction.\n   \n    There are also a number of Animation options. For more information see <Options.Fx>.\n\n    Example:\n    (start code js)\n     var viz = new $jit.Viz(options);\n     viz.op.contract(node, {\n       type: 'animate',\n       duration: 1000,\n       hideLabels: true,\n       transition: $jit.Trans.Quart.easeOut\n     });\n   (end code)\n \n   */\n    contract: function(node, opt) {\n      var viz = this.viz;\n      if(node.collapsed || !node.anySubnode($.lambda(true))) return;\n      opt = $.merge(this.options, viz.config, opt || {}, {\n        'modes': ['node-property:alpha:span', 'linear']\n      });\n      node.collapsed = true;\n      (function subn(n) {\n        n.eachSubnode(function(ch) {\n          ch.ignore = true;\n          ch.setData('alpha', 0, opt.type == 'animate'? 'end' : 'current');\n          subn(ch);\n        });\n      })(node);\n      if(opt.type == 'animate') {\n        viz.compute('end');\n        if(viz.rotated) {\n          viz.rotate(viz.rotated, 'none', {\n            'property':'end'\n          });\n        }\n        (function subn(n) {\n          n.eachSubnode(function(ch) {\n            ch.setPos(node.getPos('end'), 'end');\n            subn(ch);\n          });\n        })(node);\n        viz.fx.animate(opt);\n      } else if(opt.type == 'replot'){\n        viz.refresh();\n      }\n    },\n    \n    /*\n    Method: expand\n \n    Expands the previously contracted subtree. The given node must have the _collapsed=true_ property.\n    \n    Parameters:\n \n    node - (object) A <Graph.Node>.\n    opt - (object) An object containing options described below\n    type - (string) Whether to 'replot' or 'animate'.\n     \n    There are also a number of Animation options. For more information see <Options.Fx>.\n\n    Example:\n    (start code js)\n      var viz = new $jit.Viz(options);\n      viz.op.expand(node, {\n        type: 'animate',\n        duration: 1000,\n        hideLabels: true,\n        transition: $jit.Trans.Quart.easeOut\n      });\n    (end code)\n \n   */\n    expand: function(node, opt) {\n      if(!('collapsed' in node)) return;\n      var viz = this.viz;\n      opt = $.merge(this.options, viz.config, opt || {}, {\n        'modes': ['node-property:alpha:span', 'linear']\n      });\n      delete node.collapsed;\n      (function subn(n) {\n        n.eachSubnode(function(ch) {\n          delete ch.ignore;\n          ch.setData('alpha', 1, opt.type == 'animate'? 'end' : 'current');\n          subn(ch);\n        });\n      })(node);\n      if(opt.type == 'animate') {\n        viz.compute('end');\n        if(viz.rotated) {\n          viz.rotate(viz.rotated, 'none', {\n            'property':'end'\n          });\n        }\n        viz.fx.animate(opt);\n      } else if(opt.type == 'replot'){\n        viz.refresh();\n      }\n    },\n\n    preprocessSum: function(graph) {\n        var viz = this.viz;\n        graph.eachNode(function(elem) {\n            if(!viz.graph.hasNode(elem.id)) {\n                viz.graph.addNode(elem);\n                var n = viz.graph.getNode(elem.id);\n                n.setData('alpha', 0);\n                n.setData('alpha', 0, 'start');\n                n.setData('alpha', 1, 'end');\n            }\n        }); \n        var fadeEdges = false;\n        graph.eachNode(function(elem) {\n            elem.eachAdjacency(function(adj) {\n                var nodeFrom = viz.graph.getNode(adj.nodeFrom.id);\n                var nodeTo = viz.graph.getNode(adj.nodeTo.id);\n                if(!nodeFrom.adjacentTo(nodeTo)) {\n                    var adj = viz.graph.addAdjacence(nodeFrom, nodeTo, adj.data);\n                    if(nodeFrom.startAlpha == nodeFrom.endAlpha \n                    && nodeTo.startAlpha == nodeTo.endAlpha) {\n                        fadeEdges = true;\n                        adj.setData('alpha', 0);\n                        adj.setData('alpha', 0, 'start');\n                        adj.setData('alpha', 1, 'end');\n                    } \n                }\n            });\n        }); \n        return fadeEdges;\n    }\n};\n\n\n\n/*\n File: Helpers.js\n\n Helpers are objects that contain rendering primitives (like rectangles, ellipses, etc), for plotting nodes and edges.\n Helpers also contain implementations of the *contains* method, a method returning a boolean indicating whether the mouse\n position is over the rendered shape.\n\n Helpers are very useful when implementing new NodeTypes, since you can access them through *this.nodeHelper* and\n *this.edgeHelper* <Graph.Plot> properties, providing you with simple primitives and mouse-position check functions.\n\n Example:\n (start code js)\n //implement a new node type\n $jit.Viz.Plot.NodeTypes.implement({\n 'customNodeType': {\n 'render': function(node, canvas) {\n this.nodeHelper.circle.render ...\n },\n 'contains': function(node, pos) {\n this.nodeHelper.circle.contains ...\n }\n }\n });\n //implement an edge type\n $jit.Viz.Plot.EdgeTypes.implement({\n 'customNodeType': {\n 'render': function(node, canvas) {\n this.edgeHelper.circle.render ...\n },\n //optional\n 'contains': function(node, pos) {\n this.edgeHelper.circle.contains ...\n }\n }\n });\n (end code)\n\n */\n\n/*\n Object: NodeHelper\n\n Contains rendering and other type of primitives for simple shapes.\n */\nvar NodeHelper = {\n    'none': {\n        'render': $.empty,\n        'contains': $.lambda(false)\n    },\n    /*\n     Object: NodeHelper.circle\n     */\n    'circle': {\n        /*\n         Method: render\n\n         Renders a circle into the canvas.\n\n         Parameters:\n\n         type - (string) Possible options are 'fill' or 'stroke'.\n         pos - (object) An *x*, *y* object with the position of the center of the circle.\n         radius - (number) The radius of the circle to be rendered.\n         canvas - (object) A <Canvas> instance.\n\n         Example:\n         (start code js)\n         NodeHelper.circle.render('fill', { x: 10, y: 30 }, 30, viz.canvas);\n         (end code)\n         */\n        'render': function(type, pos, radius, canvas){\n            var ctx = canvas.getCtx();\n            ctx.beginPath();\n            ctx.arc(pos.x, pos.y, radius, 0, Math.PI * 2, true);\n            ctx.closePath();\n            ctx[type]();\n        },\n        /*\n         Method: contains\n\n         Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.\n\n         Parameters:\n\n         npos - (object) An *x*, *y* object with the <Graph.Node> position.\n         pos - (object) An *x*, *y* object with the position to check.\n         radius - (number) The radius of the rendered circle.\n\n         Example:\n         (start code js)\n         NodeHelper.circle.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, 30); //true\n         (end code)\n         */\n        'contains': function(npos, pos, radius){\n            var diffx = npos.x - pos.x,\n                diffy = npos.y - pos.y,\n                diff = diffx * diffx + diffy * diffy;\n            return diff <= radius * radius;\n        }\n    },\n    /*\n     Object: NodeHelper.ellipse\n     */\n    'ellipse': {\n        /*\n         Method: render\n\n         Renders an ellipse into the canvas.\n\n         Parameters:\n\n         type - (string) Possible options are 'fill' or 'stroke'.\n         pos - (object) An *x*, *y* object with the position of the center of the ellipse.\n         width - (number) The width of the ellipse.\n         height - (number) The height of the ellipse.\n         canvas - (object) A <Canvas> instance.\n\n         Example:\n         (start code js)\n         NodeHelper.ellipse.render('fill', { x: 10, y: 30 }, 30, 40, viz.canvas);\n         (end code)\n         */\n        'render': function(type, pos, width, height, canvas){\n            var ctx = canvas.getCtx(),\n                scalex = 1,\n                scaley = 1,\n                scaleposx = 1,\n                scaleposy = 1,\n                radius = 0;\n\n            if (width > height) {\n                radius = width / 2;\n                scaley = height / width;\n                scaleposy = width / height;\n            } else {\n                radius = height / 2;\n                scalex = width / height;\n                scaleposx = height / width;\n            }\n\n            ctx.save();\n            ctx.scale(scalex, scaley);\n            ctx.beginPath();\n            ctx.arc(pos.x * scaleposx, pos.y * scaleposy, radius, 0, Math.PI * 2, true);\n            ctx.closePath();\n            ctx[type]();\n            ctx.restore();\n        },\n        /*\n         Method: contains\n\n         Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.\n\n         Parameters:\n\n         npos - (object) An *x*, *y* object with the <Graph.Node> position.\n         pos - (object) An *x*, *y* object with the position to check.\n         width - (number) The width of the rendered ellipse.\n         height - (number) The height of the rendered ellipse.\n\n         Example:\n         (start code js)\n         NodeHelper.ellipse.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, 30, 40);\n         (end code)\n         */\n        'contains': function(npos, pos, width, height){\n            var radius = 0,\n                scalex = 1,\n                scaley = 1,\n                diffx = 0,\n                diffy = 0,\n                diff = 0;\n\n            if (width > height) {\n                radius = width / 2;\n                scaley = height / width;\n            } else {\n                radius = height / 2;\n                scalex = width / height;\n            }\n\n            diffx = (npos.x - pos.x) * (1 / scalex);\n            diffy = (npos.y - pos.y) * (1 / scaley);\n            diff = diffx * diffx + diffy * diffy;\n            return diff <= radius * radius;\n        }\n    },\n    /*\n     Object: NodeHelper.square\n     */\n    'square': {\n        /*\n         Method: render\n\n         Renders a square into the canvas.\n\n         Parameters:\n\n         type - (string) Possible options are 'fill' or 'stroke'.\n         pos - (object) An *x*, *y* object with the position of the center of the square.\n         dim - (number) The radius (or half-diameter) of the square.\n         canvas - (object) A <Canvas> instance.\n\n         Example:\n         (start code js)\n         NodeHelper.square.render('stroke', { x: 10, y: 30 }, 40, viz.canvas);\n         (end code)\n         */\n        'render': function(type, pos, dim, canvas){\n            canvas.getCtx()[type + \"Rect\"](pos.x - dim, pos.y - dim, 2*dim, 2*dim);\n        },\n        /*\n         Method: contains\n\n         Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.\n\n         Parameters:\n\n         npos - (object) An *x*, *y* object with the <Graph.Node> position.\n         pos - (object) An *x*, *y* object with the position to check.\n         dim - (number) The radius (or half-diameter) of the square.\n\n         Example:\n         (start code js)\n         NodeHelper.square.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, 30);\n         (end code)\n         */\n        'contains': function(npos, pos, dim){\n            return Math.abs(pos.x - npos.x) <= dim && Math.abs(pos.y - npos.y) <= dim;\n        }\n    },\n    /*\n     Object: NodeHelper.rectangle\n     */\n    'rectangle': {\n        /*\n         Method: render\n\n         Renders a rectangle into the canvas.\n\n         Parameters:\n\n         type - (string) Possible options are 'fill' or 'stroke'.\n         pos - (object) An *x*, *y* object with the position of the center of the rectangle.\n         width - (number) The width of the rectangle.\n         height - (number) The height of the rectangle.\n         canvas - (object) A <Canvas> instance.\n\n         Example:\n         (start code js)\n         NodeHelper.rectangle.render('fill', { x: 10, y: 30 }, 30, 40, viz.canvas);\n         (end code)\n         */\n        'render': function(type, pos, width, height, canvas){\n            canvas.getCtx()[type + \"Rect\"](pos.x - width / 2, pos.y - height / 2,\n                width, height);\n        },\n        /*\n         Method: contains\n\n         Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.\n\n         Parameters:\n\n         npos - (object) An *x*, *y* object with the <Graph.Node> position.\n         pos - (object) An *x*, *y* object with the position to check.\n         width - (number) The width of the rendered rectangle.\n         height - (number) The height of the rendered rectangle.\n\n         Example:\n         (start code js)\n         NodeHelper.rectangle.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, 30, 40);\n         (end code)\n         */\n        'contains': function(npos, pos, width, height){\n            return Math.abs(pos.x - npos.x) <= width / 2\n                && Math.abs(pos.y - npos.y) <= height / 2;\n        }\n    },\n    /*\n     Object: NodeHelper.triangle\n     */\n    'triangle': {\n        /*\n         Method: render\n\n         Renders a triangle into the canvas.\n\n         Parameters:\n\n         type - (string) Possible options are 'fill' or 'stroke'.\n         pos - (object) An *x*, *y* object with the position of the center of the triangle.\n         dim - (number) Half the base and half the height of the triangle.\n         canvas - (object) A <Canvas> instance.\n\n         Example:\n         (start code js)\n         NodeHelper.triangle.render('stroke', { x: 10, y: 30 }, 40, viz.canvas);\n         (end code)\n         */\n        'render': function(type, pos, dim, canvas){\n            var ctx = canvas.getCtx(),\n                c1x = pos.x,\n                c1y = pos.y - dim,\n                c2x = c1x - dim,\n                c2y = pos.y + dim,\n                c3x = c1x + dim,\n                c3y = c2y;\n            ctx.beginPath();\n            ctx.moveTo(c1x, c1y);\n            ctx.lineTo(c2x, c2y);\n            ctx.lineTo(c3x, c3y);\n            ctx.closePath();\n            ctx[type]();\n        },\n        /*\n         Method: contains\n\n         Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.\n\n         Parameters:\n\n         npos - (object) An *x*, *y* object with the <Graph.Node> position.\n         pos - (object) An *x*, *y* object with the position to check.\n         dim - (number) Half the base and half the height of the triangle.\n\n         Example:\n         (start code js)\n         NodeHelper.triangle.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, 30);\n         (end code)\n         */\n        'contains': function(npos, pos, dim) {\n            return NodeHelper.circle.contains(npos, pos, dim);\n        }\n    },\n    /*\n     Object: NodeHelper.star\n     */\n    'star': {\n        /*\n         Method: render\n\n         Renders a star (concave decagon) into the canvas.\n\n         Parameters:\n\n         type - (string) Possible options are 'fill' or 'stroke'.\n         pos - (object) An *x*, *y* object with the position of the center of the star.\n         dim - (number) The length of a side of a concave decagon.\n         canvas - (object) A <Canvas> instance.\n\n         Example:\n         (start code js)\n         NodeHelper.star.render('stroke', { x: 10, y: 30 }, 40, viz.canvas);\n         (end code)\n         */\n        'render': function(type, pos, dim, canvas){\n            var ctx = canvas.getCtx(),\n                pi5 = Math.PI / 5;\n            ctx.save();\n            ctx.translate(pos.x, pos.y);\n            ctx.beginPath();\n            ctx.moveTo(dim, 0);\n            for (var i = 0; i < 9; i++) {\n                ctx.rotate(pi5);\n                if (i % 2 == 0) {\n                    ctx.lineTo((dim / 0.525731) * 0.200811, 0);\n                } else {\n                    ctx.lineTo(dim, 0);\n                }\n            }\n            ctx.closePath();\n            ctx[type]();\n            ctx.restore();\n        },\n        /*\n         Method: contains\n\n         Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.\n\n         Parameters:\n\n         npos - (object) An *x*, *y* object with the <Graph.Node> position.\n         pos - (object) An *x*, *y* object with the position to check.\n         dim - (number) The length of a side of a concave decagon.\n\n         Example:\n         (start code js)\n         NodeHelper.star.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, 30);\n         (end code)\n         */\n        'contains': function(npos, pos, dim) {\n            return NodeHelper.circle.contains(npos, pos, dim);\n        }\n    }\n};\n\n/*\n Object: EdgeHelper\n\n Contains rendering primitives for simple edge shapes.\n */\nvar EdgeHelper = {\n    /*\n     Object: EdgeHelper.line\n     */\n    'line': {\n        /*\n         Method: render\n\n         Renders a line into the canvas.\n\n         Parameters:\n\n         from - (object) An *x*, *y* object with the starting position of the line.\n         to - (object) An *x*, *y* object with the ending position of the line.\n         canvas - (object) A <Canvas> instance.\n\n         Example:\n         (start code js)\n         EdgeHelper.line.render({ x: 10, y: 30 }, { x: 10, y: 50 }, viz.canvas);\n         (end code)\n         */\n        'render': function(from, to, canvas){\n            var ctx = canvas.getCtx();\n            ctx.beginPath();\n            ctx.moveTo(from.x, from.y);\n            ctx.lineTo(to.x, to.y);\n            ctx.stroke();\n        },\n        /*\n         Method: contains\n\n         Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.\n\n         Parameters:\n\n         posFrom - (object) An *x*, *y* object with a <Graph.Node> position.\n         posTo - (object) An *x*, *y* object with a <Graph.Node> position.\n         pos - (object) An *x*, *y* object with the position to check.\n         epsilon - (number) The dimension of the shape.\n\n         Example:\n         (start code js)\n         EdgeHelper.line.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, { x: 15, y: 35 }, 30);\n         (end code)\n         */\n        'contains': function(posFrom, posTo, pos, epsilon) {\n            var min = Math.min,\n                max = Math.max,\n                minPosX = min(posFrom.x, posTo.x) - epsilon,\n                maxPosX = max(posFrom.x, posTo.x) + epsilon,\n                minPosY = min(posFrom.y, posTo.y) - epsilon,\n                maxPosY = max(posFrom.y, posTo.y) + epsilon;\n\n            if(pos.x >= minPosX && pos.x <= maxPosX\n                && pos.y >= minPosY && pos.y <= maxPosY) {\n                if(Math.abs(posTo.x - posFrom.x) <= epsilon) {\n                    return true;\n                }\n                var dist = (posTo.y - posFrom.y) / (posTo.x - posFrom.x) * (pos.x - posFrom.x) + posFrom.y;\n                return Math.abs(dist - pos.y) <= epsilon;\n            }\n            return false;\n        }\n    },\n    /*\n     Object: EdgeHelper.arrow\n     */\n    'arrow': {\n        /*\n         Method: render\n\n         Renders an arrow into the canvas.\n\n         Parameters:\n\n         from - (object) An *x*, *y* object with the starting position of the arrow.\n         to - (object) An *x*, *y* object with the ending position of the arrow.\n         dim - (number) The dimension of the arrow.\n         swap - (boolean) Whether to set the arrow pointing to the starting position or the ending position.\n         canvas - (object) A <Canvas> instance.\n\n         Example:\n         (start code js)\n         EdgeHelper.arrow.render({ x: 10, y: 30 }, { x: 10, y: 50 }, 13, false, viz.canvas);\n         (end code)\n         */\n        'render': function(from, to, dim, swap, canvas, arrowPosition){\n            var ctx = canvas.getCtx();\n            // invert edge direction\n            if (swap) {\n                var tmp = from;\n                from = to;\n                to = tmp;\n            }\n            var vect = new Complex(to.x - from.x, to.y - from.y);\n            vect.$scale(dim / vect.norm());\n            var posVect;\n            switch (arrowPosition) {\n                case 'end':    posVect = vect; break;\n                case 'center': posVect = new Complex((to.x - from.x)/2, (to.y - from.y)/2); break;\n            }\n            var intermediatePoint = new Complex(to.x - posVect.x, to.y - posVect.y),\n                normal = new Complex(-vect.y / 2, vect.x / 2),\n                endPoint = intermediatePoint.add(vect),\n                v1 = intermediatePoint.add(normal),\n                v2 = intermediatePoint.$add(normal.$scale(-1));\n\n            ctx.beginPath();\n            ctx.moveTo(from.x, from.y);\n            ctx.lineTo(to.x, to.y);\n            ctx.stroke();\n            ctx.beginPath();\n            ctx.moveTo(v1.x, v1.y);\n            ctx.moveTo(v1.x, v1.y);\n            ctx.lineTo(v2.x, v2.y);\n            ctx.lineTo(endPoint.x, endPoint.y);\n            ctx.closePath();\n            ctx.fill();\n        },\n        /*\n         Method: contains\n\n         Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.\n\n         Parameters:\n\n         posFrom - (object) An *x*, *y* object with a <Graph.Node> position.\n         posTo - (object) An *x*, *y* object with a <Graph.Node> position.\n         pos - (object) An *x*, *y* object with the position to check.\n         epsilon - (number) The dimension of the shape.\n\n         Example:\n         (start code js)\n         EdgeHelper.arrow.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, { x: 15, y: 35 }, 30);\n         (end code)\n         */\n        'contains': function(posFrom, posTo, pos, epsilon) {\n            return EdgeHelper.line.contains(posFrom, posTo, pos, epsilon);\n        }\n    },\n    /*\n     Object: EdgeHelper.hyperline\n     */\n    'hyperline': {\n        /*\n         Method: render\n\n         Renders a hyperline into the canvas. A hyperline are the lines drawn for the <Hypertree> visualization.\n\n         Parameters:\n\n         from - (object) An *x*, *y* object with the starting position of the hyperline. *x* and *y* must belong to [0, 1).\n         to - (object) An *x*, *y* object with the ending position of the hyperline. *x* and *y* must belong to [0, 1).\n         r - (number) The scaling factor.\n         canvas - (object) A <Canvas> instance.\n\n         Example:\n         (start code js)\n         EdgeHelper.hyperline.render({ x: 10, y: 30 }, { x: 10, y: 50 }, 100, viz.canvas);\n         (end code)\n         */\n        'render': function(from, to, r, canvas){\n            var ctx = canvas.getCtx();\n            var centerOfCircle = computeArcThroughTwoPoints(from, to);\n            if (centerOfCircle.a > 1000 || centerOfCircle.b > 1000\n                || centerOfCircle.ratio < 0) {\n                ctx.beginPath();\n                ctx.moveTo(from.x * r, from.y * r);\n                ctx.lineTo(to.x * r, to.y * r);\n                ctx.stroke();\n            } else {\n                var angleBegin = Math.atan2(to.y - centerOfCircle.y, to.x\n                    - centerOfCircle.x);\n                var angleEnd = Math.atan2(from.y - centerOfCircle.y, from.x\n                    - centerOfCircle.x);\n                var sense = sense(angleBegin, angleEnd);\n                ctx.beginPath();\n                ctx.arc(centerOfCircle.x * r, centerOfCircle.y * r, centerOfCircle.ratio\n                    * r, angleBegin, angleEnd, sense);\n                ctx.stroke();\n            }\n            /*\n             Calculates the arc parameters through two points.\n\n             More information in <http://en.wikipedia.org/wiki/Poincar%C3%A9_disc_model#Analytic_geometry_constructions_in_the_hyperbolic_plane>\n\n             Parameters:\n\n             p1 - A <Complex> instance.\n             p2 - A <Complex> instance.\n             scale - The Disk's diameter.\n\n             Returns:\n\n             An object containing some arc properties.\n             */\n            function computeArcThroughTwoPoints(p1, p2){\n                var aDen = (p1.x * p2.y - p1.y * p2.x), bDen = aDen;\n                var sq1 = p1.squaredNorm(), sq2 = p2.squaredNorm();\n                // Fall back to a straight line\n                if (aDen == 0)\n                    return {\n                        x: 0,\n                        y: 0,\n                        ratio: -1\n                    };\n\n                var a = (p1.y * sq2 - p2.y * sq1 + p1.y - p2.y) / aDen;\n                var b = (p2.x * sq1 - p1.x * sq2 + p2.x - p1.x) / bDen;\n                var x = -a / 2;\n                var y = -b / 2;\n                var squaredRatio = (a * a + b * b) / 4 - 1;\n                // Fall back to a straight line\n                if (squaredRatio < 0)\n                    return {\n                        x: 0,\n                        y: 0,\n                        ratio: -1\n                    };\n                var ratio = Math.sqrt(squaredRatio);\n                var out = {\n                    x: x,\n                    y: y,\n                    ratio: ratio > 1000? -1 : ratio,\n                    a: a,\n                    b: b\n                };\n\n                return out;\n            }\n            /*\n             Sets angle direction to clockwise (true) or counterclockwise (false).\n\n             Parameters:\n\n             angleBegin - Starting angle for drawing the arc.\n             angleEnd - The HyperLine will be drawn from angleBegin to angleEnd.\n\n             Returns:\n\n             A Boolean instance describing the sense for drawing the HyperLine.\n             */\n            function sense(angleBegin, angleEnd){\n                return (angleBegin < angleEnd)? ((angleBegin + Math.PI > angleEnd)? false\n                    : true) : ((angleEnd + Math.PI > angleBegin)? true : false);\n            }\n        },\n        /*\n         Method: contains\n\n         Not Implemented\n\n         Returns *true* if *pos* is contained in the area of the shape. Returns *false* otherwise.\n\n         Parameters:\n\n         posFrom - (object) An *x*, *y* object with a <Graph.Node> position.\n         posTo - (object) An *x*, *y* object with a <Graph.Node> position.\n         pos - (object) An *x*, *y* object with the position to check.\n         epsilon - (number) The dimension of the shape.\n\n         Example:\n         (start code js)\n         EdgeHelper.hyperline.contains({ x: 10, y: 30 }, { x: 15, y: 35 }, { x: 15, y: 35 }, 30);\n         (end code)\n         */\n        'contains': $.lambda(false)\n    }\n};\n\n\n\t/*\n * File: Graph.Plot.js\n */\n\n/*\n   Object: Graph.Plot\n\n   <Graph> rendering and animation methods.\n   \n   Properties:\n   \n   nodeHelper - <NodeHelper> object.\n   edgeHelper - <EdgeHelper> object.\n*/\nGraph.Plot = {\n    //Default initializer\n    initialize: function(viz, klass){\n      this.viz = viz;\n      this.config = viz.config;\n      this.node = viz.config.Node;\n      this.edge = viz.config.Edge;\n      this.animation = new Animation;\n      this.nodeTypes = new klass.Plot.NodeTypes;\n      this.edgeTypes = new klass.Plot.EdgeTypes;\n      this.labels = viz.labels;\n   },\n\n    //Add helpers\n    nodeHelper: NodeHelper,\n    edgeHelper: EdgeHelper,\n    \n    Interpolator: {\n        //node/edge property parsers\n        'map': {\n          'border': 'color',\n          'color': 'color',\n          'width': 'number',\n          'height': 'number',\n          'dim': 'number',\n          'alpha': 'number',\n          'lineWidth': 'number',\n          'angularWidth':'number',\n          'span':'number',\n          'valueArray':'array-number',\n          'dimArray':'array-number',\n          'vertices':'polygon'\n          //'colorArray':'array-color'\n        },\n\n        //canvas specific parsers\n        'canvas': {\n          'globalAlpha': 'number',\n          'fillStyle': 'color',\n          'strokeStyle': 'color',\n          'lineWidth': 'number',\n          'shadowBlur': 'number',\n          'shadowColor': 'color',\n          'shadowOffsetX': 'number',\n          'shadowOffsetY': 'number',\n          'miterLimit': 'number'\n        },\n\n        //label parsers\n        'label': {\n          'size': 'number',\n          'color': 'color'\n        },\n\n        //Number interpolator\n        'compute': function(from, to, delta) {\n          return from + (to - from) * delta;\n        },\n\n        //Position interpolators\n        'moebius': function(elem, props, delta, vector) {\n          var v = vector.scale(-delta);\n          if(v.norm() < 1) {\n              var x = v.x, y = v.y;\n              var ans = elem.startPos\n                .getc().moebiusTransformation(v);\n              elem.pos.setc(ans.x, ans.y);\n              v.x = x; v.y = y;\n            }\n        },\n\n        'linear': function(elem, props, delta) {\n            var from = elem.startPos.getc(true);\n            var to = elem.endPos.getc(true);\n            elem.pos.setc(this.compute(from.x, to.x, delta),\n                          this.compute(from.y, to.y, delta));\n        },\n\n        'polar': function(elem, props, delta) {\n          var from = elem.startPos.getp(true);\n          var to = elem.endPos.getp();\n          var ans = to.interpolate(from, delta);\n          elem.pos.setp(ans.theta, ans.rho);\n        },\n\n        //Graph's Node/Edge interpolators\n        'number': function(elem, prop, delta, getter, setter) {\n          var from = elem[getter](prop, 'start');\n          var to = elem[getter](prop, 'end');\n          elem[setter](prop, this.compute(from, to, delta));\n        },\n\n        'color': function(elem, prop, delta, getter, setter) {\n          var from = $.hexToRgb(elem[getter](prop, 'start'));\n          var to = $.hexToRgb(elem[getter](prop, 'end'));\n          var comp = this.compute;\n          var val = $.rgbToHex([parseInt(comp(from[0], to[0], delta)),\n                                parseInt(comp(from[1], to[1], delta)),\n                                parseInt(comp(from[2], to[2], delta))]);\n\n          elem[setter](prop, val);\n        },\n\n        'array-number': function(elem, prop, delta, getter, setter) {\n          var from = elem[getter](prop, 'start'),\n              to = elem[getter](prop, 'end'),\n              cur = [];\n          for(var i=0, l=from.length; i<l; i++) {\n            var fromi = from[i], toi = to[i];\n            if(fromi.length) {\n              for(var j=0, len=fromi.length, curi=[]; j<len; j++) {\n                curi.push(this.compute(fromi[j], toi[j], delta));\n              }\n              cur.push(curi);\n            } else {\n              cur.push(this.compute(fromi, toi, delta));\n            }\n          }\n          elem[setter](prop, cur);\n        },\n\n        'node': function(elem, props, delta, map, getter, setter) {\n          map = this[map];\n          if(props) {\n            var len = props.length;\n            for(var i=0; i<len; i++) {\n              var pi = props[i];\n              this[map[pi]](elem, pi, delta, getter, setter);\n            }\n          } else {\n            for(var pi in map) {\n              this[map[pi]](elem, pi, delta, getter, setter);\n            }\n          }\n        },\n\n        'edge': function(elem, props, delta, mapKey, getter, setter) {\n            var adjs = elem.adjacencies;\n            for(var id in adjs) this['node'](adjs[id], props, delta, mapKey, getter, setter);\n        },\n\n        'node-property': function(elem, props, delta) {\n          this['node'](elem, props, delta, 'map', 'getData', 'setData');\n        },\n\n        'edge-property': function(elem, props, delta) {\n          this['edge'](elem, props, delta, 'map', 'getData', 'setData');\n        },\n\n        'label-property': function(elem, props, delta) {\n          this['node'](elem, props, delta, 'label', 'getLabelData', 'setLabelData');\n        },\n\n        'node-style': function(elem, props, delta) {\n          this['node'](elem, props, delta, 'canvas', 'getCanvasStyle', 'setCanvasStyle');\n        },\n\n        'edge-style': function(elem, props, delta) {\n          this['edge'](elem, props, delta, 'canvas', 'getCanvasStyle', 'setCanvasStyle');\n        },\n\n        'polygon': function(elem, prop, delta, getter, setter) {\n          var from = elem[getter](prop, 'start'),\n              to = elem[getter](prop, 'end'),\n              cur = [];\n          if (typeof from.offset == 'undefined') {\n            if (from === 0) {\n              from = $.map(to, function() {\n                return new $jit.Complex(0, 0);\n              });\n              from.offset = 0;\n            }\n            else {\n              if (from.length == 0) {\n                from.push(new $jit.Complex(0, 0));\n              }\n              while (from.length < to.length) {\n                from.push(from[0]);\n              }\n              while (from.length > to.length) {\n                to.push(to[0] || new $jit.Complex(0, 0));\n              }\n              if (from.length == 0) return;\n              var l = from.length;\n              var minDist = 1e300;\n              for (var offset = 0; offset < l; offset ++) {\n                var d = 0;\n                for (var i = 0; i < l; i++) {\n                  d +=Geometry.dist2(from[(offset + i) % l], to[i]);\n                }\n                if (d < minDist) {\n                  from.offset = offset;\n                  minDist = d;\n                }\n              }\n            }\n          }\n\n          for (var i = 0, l = from.length; i < l; i++) {\n            var fromi = from[(i + from.offset) % l], toi = to[i];\n            cur.push(new $jit.Complex(\n                this.compute(fromi.x, toi.x, delta),\n                this.compute(fromi.y, toi.y, delta)\n            ));\n          }\n          elem[setter](prop, cur);\n        }\n    },\n    \n  \n    /*\n       sequence\n    \n       Iteratively performs an action while refreshing the state of the visualization.\n\n       Parameters:\n\n       options - (object) An object containing some sequence options described below\n       condition - (function) A function returning a boolean instance in order to stop iterations.\n       step - (function) A function to execute on each step of the iteration.\n       onComplete - (function) A function to execute when the sequence finishes.\n       duration - (number) Duration (in milliseconds) of each step.\n\n      Example:\n       (start code js)\n        var rg = new $jit.RGraph(options);\n        var i = 0;\n        rg.fx.sequence({\n          condition: function() {\n           return i == 10;\n          },\n          step: function() {\n            alert(i++);\n          },\n          onComplete: function() {\n           alert('done!');\n          }\n        });\n       (end code)\n\n    */\n    sequence: function(options) {\n        var that = this;\n        options = $.merge({\n          condition: $.lambda(false),\n          step: $.empty,\n          onComplete: $.empty,\n          duration: 200\n        }, options || {});\n\n        var interval = setInterval(function() {\n          if(options.condition()) {\n            options.step();\n          } else {\n            clearInterval(interval);\n            options.onComplete();\n          }\n          that.viz.refresh(true);\n        }, options.duration);\n    },\n    \n    /*\n      prepare\n \n      Prepare graph position and other attribute values before performing an Animation. \n      This method is used internally by the Toolkit.\n      \n      See also:\n       \n       <Animation>, <Graph.Plot.animate>\n\n    */\n    prepare: function(modes) {\n      var graph = this.viz.graph,\n          accessors = {\n            'node-property': {\n              'getter': 'getData',\n              'setter': 'setData'\n            },\n            'edge-property': {\n              'getter': 'getData',\n              'setter': 'setData'\n            },\n            'node-style': {\n              'getter': 'getCanvasStyle',\n              'setter': 'setCanvasStyle'\n            },\n            'edge-style': {\n              'getter': 'getCanvasStyle',\n              'setter': 'setCanvasStyle'\n            }\n          };\n\n      //parse modes\n      var m = {};\n      if($.type(modes) == 'array') {\n        for(var i=0, len=modes.length; i < len; i++) {\n          var elems = modes[i].split(':');\n          m[elems.shift()] = elems;\n        }\n      } else {\n        for(var p in modes) {\n          if(p == 'position') {\n            m[modes.position] = [];\n          } else {\n            m[p] = $.splat(modes[p]);\n          }\n        }\n      }\n      \n      graph.eachNode(function(node) { \n        node.startPos.set(node.pos);\n        $.each(['node-property', 'node-style'], function(p) {\n          if(p in m) {\n            var prop = m[p];\n            for(var i=0, l=prop.length; i < l; i++) {\n              node[accessors[p].setter](prop[i], node[accessors[p].getter](prop[i]), 'start');\n            }\n          }\n        });\n        $.each(['edge-property', 'edge-style'], function(p) {\n          if(p in m) {\n            var prop = m[p];\n            node.eachAdjacency(function(adj) {\n              for(var i=0, l=prop.length; i < l; i++) {\n                adj[accessors[p].setter](prop[i], adj[accessors[p].getter](prop[i]), 'start');\n              }\n            });\n          }\n        });\n      });\n      return m;\n    },\n    \n    /*\n       Method: animate\n    \n       Animates a <Graph> by interpolating some <Graph.Node>, <Graph.Adjacence> or <Graph.Label> properties.\n\n       Parameters:\n\n       opt - (object) Animation options. The object properties are described below\n       duration - (optional) Described in <Options.Fx>.\n       fps - (optional) Described in <Options.Fx>.\n       hideLabels - (optional|boolean) Whether to hide labels during the animation.\n       modes - (required|object) An object with animation modes (described below).\n\n       Animation modes:\n       \n       Animation modes are strings representing different node/edge and graph properties that you'd like to animate. \n       They are represented by an object that has as keys main categories of properties to animate and as values a list \n       of these specific properties. The properties are described below\n       \n       position - Describes the way nodes' positions must be interpolated. Possible values are 'linear', 'polar' or 'moebius'.\n       node-property - Describes which Node properties will be interpolated. These properties can be any of the ones defined in <Options.Node>.\n       edge-property - Describes which Edge properties will be interpolated. These properties can be any the ones defined in <Options.Edge>.\n       label-property - Describes which Label properties will be interpolated. These properties can be any of the ones defined in <Options.Label> like color or size.\n       node-style - Describes which Node Canvas Styles will be interpolated. These are specific canvas properties like fillStyle, strokeStyle, lineWidth, shadowBlur, shadowColor, shadowOffsetX, shadowOffsetY, etc.\n       edge-style - Describes which Edge Canvas Styles will be interpolated. These are specific canvas properties like fillStyle, strokeStyle, lineWidth, shadowBlur, shadowColor, shadowOffsetX, shadowOffsetY, etc.\n\n       Example:\n       (start code js)\n       var viz = new $jit.Viz(options);\n       //...tweak some Data, CanvasStyles or LabelData properties...\n       viz.fx.animate({\n         modes: {\n           'position': 'linear',\n           'node-property': ['width', 'height'],\n           'node-style': 'shadowColor',\n           'label-property': 'size'\n         },\n         hideLabels: false\n       });\n       //...can also be written like this...\n       viz.fx.animate({\n         modes: ['linear',\n                 'node-property:width:height',\n                 'node-style:shadowColor',\n                 'label-property:size'],\n         hideLabels: false\n       });\n       (end code)\n    */\n    animate: function(opt, versor) {\n      opt = $.merge(this.viz.config, opt || {});\n      var that = this,\n          viz = this.viz,\n          graph  = viz.graph,\n          interp = this.Interpolator,\n          animation =  opt.type === 'nodefx'? this.nodeFxAnimation : this.animation;\n      //prepare graph values\n      var m = this.prepare(opt.modes);\n      \n      //animate\n      if(opt.hideLabels) this.labels.hideLabels(true);\n      animation.setOptions($.extend(opt, {\n        $animating: false,\n        compute: function(delta) {\n          graph.eachNode(function(node) { \n            for(var p in m) {\n              interp[p](node, m[p], delta, versor);\n            }\n          });\n          that.plot(opt, this.$animating, delta);\n          this.$animating = true;\n        },\n        complete: function() {\n          if(opt.hideLabels) that.labels.hideLabels(false);\n          that.plot(opt);\n          opt.onComplete();\n          //TODO(nico): This shouldn't be here!\n          //opt.onAfterCompute();\n        }       \n      })).start();\n    },\n    \n    /*\n      nodeFx\n   \n      Apply animation to node properties like color, width, height, dim, etc.\n  \n      Parameters:\n  \n      options - Animation options. This object properties is described below\n      elements - The Elements to be transformed. This is an object that has a properties\n      \n      (start code js)\n      'elements': {\n        //can also be an array of ids\n        'id': 'id-of-node-to-transform',\n        //properties to be modified. All properties are optional.\n        'properties': {\n          'color': '#ccc', //some color\n          'width': 10, //some width\n          'height': 10, //some height\n          'dim': 20, //some dim\n          'lineWidth': 10 //some line width\n        } \n      }\n      (end code)\n      \n      - _reposition_ Whether to recalculate positions and add a motion animation. \n      This might be used when changing _width_ or _height_ properties in a <Layouts.Tree> like layout. Default's *false*.\n      \n      - _onComplete_ A method that is called when the animation completes.\n      \n      ...and all other <Graph.Plot.animate> options like _duration_, _fps_, _transition_, etc.\n  \n      Example:\n      (start code js)\n       var rg = new RGraph(canvas, config); //can be also Hypertree or ST\n       rg.fx.nodeFx({\n         'elements': {\n           'id':'mynodeid',\n           'properties': {\n             'color':'#ccf'\n           },\n           'transition': Trans.Quart.easeOut\n         }\n       });\n      (end code)    \n   */\n   nodeFx: function(opt) {\n     if (this.nodeFxAnimation == undefined) {\n       this.nodeFxAnimation = new Animation();\n     }\n\n     var viz = this.viz,\n         graph  = viz.graph,\n         animation = this.nodeFxAnimation,\n         options = $.merge(this.viz.config, {\n           'elements': {\n             'id': false,\n             'properties': {}\n           },\n           'reposition': false\n         });\n     opt = $.merge(options, opt || {}, {\n       onBeforeCompute: $.empty,\n       onAfterCompute: $.empty\n     });\n     //check if an animation is running\n     animation.stopTimer();\n     var props = opt.elements.properties;\n     //set end values for nodes\n     if(!opt.elements.id) {\n       graph.eachNode(function(n) {\n         for(var prop in props) {\n           n.setData(prop, props[prop], 'end');\n         }\n       });\n     } else {\n       var ids = $.splat(opt.elements.id);\n       $.each(ids, function(id) {\n         var n = graph.getNode(id);\n         if(n) {\n           for(var prop in props) {\n             n.setData(prop, props[prop], 'end');\n           }\n         }\n       });\n     }\n     //get keys\n     var propnames = [];\n     for(var prop in props) propnames.push(prop);\n     //add node properties modes\n     var modes = ['node-property:' + propnames.join(':')];\n     //set new node positions\n     if(opt.reposition) {\n       modes.push('linear');\n       viz.compute('end');\n     }\n     //animate\n     this.animate($.merge(opt, {\n       modes: modes,\n       type: 'nodefx'\n     }));\n   },\n\n    \n    /*\n       Method: plot\n    \n       Plots a <Graph>.\n\n       Parameters:\n\n       opt - (optional) Plotting options. Most of them are described in <Options.Fx>.\n\n       Example:\n\n       (start code js)\n       var viz = new $jit.Viz(options);\n       viz.fx.plot(); \n       (end code)\n\n    */\n   plot: function(opt, animating) {\n     var viz = this.viz, \n         aGraph = viz.graph, \n         canvas = viz.canvas, \n         id = viz.root, \n         that = this, \n         ctx = canvas.getCtx(), \n         min = Math.min,\n         opt = opt || this.viz.controller;\n     \n     opt.clearCanvas && canvas.clear();\n       \n     var root = aGraph.getNode(id);\n     if(!root) return;\n     \n     var T = !!root.visited;\n     aGraph.eachNode(function(node) {\n       var nodeAlpha = node.getData('alpha');\n       node.eachAdjacency(function(adj) {\n         var nodeTo = adj.nodeTo;\n         if(!!nodeTo.visited === T && node.drawn && nodeTo.drawn) {\n           !animating && opt.onBeforePlotLine(adj);\n           that.plotLine(adj, canvas, animating);\n           !animating && opt.onAfterPlotLine(adj);\n         }\n       });\n       if(node.drawn) {\n         !animating && opt.onBeforePlotNode(node);\n         that.plotNode(node, canvas, animating);\n         !animating && opt.onAfterPlotNode(node);\n       }\n       if(!that.labelsHidden && opt.withLabels) {\n         if(node.drawn && nodeAlpha >= 0.95) {\n           that.labels.plotLabel(canvas, node, opt);\n         } else {\n           that.labels.hideLabel(node, false);\n         }\n       }\n       node.visited = !T;\n     });\n    },\n\n  /*\n      Plots a Subtree.\n   */\n   plotTree: function(node, opt, animating) {\n       var that = this, \n           viz = this.viz, \n           canvas = viz.canvas,\n           config = this.config,\n           ctx = canvas.getCtx();\n       var nodeAlpha = node.getData('alpha');\n       node.eachSubnode(function(elem) {\n         if(opt.plotSubtree(node, elem) && elem.exist && elem.drawn) {\n             var adj = node.getAdjacency(elem.id);\n             !animating && opt.onBeforePlotLine(adj);\n             that.plotLine(adj, canvas, animating);\n             !animating && opt.onAfterPlotLine(adj);\n             that.plotTree(elem, opt, animating);\n         }\n       });\n       if(node.drawn) {\n           !animating && opt.onBeforePlotNode(node);\n           this.plotNode(node, canvas, animating);\n           !animating && opt.onAfterPlotNode(node);\n           if(!opt.hideLabels && opt.withLabels && nodeAlpha >= 0.95) \n               this.labels.plotLabel(canvas, node, opt);\n           else \n               this.labels.hideLabel(node, false);\n       } else {\n           this.labels.hideLabel(node, true);\n       }\n   },\n\n  /*\n       Method: plotNode\n    \n       Plots a <Graph.Node>.\n\n       Parameters:\n       \n       node - (object) A <Graph.Node>.\n       canvas - (object) A <Canvas> element.\n\n    */\n    plotNode: function(node, canvas, animating) {\n        var f = node.getData('type'), \n            ctxObj = this.node.CanvasStyles;\n        if(f != 'none') {\n          var width = node.getData('lineWidth'),\n              color = node.getData('color'),\n              alpha = node.getData('alpha'),\n              ctx = canvas.getCtx();\n          ctx.save();\n          ctx.lineWidth = width;\n          ctx.fillStyle = ctx.strokeStyle = color;\n          ctx.globalAlpha = alpha;\n          \n          for(var s in ctxObj) {\n            ctx[s] = node.getCanvasStyle(s);\n          }\n\n          this.nodeTypes[f].render.call(this, node, canvas, animating);\n          ctx.restore();\n        }\n    },\n    \n    /*\n       Method: plotLine\n    \n       Plots a <Graph.Adjacence>.\n\n       Parameters:\n\n       adj - (object) A <Graph.Adjacence>.\n       canvas - (object) A <Canvas> instance.\n\n    */\n    plotLine: function(adj, canvas, animating) {\n      var f = adj.getData('type'),\n          ctxObj = this.edge.CanvasStyles;\n      if(f != 'none') {\n        var width = adj.getData('lineWidth'),\n            color = adj.getData('color'),\n            ctx = canvas.getCtx(),\n            nodeFrom = adj.nodeFrom,\n            nodeTo = adj.nodeTo;\n        \n        ctx.save();\n        ctx.lineWidth = width;\n        ctx.fillStyle = ctx.strokeStyle = color;\n        ctx.globalAlpha = Math.min(nodeFrom.getData('alpha'), \n            nodeTo.getData('alpha'), \n            adj.getData('alpha'));\n        \n        for(var s in ctxObj) {\n          ctx[s] = adj.getCanvasStyle(s);\n        }\n\n        this.edgeTypes[f].render.call(this, adj, canvas, animating);\n        ctx.restore();\n      }\n    }    \n  \n};\n\n/*\n  Object: Graph.Plot3D\n  \n  <Graph> 3D rendering and animation methods.\n  \n  Properties:\n  \n  nodeHelper - <NodeHelper> object.\n  edgeHelper - <EdgeHelper> object.\n\n*/\nGraph.Plot3D = $.merge(Graph.Plot, {\n  Interpolator: {\n    'linear': function(elem, props, delta) {\n      var from = elem.startPos.getc(true);\n      var to = elem.endPos.getc(true);\n      elem.pos.setc(this.compute(from.x, to.x, delta), \n                    this.compute(from.y, to.y, delta),\n                    this.compute(from.z, to.z, delta));\n    }\n  },\n  \n  plotNode: function(node, canvas) {\n    if(node.getData('type') == 'none') return;\n    this.plotElement(node, canvas, {\n      getAlpha: function() {\n        return node.getData('alpha');\n      }\n    });\n  },\n  \n  plotLine: function(adj, canvas) {\n    if(adj.getData('type') == 'none') return;\n    this.plotElement(adj, canvas, {\n      getAlpha: function() {\n        return Math.min(adj.nodeFrom.getData('alpha'),\n                        adj.nodeTo.getData('alpha'),\n                        adj.getData('alpha'));\n      }\n    });\n  },\n  \n  plotElement: function(elem, canvas, opt) {\n    var gl = canvas.getCtx(),\n        viewMatrix = new Matrix4,\n        lighting = canvas.config.Scene.Lighting,\n        wcanvas = canvas.canvases[0],\n        program = wcanvas.program,\n        camera = wcanvas.camera;\n    \n    if(!elem.geometry) {\n      elem.geometry = new O3D[elem.getData('type')];\n    }\n    elem.geometry.update(elem);\n    if(!elem.webGLVertexBuffer) {\n      var vertices = [],\n          faces = [],\n          normals = [],\n          vertexIndex = 0,\n          geom = elem.geometry;\n      \n      for(var i=0, vs=geom.vertices, fs=geom.faces, fsl=fs.length; i<fsl; i++) {\n        var face = fs[i],\n            v1 = vs[face.a],\n            v2 = vs[face.b],\n            v3 = vs[face.c],\n            v4 = face.d? vs[face.d] : false,\n            n = face.normal;\n        \n        vertices.push(v1.x, v1.y, v1.z);\n        vertices.push(v2.x, v2.y, v2.z);\n        vertices.push(v3.x, v3.y, v3.z);\n        if(v4) vertices.push(v4.x, v4.y, v4.z);\n            \n        normals.push(n.x, n.y, n.z);\n        normals.push(n.x, n.y, n.z);\n        normals.push(n.x, n.y, n.z);\n        if(v4) normals.push(n.x, n.y, n.z);\n            \n        faces.push(vertexIndex, vertexIndex +1, vertexIndex +2);\n        if(v4) {\n          faces.push(vertexIndex, vertexIndex +2, vertexIndex +3);\n          vertexIndex += 4;\n        } else {\n          vertexIndex += 3;\n        }\n      }\n      //create and store vertex data\n      elem.webGLVertexBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, elem.webGLVertexBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n      //create and store faces index data\n      elem.webGLFaceBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, elem.webGLFaceBuffer);\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(faces), gl.STATIC_DRAW);\n      elem.webGLFaceCount = faces.length;\n      //calculate vertex normals and store them\n      elem.webGLNormalBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, elem.webGLNormalBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(normals), gl.STATIC_DRAW);\n    }\n    viewMatrix.multiply(camera.matrix, elem.geometry.matrix);\n    //send matrix data\n    gl.uniformMatrix4fv(program.viewMatrix, false, viewMatrix.flatten());\n    gl.uniformMatrix4fv(program.projectionMatrix, false, camera.projectionMatrix.flatten());\n    //send normal matrix for lighting\n    var normalMatrix = Matrix4.makeInvert(viewMatrix);\n    normalMatrix.$transpose();\n    gl.uniformMatrix4fv(program.normalMatrix, false, normalMatrix.flatten());\n    //send color data\n    var color = $.hexToRgb(elem.getData('color'));\n    color.push(opt.getAlpha());\n    gl.uniform4f(program.color, color[0] / 255, color[1] / 255, color[2] / 255, color[3]);\n    //send lighting data\n    gl.uniform1i(program.enableLighting, lighting.enable);\n    if(lighting.enable) {\n      //set ambient light color\n      if(lighting.ambient) {\n        var acolor = lighting.ambient;\n        gl.uniform3f(program.ambientColor, acolor[0], acolor[1], acolor[2]);\n      }\n      //set directional light\n      if(lighting.directional) {\n        var dir = lighting.directional,\n            color = dir.color,\n            pos = dir.direction,\n            vd = new Vector3(pos.x, pos.y, pos.z).normalize().$scale(-1);\n        gl.uniform3f(program.lightingDirection, vd.x, vd.y, vd.z);\n        gl.uniform3f(program.directionalColor, color[0], color[1], color[2]);\n      }\n    }\n    //send vertices data\n    gl.bindBuffer(gl.ARRAY_BUFFER, elem.webGLVertexBuffer);\n    gl.vertexAttribPointer(program.position, 3, gl.FLOAT, false, 0, 0);\n    //send normals data\n    gl.bindBuffer(gl.ARRAY_BUFFER, elem.webGLNormalBuffer);\n    gl.vertexAttribPointer(program.normal, 3, gl.FLOAT, false, 0, 0);\n    //draw!\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, elem.webGLFaceBuffer );\n    gl.drawElements(gl.TRIANGLES, elem.webGLFaceCount, gl.UNSIGNED_SHORT, 0);\n  }\n});\n\n\n/*\n * File: Graph.Label.js\n *\n*/\n\n/*\n   Object: Graph.Label\n\n   An interface for plotting/hiding/showing labels.\n\n   Description:\n\n   This is a generic interface for plotting/hiding/showing labels.\n   The <Graph.Label> interface is implemented in multiple ways to provide\n   different label types.\n\n   For example, the Graph.Label interface is implemented as <Graph.Label.HTML> to provide\n   HTML label elements. Also we provide the <Graph.Label.SVG> interface for SVG type labels. \n   The <Graph.Label.Native> interface implements these methods with the native Canvas text rendering functions.\n   \n   All subclasses (<Graph.Label.HTML>, <Graph.Label.SVG> and <Graph.Label.Native>) implement the method plotLabel.\n*/\n\nGraph.Label = {};\n\n/*\n   Class: Graph.Label.Native\n\n   Implements labels natively, using the Canvas text API.\n*/\nGraph.Label.Native = new Class({\n    initialize: function(viz) {\n      this.viz = viz;\n    },\n\n    /*\n       Method: plotLabel\n\n       Plots a label for a given node.\n\n       Parameters:\n\n       canvas - (object) A <Canvas> instance.\n       node - (object) A <Graph.Node>.\n       controller - (object) A configuration object.\n       \n       Example:\n       \n       (start code js)\n       var viz = new $jit.Viz(options);\n       var node = viz.graph.getNode('nodeId');\n       viz.labels.plotLabel(viz.canvas, node, viz.config);\n       (end code)\n    */\n    plotLabel: function(canvas, node, controller) {\n      var ctx = canvas.getCtx();\n      var pos = node.pos.getc(true);\n\n      ctx.font = node.getLabelData('style') + ' ' + node.getLabelData('size') + 'px ' + node.getLabelData('family');\n      ctx.textAlign = node.getLabelData('textAlign');\n      ctx.fillStyle = ctx.strokeStyle = node.getLabelData('color');\n      ctx.textBaseline = node.getLabelData('textBaseline');\n\n      this.renderLabel(canvas, node, controller);\n    },\n\n    /*\n       renderLabel\n\n       Does the actual rendering of the label in the canvas. The default\n       implementation renders the label close to the position of the node, this\n       method should be overriden to position the labels differently.\n\n       Parameters:\n\n       canvas - A <Canvas> instance.\n       node - A <Graph.Node>.\n       controller - A configuration object. See also <Hypertree>, <RGraph>, <ST>.\n    */\n    renderLabel: function(canvas, node, controller) {\n      var ctx = canvas.getCtx();\n      var pos = node.pos.getc(true);\n      ctx.fillText(node.name, pos.x, pos.y + node.getData(\"height\") / 2);\n    },\n\n    /*\n       Method: hideLabel\n   \n       Hides the corresponding <Graph.Node> label.\n    \n       Parameters:\n   \n       node - (object) A <Graph.Node>. Can also be an array of <Graph.Nodes>.\n       show - (boolean) If *true*, nodes will be shown. Otherwise nodes will be hidden.\n   \n       Example:\n       (start code js)\n        var rg = new $jit.Viz(options);\n        viz.labels.hideLabel(viz.graph.getNode('someid'), false);\n       (end code)\n    */\n    hideLabel: function(node, show) {\n      node = $.splat(node);\n      var al = show ? false : true;\n      $.each(node, function(n) {\n        n._hideLabel = al;\n      });\n    },\n    hideLabels: $.empty\n});\n\n/*\n   Class: Graph.Label.DOM\n\n   Abstract Class implementing some DOM label methods.\n\n   Implemented by:\n\n   <Graph.Label.HTML> and <Graph.Label.SVG>.\n\n*/\nGraph.Label.DOM = new Class({\n    //A flag value indicating if node labels are being displayed or not.\n    labelsHidden: false,\n    //Label container\n    labelContainer: false,\n    //Label elements hash.\n    labels: {},\n\n    /*\n       Method: getLabelContainer\n\n       Lazy fetcher for the label container.\n\n       Returns:\n\n       The label container DOM element.\n\n       Example:\n\n      (start code js)\n        var viz = new $jit.Viz(options);\n        var labelContainer = viz.labels.getLabelContainer();\n        alert(labelContainer.innerHTML);\n      (end code)\n    */\n    getLabelContainer: function() {\n      return this.labelContainer ?\n        this.labelContainer :\n        this.labelContainer = document.getElementById(this.viz.config.labelContainer);\n    },\n\n    /*\n       Method: getLabel\n\n       Lazy fetcher for the label element.\n\n       Parameters:\n\n       id - (string) The label id (which is also a <Graph.Node> id).\n\n       Returns:\n\n       The label element.\n\n       Example:\n\n      (start code js)\n        var viz = new $jit.Viz(options);\n        var label = viz.labels.getLabel('someid');\n        alert(label.innerHTML);\n      (end code)\n\n    */\n    getLabel: function(id) {\n      return (id in this.labels && this.labels[id] != null) ?\n        this.labels[id] :\n        this.labels[id] = document.getElementById(id);\n    },\n\n    /*\n       Method: hideLabels\n\n       Hides all labels (by hiding the label container).\n\n       Parameters:\n\n       hide - (boolean) A boolean value indicating if the label container must be hidden or not.\n\n       Example:\n       (start code js)\n        var viz = new $jit.Viz(options);\n        rg.labels.hideLabels(true);\n       (end code)\n\n    */\n    hideLabels: function (hide) {\n      var container = this.getLabelContainer();\n      if(hide)\n        container.style.display = 'none';\n      else\n        container.style.display = '';\n      this.labelsHidden = hide;\n    },\n\n    /*\n       Method: clearLabels\n\n       Clears the label container.\n\n       Useful when using a new visualization with the same canvas element/widget.\n\n       Parameters:\n\n       force - (boolean) Forces deletion of all labels.\n\n       Example:\n       (start code js)\n        var viz = new $jit.Viz(options);\n        viz.labels.clearLabels();\n        (end code)\n    */\n    clearLabels: function(force) {\n      for(var id in this.labels) {\n        if (force || !this.viz.graph.hasNode(id)) {\n          this.disposeLabel(id);\n          delete this.labels[id];\n        }\n      }\n    },\n\n    /*\n       Method: disposeLabel\n\n       Removes a label.\n\n       Parameters:\n\n       id - (string) A label id (which generally is also a <Graph.Node> id).\n\n       Example:\n       (start code js)\n        var viz = new $jit.Viz(options);\n        viz.labels.disposeLabel('labelid');\n       (end code)\n    */\n    disposeLabel: function(id) {\n      var elem = this.getLabel(id);\n      if(elem && elem.parentNode) {\n        elem.parentNode.removeChild(elem);\n      }\n    },\n\n    /*\n       Method: hideLabel\n\n       Hides the corresponding <Graph.Node> label.\n\n       Parameters:\n\n       node - (object) A <Graph.Node>. Can also be an array of <Graph.Nodes>.\n       show - (boolean) If *true*, nodes will be shown. Otherwise nodes will be hidden.\n\n       Example:\n       (start code js)\n        var rg = new $jit.Viz(options);\n        viz.labels.hideLabel(viz.graph.getNode('someid'), false);\n       (end code)\n    */\n    hideLabel: function(node, show) {\n      node = $.splat(node);\n      var st = show ? \"\" : \"none\", lab, that = this;\n      $.each(node, function(n) {\n        lab = that.getLabel(n.id);\n        if (lab) {\n          lab.style.display = st;\n        }\n      });\n    },\n\n    /*\n       fitsInCanvas\n\n       Returns _true_ or _false_ if the label for the node is contained in the canvas dom element or not.\n\n       Parameters:\n\n       pos - A <Complex> instance (I'm doing duck typing here so any object with _x_ and _y_ parameters will do).\n       canvas - A <Canvas> instance.\n\n       Returns:\n\n       A boolean value specifying if the label is contained in the <Canvas> DOM element or not.\n\n    */\n    fitsInCanvas: function(pos, canvas) {\n      var size = canvas.getSize();\n      if (pos.w && pos.h) {\n      \tif (pos.x >= size.width || pos.x < -pos.w\n         || pos.y >= size.height || pos.y < -pos.h) return false;      \t\n      }\n      else {\n      \tif (pos.x >= size.width || pos.x < 0\n         || pos.y >= size.height || pos.y < 0) return false;\n      }\n       return true;\n    }\n});\n\n/*\n   Class: Graph.Label.HTML\n\n   Implements HTML labels.\n\n   Extends:\n\n   All <Graph.Label.DOM> methods.\n\n*/\nGraph.Label.HTML = new Class({\n    Implements: Graph.Label.DOM,\n\n    /*\n       Method: plotLabel\n\n       Plots a label for a given node.\n\n       Parameters:\n\n       canvas - (object) A <Canvas> instance.\n       node - (object) A <Graph.Node>.\n       controller - (object) A configuration object.\n       \n      Example:\n       \n       (start code js)\n       var viz = new $jit.Viz(options);\n       var node = viz.graph.getNode('nodeId');\n       viz.labels.plotLabel(viz.canvas, node, viz.config);\n       (end code)\n\n\n    */\n    plotLabel: function(canvas, node, controller) {\n      var id = node.id, tag = this.getLabel(id);\n\n      if(!tag && !(tag = document.getElementById(id))) {\n        tag = document.createElement('div');\n        var container = this.getLabelContainer();\n        tag.id = id;\n        tag.className = 'node';\n        tag.style.position = 'absolute';\n        controller.onCreateLabel(tag, node);\n        container.appendChild(tag);\n        this.labels[node.id] = tag;\n      }\n\n      this.placeLabel(tag, node, controller);\n    }\n});\n\n/*\n   Class: Graph.Label.SVG\n\n   Implements SVG labels.\n\n   Extends:\n\n   All <Graph.Label.DOM> methods.\n*/\nGraph.Label.SVG = new Class({\n    Implements: Graph.Label.DOM,\n\n    /*\n       Method: plotLabel\n\n       Plots a label for a given node.\n\n       Parameters:\n\n       canvas - (object) A <Canvas> instance.\n       node - (object) A <Graph.Node>.\n       controller - (object) A configuration object.\n       \n       Example:\n       \n       (start code js)\n       var viz = new $jit.Viz(options);\n       var node = viz.graph.getNode('nodeId');\n       viz.labels.plotLabel(viz.canvas, node, viz.config);\n       (end code)\n\n\n    */\n    plotLabel: function(canvas, node, controller) {\n      var id = node.id, tag = this.getLabel(id);\n      if(!tag && !(tag = document.getElementById(id))) {\n        var ns = 'http://www.w3.org/2000/svg';\n          tag = document.createElementNS(ns, 'svg:text');\n        var tspan = document.createElementNS(ns, 'svg:tspan');\n        tag.appendChild(tspan);\n        var container = this.getLabelContainer();\n        tag.setAttribute('id', id);\n        tag.setAttribute('class', 'node');\n        container.appendChild(tag);\n        controller.onCreateLabel(tag, node);\n        this.labels[node.id] = tag;\n      }\n      this.placeLabel(tag, node, controller);\n    }\n});\n\n\n\nGraph.Geom = new Class({\n\n  initialize: function(viz) {\n    this.viz = viz;\n    this.config = viz.config;\n    this.node = viz.config.Node;\n    this.edge = viz.config.Edge;\n  },\n  /*\n    Applies a translation to the tree.\n  \n    Parameters:\n  \n    pos - A <Complex> number specifying translation vector.\n    prop - A <Graph.Node> position property ('pos', 'start' or 'end').\n  \n    Example:\n  \n    (start code js)\n      st.geom.translate(new Complex(300, 100), 'end');\n    (end code)\n  */  \n  translate: function(pos, prop) {\n     prop = $.splat(prop);\n     this.viz.graph.eachNode(function(elem) {\n         $.each(prop, function(p) { elem.getPos(p).$add(pos); });\n     });\n  },\n  /*\n    Hides levels of the tree until it properly fits in canvas.\n  */  \n  setRightLevelToShow: function(node, canvas, callback) {\n     var level = this.getRightLevelToShow(node, canvas), \n         fx = this.viz.labels,\n         opt = $.merge({\n           execShow:true,\n           execHide:true,\n           onHide: $.empty,\n           onShow: $.empty\n         }, callback || {});\n     node.eachLevel(0, this.config.levelsToShow, function(n) {\n         var d = n._depth - node._depth;\n         if(d > level) {\n             opt.onHide(n);\n             if(opt.execHide) {\n               n.drawn = false; \n               n.exist = false;\n               fx.hideLabel(n, false);\n             }\n         } else {\n             opt.onShow(n);\n             if(opt.execShow) {\n               n.exist = true;\n             }\n         }\n     });\n     node.drawn= true;\n  },\n  /*\n    Returns the right level to show for the current tree in order to fit in canvas.\n  */  \n  getRightLevelToShow: function(node, canvas) {\n     var config = this.config;\n     var level = config.levelsToShow;\n     var constrained = config.constrained;\n     if(!constrained) return level;\n     while(!this.treeFitsInCanvas(node, canvas, level) && level > 1) { level-- ; }\n     return level;\n  }\n});\n\n/*\n * File: Loader.js\n * \n */\n\n/*\n   Object: Loader\n\n   Provides methods for loading and serving JSON data.\n*/\nvar Loader = {\n     construct: function(json) {\n        var isGraph = ($.type(json) == 'array');\n        var ans = new Graph(this.graphOptions, this.config.Node, this.config.Edge, this.config.Label);\n        if(!isGraph) \n            //make tree\n            (function (ans, json) {\n                ans.addNode(json);\n                if(json.children) {\n                  for(var i=0, ch = json.children; i<ch.length; i++) {\n                    ans.addAdjacence(json, ch[i]);\n                    arguments.callee(ans, ch[i]);\n                  }\n                }\n            })(ans, json);\n        else\n            //make graph\n            (function (ans, json) {\n                var getNode = function(id) {\n                  for(var i=0, l=json.length; i<l; i++) {\n                    if(json[i].id == id) {\n                      return json[i];\n                    }\n                  }\n                  // The node was not defined in the JSON\n                  // Let's create it\n                  var newNode = {\n                \t\t\"id\" : id,\n                \t\t\"name\" : id\n                \t};\n                  return ans.addNode(newNode);\n                };\n\n                for(var i=0, l=json.length; i<l; i++) {\n                  ans.addNode(json[i]);\n                  var adj = json[i].adjacencies;\n                  if (adj) {\n                    for(var j=0, lj=adj.length; j<lj; j++) {\n                      var node = adj[j], data = {};\n                      if(typeof adj[j] != 'string') {\n                        data = $.merge(node.data, {});\n                        node = node.nodeTo;\n                      }\n                      ans.addAdjacence(json[i], getNode(node), data);\n                    }\n                  }\n                }\n            })(ans, json);\n\n        return ans;\n    },\n\n    /*\n     Method: loadJSON\n    \n     Loads a JSON structure to the visualization. The JSON structure can be a JSON *tree* or *graph* structure.\n     \n      A JSON tree or graph structure consists of nodes, each having as properties\n       \n       id - (string) A unique identifier for the node\n       name - (string) A node's name\n       data - (object) The data optional property contains a hash (i.e {}) \n       where you can store all the information you want about this node.\n        \n      For JSON *Tree* structures, there's an extra optional property *children* of type Array which contains the node's children.\n      \n      Example:\n\n      (start code js)\n        var json = {  \n          \"id\": \"aUniqueIdentifier\",  \n          \"name\": \"usually a nodes name\",  \n          \"data\": {\n            \"some key\": \"some value\",\n            \"some other key\": \"some other value\"\n           },  \n          \"children\": [ *other nodes or empty* ]  \n        };  \n      (end code)\n        \n        JSON *Graph* structures consist of an array of nodes, each specifying the nodes to which the current node is connected. \n        For JSON *Graph* structures, the *children* property is replaced by the *adjacencies* property.\n        \n        There are two types of *Graph* structures, *simple* and *extended* graph structures.\n        \n        For *simple* Graph structures, the adjacencies property contains an array of strings, each specifying the \n        id of the node connected to the main node.\n        \n        Example:\n        \n        (start code js)\n        var json = [  \n          {  \n            \"id\": \"aUniqueIdentifier\",  \n            \"name\": \"usually a nodes name\",  \n            \"data\": {\n              \"some key\": \"some value\",\n              \"some other key\": \"some other value\"\n             },  \n            \"adjacencies\": [\"anotherUniqueIdentifier\", \"yetAnotherUniqueIdentifier\", 'etc']  \n          },\n\n          'other nodes go here...' \n        ];          \n        (end code)\n        \n        For *extended Graph structures*, the adjacencies property contains an array of Adjacency objects that have as properties\n        \n        nodeTo - (string) The other node connected by this adjacency.\n        data - (object) A data property, where we can store custom key/value information.\n        \n        Example:\n        \n        (start code js)\n        var json = [  \n          {  \n            \"id\": \"aUniqueIdentifier\",  \n            \"name\": \"usually a nodes name\",  \n            \"data\": {\n              \"some key\": \"some value\",\n              \"some other key\": \"some other value\"\n             },  \n            \"adjacencies\": [  \n            {  \n              nodeTo:\"aNodeId\",  \n              data: {} //put whatever you want here  \n            },\n            'other adjacencies go here...'  \n          },\n\n          'other nodes go here...' \n        ];          \n        (end code)\n       \n       About the data property:\n       \n       As described before, you can store custom data in the *data* property of JSON *nodes* and *adjacencies*. \n       You can use almost any string as key for the data object. Some keys though are reserved by the toolkit, and \n       have special meanings. This is the case for keys starting with a dollar sign, for example, *$width*.\n       \n       For JSON *node* objects, adding dollar prefixed properties that match the names of the options defined in \n       <Options.Node> will override the general value for that option with that particular value. For this to work \n       however, you do have to set *overridable = true* in <Options.Node>.\n       \n       The same thing is true for JSON adjacencies. Dollar prefixed data properties will alter values set in <Options.Edge> \n       if <Options.Edge> has *overridable = true*.\n       \n       When loading JSON data into TreeMaps, the *data* property must contain a value for the *$area* key, \n       since this is the value which will be taken into account when creating the layout. \n       The same thing goes for the *$color* parameter.\n       \n       In JSON Nodes you can use also *$label-* prefixed properties to refer to <Options.Label> properties. For example, \n       *$label-size* will refer to <Options.Label> size property. Also, in JSON nodes and adjacencies you can set \n       canvas specific properties individually by using the *$canvas-* prefix. For example, *$canvas-shadowBlur* will refer \n       to the *shadowBlur* property.\n       \n       These properties can also be accessed after loading the JSON data from <Graph.Nodes> and <Graph.Adjacences> \n       by using <Accessors>. For more information take a look at the <Graph> and <Accessors> documentation.\n       \n       Finally, these properties can also be used to create advanced animations like with <Options.NodeStyles>. For more \n       information about creating animations please take a look at the <Graph.Plot> and <Graph.Plot.animate> documentation.\n       \n       loadJSON Parameters:\n    \n        json - A JSON Tree or Graph structure.\n        i - For Graph structures only. Sets the indexed node as root for the visualization.\n\n    */\n    loadJSON: function(json, i) {\n      this.json = json;\n      //if they're canvas labels erase them.\n      if(this.labels && this.labels.clearLabels) {\n        this.labels.clearLabels(true);\n      }\n      this.graph = this.construct(json);\n      if($.type(json) != 'array'){\n        this.root = json.id;\n      } else {\n        this.root = json[i? i : 0].id;\n      }\n    },\n    \n    /*\n      Method: toJSON\n   \n      Returns a JSON tree/graph structure from the visualization's <Graph>. \n      See <Loader.loadJSON> for the graph formats available.\n      \n      See also:\n      \n      <Loader.loadJSON>\n      \n      Parameters:\n      \n      type - (string) Default's \"tree\". The type of the JSON structure to be returned. \n      Possible options are \"tree\" or \"graph\".\n    */    \n    toJSON: function(type) {\n      type = type || \"tree\";\n      if(type == 'tree') {\n        var ans = {};\n        var rootNode = this.graph.getNode(this.root);\n        var ans = (function recTree(node) {\n          var ans = {};\n          ans.id = node.id;\n          ans.name = node.name;\n          ans.data = node.data;\n          var ch =[];\n          node.eachSubnode(function(n) {\n            ch.push(recTree(n));\n          });\n          ans.children = ch;\n          return ans;\n        })(rootNode);\n        return ans;\n      } else {\n        var ans = [];\n        var T = !!this.graph.getNode(this.root).visited;\n        this.graph.eachNode(function(node) {\n          var ansNode = {};\n          ansNode.id = node.id;\n          ansNode.name = node.name;\n          ansNode.data = node.data;\n          var adjs = [];\n          node.eachAdjacency(function(adj) {\n            var nodeTo = adj.nodeTo;\n            if(!!nodeTo.visited === T) {\n              var ansAdj = {};\n              ansAdj.nodeTo = nodeTo.id;\n              ansAdj.data = adj.data;\n              adjs.push(ansAdj);\n            }\n          });\n          ansNode.adjacencies = adjs;\n          ans.push(ansNode);\n          node.visited = !T;\n        });\n        return ans;\n      }\n    }\n};\n\n\n\n/*\n * File: Layouts.js\n * \n * Implements base Tree and Graph layouts.\n *\n * Description:\n *\n * Implements base Tree and Graph layouts like Radial, Tree, etc.\n * \n */\n\n/*\n * Object: Layouts\n * \n * Parent object for common layouts.\n *\n */\nvar Layouts = $jit.Layouts = {};\n\n\n//Some util shared layout functions are defined here.\nvar NodeDim = {\n  label: null,\n  \n  compute: function(graph, prop, opt) {\n    this.initializeLabel(opt);\n    var label = this.label, style = label.style;\n    graph.eachNode(function(n) {\n      var autoWidth  = n.getData('autoWidth'),\n          autoHeight = n.getData('autoHeight');\n      if(autoWidth || autoHeight) {\n        //delete dimensions since these are\n        //going to be overridden now.\n        delete n.data.$width;\n        delete n.data.$height;\n        delete n.data.$dim;\n        \n        var width  = n.getData('width'),\n            height = n.getData('height');\n        //reset label dimensions\n        style.width  = autoWidth? 'auto' : width + 'px';\n        style.height = autoHeight? 'auto' : height + 'px';\n        \n        //TODO(nico) should let the user choose what to insert here.\n        label.innerHTML = n.name;\n        \n        var offsetWidth  = label.offsetWidth,\n            offsetHeight = label.offsetHeight;\n        var type = n.getData('type');\n        if($.indexOf(['circle', 'square', 'triangle', 'star'], type) === -1) {\n          n.setData('width', offsetWidth);\n          n.setData('height', offsetHeight);\n        } else {\n          var dim = offsetWidth > offsetHeight? offsetWidth : offsetHeight;\n          n.setData('width', dim);\n          n.setData('height', dim);\n          n.setData('dim', dim); \n        }\n      }\n    });\n  },\n  \n  initializeLabel: function(opt) {\n    if(!this.label) {\n      this.label = document.createElement('div');\n      document.body.appendChild(this.label);\n    }\n    this.setLabelStyles(opt);\n  },\n  \n  setLabelStyles: function(opt) {\n    $.extend(this.label.style, {\n      'visibility': 'hidden',\n      'position': 'absolute',\n      'width': 'auto',\n      'height': 'auto'\n    });\n    this.label.className = 'jit-autoadjust-label';\n  }\n};\n\n\n/*\n * Class: Layouts.Tree\n *\n * Implements a Tree Layout.\n *\n * Implemented By:\n *\n * <ST>\n *\n * Inspired by:\n *\n * Drawing Trees (Andrew J. Kennedy) <http://research.microsoft.com/en-us/um/people/akenn/fun/drawingtrees.pdf>\n *\n */\nLayouts.Tree = (function() {\n  //Layout functions\n  var slice = Array.prototype.slice;\n\n  /*\n     Calculates the max width and height nodes for a tree level\n  */\n  function getBoundaries(graph, config, level, orn, prop) {\n    var dim = config.Node;\n    var multitree = config.multitree;\n    if (dim.overridable) {\n      var w = -1, h = -1;\n      graph.eachNode(function(n) {\n        if (n._depth == level\n            && (!multitree || ('$orn' in n.data) && n.data.$orn == orn)) {\n          var dw = n.getData('width', prop);\n          var dh = n.getData('height', prop);\n          w = (w < dw) ? dw : w;\n          h = (h < dh) ? dh : h;\n        }\n      });\n      return {\n        'width' : w < 0 ? dim.width : w,\n        'height' : h < 0 ? dim.height : h\n      };\n    } else {\n      return dim;\n    }\n  }\n\n\n  function movetree(node, prop, val, orn) {\n    var p = (orn == \"left\" || orn == \"right\") ? \"y\" : \"x\";\n    node.getPos(prop)[p] += val;\n  }\n\n\n  function moveextent(extent, val) {\n    var ans = [];\n    $.each(extent, function(elem) {\n      elem = slice.call(elem);\n      elem[0] += val;\n      elem[1] += val;\n      ans.push(elem);\n    });\n    return ans;\n  }\n\n\n  function merge(ps, qs) {\n    if (ps.length == 0)\n      return qs;\n    if (qs.length == 0)\n      return ps;\n    var p = ps.shift(), q = qs.shift();\n    return [ [ p[0], q[1] ] ].concat(merge(ps, qs));\n  }\n\n\n  function mergelist(ls, def) {\n    def = def || [];\n    if (ls.length == 0)\n      return def;\n    var ps = ls.pop();\n    return mergelist(ls, merge(ps, def));\n  }\n\n\n  function fit(ext1, ext2, subtreeOffset, siblingOffset, i) {\n    if (ext1.length <= i || ext2.length <= i)\n      return 0;\n\n    var p = ext1[i][1], q = ext2[i][0];\n    return Math.max(fit(ext1, ext2, subtreeOffset, siblingOffset, ++i)\n        + subtreeOffset, p - q + siblingOffset);\n  }\n\n\n  function fitlistl(es, subtreeOffset, siblingOffset) {\n    function $fitlistl(acc, es, i) {\n      if (es.length <= i)\n        return [];\n      var e = es[i], ans = fit(acc, e, subtreeOffset, siblingOffset, 0);\n      return [ ans ].concat($fitlistl(merge(acc, moveextent(e, ans)), es, ++i));\n    }\n    ;\n    return $fitlistl( [], es, 0);\n  }\n\n\n  function fitlistr(es, subtreeOffset, siblingOffset) {\n    function $fitlistr(acc, es, i) {\n      if (es.length <= i)\n        return [];\n      var e = es[i], ans = -fit(e, acc, subtreeOffset, siblingOffset, 0);\n      return [ ans ].concat($fitlistr(merge(moveextent(e, ans), acc), es, ++i));\n    }\n    ;\n    es = slice.call(es);\n    var ans = $fitlistr( [], es.reverse(), 0);\n    return ans.reverse();\n  }\n\n\n  function fitlist(es, subtreeOffset, siblingOffset, align) {\n    var esl = fitlistl(es, subtreeOffset, siblingOffset), esr = fitlistr(es,\n        subtreeOffset, siblingOffset);\n\n    if (align == \"left\")\n      esr = esl;\n    else if (align == \"right\")\n      esl = esr;\n\n    for ( var i = 0, ans = []; i < esl.length; i++) {\n      ans[i] = (esl[i] + esr[i]) / 2;\n    }\n    return ans;\n  }\n\n\n  function design(graph, node, prop, config, orn) {\n    var multitree = config.multitree;\n    var auxp = [ 'x', 'y' ], auxs = [ 'width', 'height' ];\n    var ind = +(orn == \"left\" || orn == \"right\");\n    var p = auxp[ind], notp = auxp[1 - ind];\n\n    var cnode = config.Node;\n    var s = auxs[ind], nots = auxs[1 - ind];\n\n    var siblingOffset = config.siblingOffset;\n    var subtreeOffset = config.subtreeOffset;\n    var align = config.align;\n\n    function $design(node, maxsize, acum) {\n      var sval = node.getData(s, prop);\n      var notsval = maxsize\n          || (node.getData(nots, prop));\n\n      var trees = [], extents = [], chmaxsize = false;\n      var chacum = notsval + config.levelDistance;\n      node.eachSubnode(function(n) {\n            if (n.exist\n                && (!multitree || ('$orn' in n.data) && n.data.$orn == orn)) {\n\n              if (config.levelSpacing == 'even') {\n                if (!chmaxsize) {\n                  chmaxsize = getBoundaries(graph, config, n._depth, orn, prop);\n                }\n              } else {\n                chmaxsize = { width: n.getData('width'), height: n.getData('height') };\n              }\n\n\n              var s = $design(n, chmaxsize[nots], acum + chacum);\n              trees.push(s.tree);\n              extents.push(s.extent);\n            }\n          });\n      var positions = fitlist(extents, subtreeOffset, siblingOffset, align);\n      for ( var i = 0, ptrees = [], pextents = []; i < trees.length; i++) {\n        movetree(trees[i], prop, positions[i], orn);\n        pextents.push(moveextent(extents[i], positions[i]));\n      }\n      var resultextent = [ [ -sval / 2, sval / 2 ] ]\n          .concat(mergelist(pextents));\n      node.getPos(prop)[p] = 0;\n\n      if (orn == \"top\" || orn == \"left\") {\n        node.getPos(prop)[notp] = acum;\n      } else {\n        node.getPos(prop)[notp] = -acum;\n      }\n\n      return {\n        tree : node,\n        extent : resultextent\n      };\n    }\n\n    $design(node, false, 0);\n  }\n\n\n  return new Class({\n    /*\n    Method: compute\n\n    Computes nodes' positions.\n\n     */\n    compute : function(property, computeLevels) {\n      var prop = property || 'start';\n      var node = this.graph.getNode(this.root);\n      $.extend(node, {\n        'drawn' : true,\n        'exist' : true,\n        'selected' : true\n      });\n      NodeDim.compute(this.graph, prop, this.config);\n      if (!!computeLevels || !(\"_depth\" in node)) {\n        this.graph.computeLevels(this.root, 0, \"ignore\");\n      }\n\n      this.computePositions(node, prop);\n    },\n\n    computePositions : function(node, prop) {\n      var config = this.config;\n      var multitree = config.multitree;\n      var align = config.align;\n      var indent = align !== 'center' && config.indent;\n      var orn = config.orientation;\n      var orns = multitree ? [ 'top', 'right', 'bottom', 'left' ] : [ orn ];\n      var that = this;\n      $.each(orns, function(orn) {\n        //calculate layout\n          design(that.graph, node, prop, that.config, orn, prop);\n          var i = [ 'x', 'y' ][+(orn == \"left\" || orn == \"right\")];\n          //absolutize\n          (function red(node) {\n            node.eachSubnode(function(n) {\n              if (n.exist\n                  && (!multitree || ('$orn' in n.data) && n.data.$orn == orn)) {\n\n                n.getPos(prop)[i] += node.getPos(prop)[i];\n                if (indent) {\n                  n.getPos(prop)[i] += align == 'left' ? indent : -indent;\n                }\n                red(n);\n              }\n            });\n          })(node);\n        });\n    }\n  });\n\n})();\n\n\n/*\n * File: Spacetree.js\n */\n\n/*\n   Class: ST\n\n  A Tree layout with advanced contraction and expansion animations.\n\n  Inspired by:\n\n  SpaceTree: Supporting Exploration in Large Node Link Tree, Design Evolution and Empirical Evaluation (Catherine Plaisant, Jesse Grosjean, Benjamin B. Bederson)\n  <http://hcil.cs.umd.edu/trs/2002-05/2002-05.pdf>\n\n  Drawing Trees (Andrew J. Kennedy) <http://research.microsoft.com/en-us/um/people/akenn/fun/drawingtrees.pdf>\n\n  Note:\n\n  This visualization was built and engineered from scratch, taking only the papers as inspiration, and only shares some features with the visualization described in those papers.\n\n  Implements:\n\n  All <Loader> methods\n\n  Constructor Options:\n\n  Inherits options from\n\n  - <Options.Canvas>\n  - <Options.Controller>\n  - <Options.Tree>\n  - <Options.Node>\n  - <Options.Edge>\n  - <Options.Label>\n  - <Options.Events>\n  - <Options.Tips>\n  - <Options.NodeStyles>\n  - <Options.Navigation>\n\n  Additionally, there are other parameters and some default values changed\n\n  constrained - (boolean) Default's *true*. Whether to show the entire tree when loaded or just the number of levels specified by _levelsToShow_.\n  levelsToShow - (number) Default's *2*. The number of levels to show for a subtree. This number is relative to the selected node.\n  levelDistance - (number) Default's *30*. The distance between two consecutive levels of the tree.\n  Node.type - Described in <Options.Node>. Default's set to *rectangle*.\n  offsetX - (number) Default's *0*. The x-offset distance from the selected node to the center of the canvas.\n  offsetY - (number) Default's *0*. The y-offset distance from the selected node to the center of the canvas.\n  duration - Described in <Options.Fx>. It's default value has been changed to *700*.\n\n  Instance Properties:\n\n  canvas - Access a <Canvas> instance.\n  graph - Access a <Graph> instance.\n  op - Access a <ST.Op> instance.\n  fx - Access a <ST.Plot> instance.\n  labels - Access a <ST.Label> interface implementation.\n\n */\n\n$jit.ST= (function() {\n    // Define some private methods first...\n    // Nodes in path\n    var nodesInPath = [];\n    // Nodes to contract\n    function getNodesToHide(node) {\n      node = node || this.clickedNode;\n      if(!this.config.constrained) {\n        return [];\n      }\n      var Geom = this.geom;\n      var graph = this.graph;\n      var canvas = this.canvas;\n      var level = node._depth, nodeArray = [];\n  \t  graph.eachNode(function(n) {\n          if(n.exist && !n.selected) {\n              if(n.isDescendantOf(node.id)) {\n                if(n._depth <= level) nodeArray.push(n);\n              } else {\n                nodeArray.push(n);\n              }\n          }\n  \t  });\n  \t  var leafLevel = Geom.getRightLevelToShow(node, canvas);\n  \t  node.eachLevel(leafLevel, leafLevel, function(n) {\n          if(n.exist && !n.selected) nodeArray.push(n);\n  \t  });\n\n  \t  for (var i = 0; i < nodesInPath.length; i++) {\n  \t    var n = this.graph.getNode(nodesInPath[i]);\n  \t    if(!n.isDescendantOf(node.id)) {\n  \t      nodeArray.push(n);\n  \t    }\n  \t  }\n  \t  return nodeArray;\n    };\n    // Nodes to expand\n     function getNodesToShow(node) {\n        var nodeArray = [], config = this.config;\n        node = node || this.clickedNode;\n        this.clickedNode.eachLevel(0, config.levelsToShow, function(n) {\n            if(config.multitree && !('$orn' in n.data)\n            \t\t&& n.anySubnode(function(ch){ return ch.exist && !ch.drawn; })) {\n            \tnodeArray.push(n);\n            } else if(n.drawn && !n.anySubnode(\"drawn\")) {\n              nodeArray.push(n);\n            }\n        });\n        return nodeArray;\n     };\n    // Now define the actual class.\n    return new Class({\n\n        Implements: [Loader, Extras, Layouts.Tree],\n\n        initialize: function(controller) {\n          var $ST = $jit.ST;\n\n          var config= {\n                levelsToShow: 2,\n                levelDistance: 30,\n                constrained: true,\n                Node: {\n                  type: 'rectangle'\n                },\n                duration: 700,\n                offsetX: 0,\n                offsetY: 0\n            };\n\n            this.controller = this.config = $.merge(\n                Options(\"Canvas\", \"Fx\", \"Tree\", \"Node\", \"Edge\", \"Controller\",\n                    \"Tips\", \"NodeStyles\", \"Events\", \"Navigation\", \"Label\"), config, controller);\n\n            var canvasConfig = this.config;\n            if(canvasConfig.useCanvas) {\n              this.canvas = canvasConfig.useCanvas;\n              this.config.labelContainer = this.canvas.id + '-label';\n            } else {\n              if(canvasConfig.background) {\n                canvasConfig.background = $.merge({\n                  type: 'Circles'\n                }, canvasConfig.background);\n              }\n              this.canvas = new Canvas(this, canvasConfig);\n              this.config.labelContainer = (typeof canvasConfig.injectInto == 'string'? canvasConfig.injectInto : canvasConfig.injectInto.id) + '-label';\n            }\n\n            this.graphOptions = {\n                'klass': Complex\n            };\n            this.graph = new Graph(this.graphOptions, this.config.Node, this.config.Edge);\n            this.labels = new $ST.Label[canvasConfig.Label.type](this);\n            this.fx = new $ST.Plot(this, $ST);\n            this.op = new $ST.Op(this);\n            this.group = new $ST.Group(this);\n            this.geom = new $ST.Geom(this);\n            this.clickedNode=  null;\n            // initialize extras\n            this.initializeExtras();\n        },\n\n        /*\n         Method: plot\n\n         Plots the <ST>. This is a shortcut to *fx.plot*.\n\n        */\n        plot: function() { this.fx.plot(this.controller); },\n\n\n        /*\n         Method: switchPosition\n\n         Switches the tree orientation.\n\n         Parameters:\n\n        pos - (string) The new tree orientation. Possible values are \"top\", \"left\", \"right\" and \"bottom\".\n        method - (string) Set this to \"animate\" if you want to animate the tree when switching its position. You can also set this parameter to \"replot\" to just replot the subtree.\n        onComplete - (optional|object) This callback is called once the \"switching\" animation is complete.\n\n         Example:\n\n         (start code js)\n           st.switchPosition(\"right\", \"animate\", {\n            onComplete: function() {\n              alert('completed!');\n            }\n           });\n         (end code)\n        */\n        switchPosition: function(pos, method, onComplete) {\n          var Geom = this.geom, Plot = this.fx, that = this;\n          if(!Plot.busy) {\n              Plot.busy = true;\n              this.contract({\n                  onComplete: function() {\n                      Geom.switchOrientation(pos);\n                      that.compute('end', false);\n                      Plot.busy = false;\n                      if(method == 'animate') {\n                    \t  that.onClick(that.clickedNode.id, onComplete);\n                      } else if(method == 'replot') {\n                    \t  that.select(that.clickedNode.id, onComplete);\n                      }\n                  }\n              }, pos);\n          }\n        },\n\n        /*\n        Method: switchAlignment\n\n        Switches the tree alignment.\n\n        Parameters:\n\n       align - (string) The new tree alignment. Possible values are \"left\", \"center\" and \"right\".\n       method - (string) Set this to \"animate\" if you want to animate the tree after aligning its position. You can also set this parameter to \"replot\" to just replot the subtree.\n       onComplete - (optional|object) This callback is called once the \"switching\" animation is complete.\n\n        Example:\n\n        (start code js)\n          st.switchAlignment(\"right\", \"animate\", {\n           onComplete: function() {\n             alert('completed!');\n           }\n          });\n        (end code)\n       */\n       switchAlignment: function(align, method, onComplete) {\n        this.config.align = align;\n        if(method == 'animate') {\n        \tthis.select(this.clickedNode.id, onComplete);\n        } else if(method == 'replot') {\n        \tthis.onClick(this.clickedNode.id, onComplete);\n        }\n       },\n\n       /*\n        Method: addNodeInPath\n\n        Adds a node to the current path as selected node. The selected node will be visible (as in non-collapsed) at all times.\n\n\n        Parameters:\n\n       id - (string) A <Graph.Node> id.\n\n        Example:\n\n        (start code js)\n          st.addNodeInPath(\"nodeId\");\n        (end code)\n       */\n       addNodeInPath: function(id) {\n           nodesInPath.push(id);\n           this.select((this.clickedNode && this.clickedNode.id) || this.root);\n       },\n\n       /*\n       Method: clearNodesInPath\n\n       Removes all nodes tagged as selected by the <ST.addNodeInPath> method.\n\n       See also:\n\n       <ST.addNodeInPath>\n\n       Example:\n\n       (start code js)\n         st.clearNodesInPath();\n       (end code)\n      */\n       clearNodesInPath: function(id) {\n           nodesInPath.length = 0;\n           this.select((this.clickedNode && this.clickedNode.id) || this.root);\n       },\n\n       /*\n         Method: refresh\n\n         Computes positions and plots the tree.\n\n       */\n       refresh: function() {\n           this.reposition();\n           this.select((this.clickedNode && this.clickedNode.id) || this.root);\n       },\n\n       reposition: function() {\n            this.graph.computeLevels(this.root, 0, \"ignore\");\n            this.geom.setRightLevelToShow(this.clickedNode, this.canvas);\n            this.graph.eachNode(function(n) {\n                if(n.exist) n.drawn = true;\n            });\n            this.compute('end');\n            if (this.clickedNode) {\n              var offset = {\n                  x: this.canvas.translateOffsetX + this.config.offsetX || 0, \n                  y: this.canvas.translateOffsetY + this.config.offsetY || 0\n              };\n              this.geom.translate(this.clickedNode.endPos.add(offset).$scale(-1), 'end');\n            }\n        },\n\n        requestNodes: function(node, onComplete) {\n          var handler = $.merge(this.controller, onComplete),\n          lev = this.config.levelsToShow;\n          if(handler.request) {\n              var leaves = [], d = node._depth;\n              node.eachLevel(0, lev, function(n) {\n                  if(n.drawn &&\n                   !n.anySubnode()) {\n                   leaves.push(n);\n                   n._level = lev - (n._depth - d);\n                  }\n              });\n              this.group.requestNodes(leaves, handler);\n          }\n            else\n              handler.onComplete();\n        },\n\n        contract: function(onComplete, switched) {\n          var orn  = this.config.orientation;\n          var Geom = this.geom, Group = this.group;\n          if(switched) Geom.switchOrientation(switched);\n          var nodes = getNodesToHide.call(this);\n          if(switched) Geom.switchOrientation(orn);\n          Group.contract(nodes, $.merge(this.controller, onComplete));\n        },\n\n         move: function(node, onComplete) {\n            this.compute('end', false);\n            var move = onComplete.Move, offset = {\n                'x': move.offsetX,\n                'y': move.offsetY\n            };\n            if(move.enable) {\n                this.geom.translate(node.endPos.add(offset).$scale(-1), \"end\");\n            } else {\n                this.geom.translate($C(offset.x, offset.y).$scale(-1), \"end\");\n            }\n            this.fx.animate($.merge(this.controller, { modes: ['linear'] }, onComplete));\n         },\n\n        expand: function (node, onComplete) {\n            var nodeArray = getNodesToShow.call(this, node);\n            this.group.expand(nodeArray, $.merge(this.controller, onComplete));\n        },\n\n        selectPath: function(node) {\n          var that = this;\n          this.graph.eachNode(function(n) { n.selected = false; });\n          function path(node) {\n              if(node == null || node.selected) return;\n              node.selected = true;\n              $.each(that.group.getSiblings([node])[node.id],\n              function(n) {\n                   n.exist = true;\n                   n.drawn = true;\n              });\n              var parents = node.getParents();\n              parents = (parents.length > 0)? parents[0] : null;\n              path(parents);\n          };\n          for(var i=0, ns = [node.id].concat(nodesInPath); i < ns.length; i++) {\n              path(this.graph.getNode(ns[i]));\n          }\n        },\n\n        /*\n        Method: setRoot\n\n         Switches the current root node. Changes the topology of the Tree.\n\n        Parameters:\n           id - (string) The id of the node to be set as root.\n           method - (string) Set this to \"animate\" if you want to animate the tree after adding the subtree. You can also set this parameter to \"replot\" to just replot the subtree.\n           onComplete - (optional|object) An action to perform after the animation (if any).\n\n        Example:\n\n        (start code js)\n          st.setRoot('nodeId', 'animate', {\n             onComplete: function() {\n               alert('complete!');\n             }\n          });\n        (end code)\n     */\n     setRoot: function(id, method, onComplete) {\n        \tif(this.busy) return;\n        \tthis.busy = true;\n          var that = this, canvas = this.canvas;\n        \tvar rootNode = this.graph.getNode(this.root);\n        \tvar clickedNode = this.graph.getNode(id);\n        \tfunction $setRoot() {\n            \tif(this.config.multitree && clickedNode.data.$orn) {\n            \t\tvar orn = clickedNode.data.$orn;\n            \t\tvar opp = {\n            \t\t\t\t'left': 'right',\n            \t\t\t\t'right': 'left',\n            \t\t\t\t'top': 'bottom',\n            \t\t\t\t'bottom': 'top'\n            \t\t}[orn];\n            \t\trootNode.data.$orn = opp;\n            \t\t(function tag(rootNode) {\n                \t\trootNode.eachSubnode(function(n) {\n                \t\t\tif(n.id != id) {\n                \t\t\t\tn.data.$orn = opp;\n                \t\t\t\ttag(n);\n                \t\t\t}\n                \t\t});\n            \t\t})(rootNode);\n            \t\tdelete clickedNode.data.$orn;\n            \t}\n            \tthis.root = id;\n            \tthis.clickedNode = clickedNode;\n            \tthis.graph.computeLevels(this.root, 0, \"ignore\");\n            \tthis.geom.setRightLevelToShow(clickedNode, canvas, {\n            \t  execHide: false,\n            \t  onShow: function(node) {\n            \t    if(!node.drawn) {\n                    node.drawn = true;\n                    node.setData('alpha', 1, 'end');\n                    node.setData('alpha', 0);\n                    node.pos.setc(clickedNode.pos.x, clickedNode.pos.y);\n            \t    }\n            \t  }\n            \t});\n              this.compute('end');\n              this.busy = true;\n              this.fx.animate({\n                modes: ['linear', 'node-property:alpha'],\n                onComplete: function() {\n                  that.busy = false;\n                  that.onClick(id, {\n                    onComplete: function() {\n                      onComplete && onComplete.onComplete();\n                    }\n                  });\n                }\n              });\n        \t}\n\n        \t// delete previous orientations (if any)\n        \tdelete rootNode.data.$orns;\n\n        \tif(method == 'animate') {\n        \t  $setRoot.call(this);\n        \t  that.selectPath(clickedNode);\n        \t} else if(method == 'replot') {\n        \t\t$setRoot.call(this);\n        \t\tthis.select(this.root);\n        \t}\n     },\n\n     /*\n           Method: addSubtree\n\n            Adds a subtree.\n\n           Parameters:\n              subtree - (object) A JSON Tree object. See also <Loader.loadJSON>.\n              method - (string) Set this to \"animate\" if you want to animate the tree after adding the subtree. You can also set this parameter to \"replot\" to just replot the subtree.\n              onComplete - (optional|object) An action to perform after the animation (if any).\n\n           Example:\n\n           (start code js)\n             st.addSubtree(json, 'animate', {\n                onComplete: function() {\n                  alert('complete!');\n                }\n             });\n           (end code)\n        */\n        addSubtree: function(subtree, method, onComplete) {\n            if(method == 'replot') {\n                this.op.sum(subtree, $.extend({ type: 'replot' }, onComplete || {}));\n            } else if (method == 'animate') {\n                this.op.sum(subtree, $.extend({ type: 'fade:seq' }, onComplete || {}));\n            }\n        },\n\n        /*\n           Method: removeSubtree\n\n            Removes a subtree.\n\n           Parameters:\n              id - (string) The _id_ of the subtree to be removed.\n              removeRoot - (boolean) Default's *false*. Remove the root of the subtree or only its subnodes.\n              method - (string) Set this to \"animate\" if you want to animate the tree after removing the subtree. You can also set this parameter to \"replot\" to just replot the subtree.\n              onComplete - (optional|object) An action to perform after the animation (if any).\n\n          Example:\n\n          (start code js)\n            st.removeSubtree('idOfSubtreeToBeRemoved', false, 'animate', {\n              onComplete: function() {\n                alert('complete!');\n              }\n            });\n          (end code)\n\n        */\n        removeSubtree: function(id, removeRoot, method, onComplete) {\n            var node = this.graph.getNode(id), subids = [];\n            node.eachLevel(+!removeRoot, false, function(n) {\n                subids.push(n.id);\n            });\n            if(method == 'replot') {\n                this.op.removeNode(subids, $.extend({ type: 'replot' }, onComplete || {}));\n            } else if (method == 'animate') {\n                this.op.removeNode(subids, $.extend({ type: 'fade:seq'}, onComplete || {}));\n            }\n        },\n\n        /*\n           Method: select\n\n            Selects a node in the <ST> without performing an animation. Useful when selecting\n            nodes which are currently hidden or deep inside the tree.\n\n          Parameters:\n            id - (string) The id of the node to select.\n            onComplete - (optional|object) an onComplete callback.\n\n          Example:\n          (start code js)\n            st.select('mynodeid', {\n              onComplete: function() {\n                alert('complete!');\n              }\n            });\n          (end code)\n        */\n        select: function(id, onComplete) {\n            var group = this.group, geom = this.geom;\n            var node=  this.graph.getNode(id), canvas = this.canvas;\n            var root  = this.graph.getNode(this.root);\n            var complete = $.merge(this.controller, onComplete);\n            var that = this;\n\n            complete.onBeforeCompute(node);\n            this.selectPath(node);\n            this.clickedNode= node;\n            this.requestNodes(node, {\n                onComplete: function(){\n                    group.hide(group.prepare(getNodesToHide.call(that)), complete);\n                    geom.setRightLevelToShow(node, canvas);\n                    that.compute(\"current\");\n                    that.graph.eachNode(function(n) {\n                        var pos = n.pos.getc(true);\n                        n.startPos.setc(pos.x, pos.y);\n                        n.endPos.setc(pos.x, pos.y);\n                        n.visited = false;\n                    });\n                    var offset = { x: complete.offsetX, y: complete.offsetY };\n                    that.geom.translate(node.endPos.add(offset).$scale(-1), [\"start\", \"current\", \"end\"]);\n                    group.show(getNodesToShow.call(that));\n                    that.plot();\n                    complete.onAfterCompute(that.clickedNode);\n                    complete.onComplete();\n                }\n            });\n        },\n\n      /*\n         Method: onClick\n\n        Animates the <ST> to center the node specified by *id*.\n\n        Parameters:\n\n        id - (string) A node id.\n        options - (optional|object) A group of options and callbacks described below.\n        onComplete - (object) An object callback called when the animation finishes.\n        Move - (object) An object that has as properties _offsetX_ or _offsetY_ for adding some offset position to the centered node.\n\n        Example:\n\n        (start code js)\n          st.onClick('mynodeid', {\n\t          Move: {\n\t          \tenable: true,\n\t            offsetX: 30,\n\t            offsetY: 5\n\t          },\n\t          onComplete: function() {\n\t              alert('yay!');\n\t          }\n          });\n        (end code)\n\n        */\n      onClick: function (id, options) {\n        var canvas = this.canvas, that = this, Geom = this.geom, config = this.config;\n        var innerController = {\n            Move: {\n        \t    enable: true,\n              offsetX: canvas.translateOffsetX + config.offsetX || 0,\n              offsetY: canvas.translateOffsetY + config.offsetY + Math.random()*100  || 0\n            },\n            setRightLevelToShowConfig: false,\n            onBeforeRequest: $.empty,\n            onBeforeContract: $.empty,\n            onBeforeMove: $.empty,\n            onBeforeExpand: $.empty\n        };\n        var complete = $.merge(this.controller, innerController, options);\n\n        if(!this.busy) {\n            this.busy = true;\n            var node = this.graph.getNode(id);\n            this.selectPath(node, this.clickedNode);\n           \tthis.clickedNode = node;\n            complete.onBeforeCompute(node);\n            complete.onBeforeRequest(node);\n            this.requestNodes(node, {\n                onComplete: function() {\n                    complete.onBeforeContract(node);\n                    that.contract({\n                        onComplete: function() {\n                            Geom.setRightLevelToShow(node, canvas, complete.setRightLevelToShowConfig);\n                            complete.onBeforeMove(node);\n                            that.move(node, {\n                                Move: complete.Move,\n                                onComplete: function() {\n                                    complete.onBeforeExpand(node);\n                                    that.expand(node, {\n                                        onComplete: function() {\n                                            that.busy = false;\n                                            complete.onAfterCompute(id);\n                                            complete.onComplete();\n                                        }\n                                    }); // expand\n                                }\n                            }); // move\n                        }\n                    });// contract\n                }\n            });// request\n        }\n      }\n    });\n\n})();\n\n$jit.ST.$extend = true;\n\n/*\n   Class: ST.Op\n\n   Custom extension of <Graph.Op>.\n\n   Extends:\n\n   All <Graph.Op> methods\n\n   See also:\n\n   <Graph.Op>\n\n*/\n$jit.ST.Op = new Class({\n\n  Implements: Graph.Op\n\n});\n\n/*\n\n     Performs operations on group of nodes.\n\n*/\n$jit.ST.Group = new Class({\n\n    initialize: function(viz) {\n        this.viz = viz;\n        this.canvas = viz.canvas;\n        this.config = viz.config;\n        this.animation = new Animation;\n        this.nodes = null;\n    },\n\n    /*\n\n       Calls the request method on the controller to request a subtree for each node.\n    */\n    requestNodes: function(nodes, controller) {\n        var counter = 0, len = nodes.length, nodeSelected = {};\n        var complete = function() { controller.onComplete(); };\n        var viz = this.viz;\n        if(len == 0) complete();\n        for(var i=0; i<len; i++) {\n            nodeSelected[nodes[i].id] = nodes[i];\n            controller.request(nodes[i].id, nodes[i]._level, {\n                onComplete: function(nodeId, data) {\n                    if(data && data.children) {\n                        data.id = nodeId;\n                        viz.op.sum(data, { type: 'nothing' });\n                    }\n                    if(++counter == len) {\n                        viz.graph.computeLevels(viz.root, 0);\n                        complete();\n                    }\n                }\n            });\n        }\n    },\n\n    /*\n\n       Collapses group of nodes.\n    */\n    contract: function(nodes, controller) {\n        var viz = this.viz;\n        var that = this;\n\n        nodes = this.prepare(nodes);\n        this.animation.setOptions($.merge(controller, {\n            $animating: false,\n            compute: function(delta) {\n              if(delta == 1) delta = 0.99;\n              that.plotStep(1 - delta, controller, this.$animating);\n              this.$animating = 'contract';\n            },\n\n            complete: function() {\n                that.hide(nodes, controller);\n            }\n        })).start();\n    },\n\n    hide: function(nodes, controller) {\n        var viz = this.viz;\n        for(var i=0; i<nodes.length; i++) {\n            // TODO nodes are requested on demand, but not\n            // deleted when hidden. Would that be a good feature?\n            // Currently that feature is buggy, so I'll turn it off\n            // Actually this feature is buggy because trimming should take\n            // place onAfterCompute and not right after collapsing nodes.\n            if (true || !controller || !controller.request) {\n                nodes[i].eachLevel(1, false, function(elem){\n                    if (elem.exist) {\n                        $.extend(elem, {\n                            'drawn': false,\n                            'exist': false\n                        });\n                    }\n                });\n            } else {\n                var ids = [];\n                nodes[i].eachLevel(1, false, function(n) {\n                    ids.push(n.id);\n                });\n                viz.op.removeNode(ids, { 'type': 'nothing' });\n                viz.labels.clearLabels();\n            }\n        }\n        controller.onComplete();\n    },\n\n\n    /*\n       Expands group of nodes.\n    */\n    expand: function(nodes, controller) {\n        var that = this;\n        this.show(nodes);\n        this.animation.setOptions($.merge(controller, {\n            $animating: false,\n            compute: function(delta) {\n                that.plotStep(delta, controller, this.$animating);\n                this.$animating = 'expand';\n            },\n\n            complete: function() {\n                that.plotStep(undefined, controller, false);\n                controller.onComplete();\n            }\n        })).start();\n\n    },\n\n    show: function(nodes) {\n        var config = this.config;\n        this.prepare(nodes);\n        $.each(nodes, function(n) {\n        \t// check for root nodes if multitree\n        \tif(config.multitree && !('$orn' in n.data)) {\n        \t\tdelete n.data.$orns;\n        \t\tvar orns = ' ';\n        \t\tn.eachSubnode(function(ch) {\n        \t\t\tif(('$orn' in ch.data)\n        \t\t\t\t\t&& orns.indexOf(ch.data.$orn) < 0\n        \t\t\t\t\t&& ch.exist && !ch.drawn) {\n        \t\t\t\torns += ch.data.$orn + ' ';\n        \t\t\t}\n        \t\t});\n        \t\tn.data.$orns = orns;\n        \t}\n            n.eachLevel(0, config.levelsToShow, function(n) {\n            \tif(n.exist) n.drawn = true;\n            });\n        });\n    },\n\n    prepare: function(nodes) {\n        this.nodes = this.getNodesWithChildren(nodes);\n        return this.nodes;\n    },\n\n    /*\n       Filters an array of nodes leaving only nodes with children.\n    */\n    getNodesWithChildren: function(nodes) {\n        var ans = [], config = this.config, root = this.viz.root;\n        nodes.sort(function(a, b) { return (a._depth <= b._depth) - (a._depth >= b._depth); });\n        for(var i=0; i<nodes.length; i++) {\n            if(nodes[i].anySubnode(\"exist\")) {\n            \tfor (var j = i+1, desc = false; !desc && j < nodes.length; j++) {\n                    if(!config.multitree || '$orn' in nodes[j].data) {\n                \t\tdesc = desc || nodes[i].isDescendantOf(nodes[j].id);\n                    }\n                }\n                if(!desc) ans.push(nodes[i]);\n            }\n        }\n        return ans;\n    },\n\n    plotStep: function(delta, controller, animating) {\n        var viz = this.viz,\n        config = this.config,\n        canvas = viz.canvas,\n        ctx = canvas.getCtx(),\n        nodes = this.nodes;\n        var i, node;\n        // hide nodes that are meant to be collapsed/expanded\n        var nds = {};\n        for(i=0; i<nodes.length; i++) {\n          node = nodes[i];\n          nds[node.id] = [];\n          var root = config.multitree && !('$orn' in node.data);\n          var orns = root && node.data.$orns;\n          node.eachSubgraph(function(n) {\n            // TODO(nico): Cleanup\n        \t  // special check for root node subnodes when\n        \t  // multitree is checked.\n        \t  if(root && orns && orns.indexOf(n.data.$orn) > 0\n        \t\t\t  && n.drawn) {\n        \t\t  n.drawn = false;\n                  nds[node.id].push(n);\n              } else if((!root || !orns) && n.drawn) {\n                n.drawn = false;\n                nds[node.id].push(n);\n              }\n            });\n            node.drawn = true;\n        }\n        // plot the whole (non-scaled) tree\n        if(nodes.length > 0) viz.fx.plot();\n        // show nodes that were previously hidden\n        for(i in nds) {\n          $.each(nds[i], function(n) { n.drawn = true; });\n        }\n        // plot each scaled subtree\n        for(i=0; i<nodes.length; i++) {\n          node = nodes[i];\n          ctx.save();\n          viz.fx.plotSubtree(node, controller, delta, animating);\n          ctx.restore();\n        }\n      },\n\n      getSiblings: function(nodes) {\n        var siblings = {};\n        $.each(nodes, function(n) {\n            var par = n.getParents();\n            if (par.length == 0) {\n                siblings[n.id] = [n];\n            } else {\n                var ans = [];\n                par[0].eachSubnode(function(sn) {\n                    ans.push(sn);\n                });\n                siblings[n.id] = ans;\n            }\n        });\n        return siblings;\n    }\n});\n\n/*\n   ST.Geom\n\n   Performs low level geometrical computations.\n\n   Access:\n\n   This instance can be accessed with the _geom_ parameter of the st instance created.\n\n   Example:\n\n   (start code js)\n    var st = new ST(canvas, config);\n    st.geom.translate //or can also call any other <ST.Geom> method\n   (end code)\n\n*/\n\n$jit.ST.Geom = new Class({\n    Implements: Graph.Geom,\n    /*\n       Changes the tree current orientation to the one specified.\n\n       You should usually use <ST.switchPosition> instead.\n    */\n    switchOrientation: function(orn) {\n    \tthis.config.orientation = orn;\n    },\n\n    /*\n       Makes a value dispatch according to the current layout\n       Works like a CSS property, either _top-right-bottom-left_ or _top|bottom - left|right_.\n     */\n    dispatch: function() {\n    \t  // TODO(nico) should store Array.prototype.slice.call somewhere.\n        var args = Array.prototype.slice.call(arguments);\n        var s = args.shift(), len = args.length;\n        var val = function(a) { return typeof a == 'function'? a() : a; };\n        if(len == 2) {\n            return (s == \"top\" || s == \"bottom\")? val(args[0]) : val(args[1]);\n        } else if(len == 4) {\n            switch(s) {\n                case \"top\": return val(args[0]);\n                case \"right\": return val(args[1]);\n                case \"bottom\": return val(args[2]);\n                case \"left\": return val(args[3]);\n            }\n        }\n        return undefined;\n    },\n\n    /*\n       Returns label height or with, depending on the tree current orientation.\n    */\n    getSize: function(n, invert) {\n        var data = n.data, config = this.config;\n        var siblingOffset = config.siblingOffset;\n        var s = (config.multitree\n        \t\t&& ('$orn' in data)\n        \t\t&& data.$orn) || config.orientation;\n        var w = n.getData('width') + siblingOffset;\n        var h = n.getData('height') + siblingOffset;\n        if(!invert)\n            return this.dispatch(s, h, w);\n        else\n            return this.dispatch(s, w, h);\n    },\n\n    /*\n       Calculates a subtree base size. This is an utility function used by _getBaseSize_\n    */\n    getTreeBaseSize: function(node, level, leaf) {\n        var size = this.getSize(node, true), baseHeight = 0, that = this;\n        if(leaf(level, node)) return size;\n        if(level === 0) return 0;\n        node.eachSubnode(function(elem) {\n            baseHeight += that.getTreeBaseSize(elem, level -1, leaf);\n        });\n        return (size > baseHeight? size : baseHeight) + this.config.subtreeOffset;\n    },\n\n\n    /*\n       getEdge\n\n       Returns a Complex instance with the begin or end position of the edge to be plotted.\n\n       Parameters:\n\n       node - A <Graph.Node> that is connected to this edge.\n       type - Returns the begin or end edge position. Possible values are 'begin' or 'end'.\n\n       Returns:\n\n       A <Complex> number specifying the begin or end position.\n    */\n    getEdge: function(node, type, s) {\n    \tvar $C = function(a, b) {\n          return function(){\n            return node.pos.add(new Complex(a, b));\n          };\n        };\n        var dim = this.node;\n        var w = node.getData('width');\n        var h = node.getData('height');\n\n        if(type == 'begin') {\n            if(dim.align == \"center\") {\n                return this.dispatch(s, $C(0, h/2), $C(-w/2, 0),\n                                     $C(0, -h/2),$C(w/2, 0));\n            } else if(dim.align == \"left\") {\n                return this.dispatch(s, $C(0, h), $C(0, 0),\n                                     $C(0, 0), $C(w, 0));\n            } else if(dim.align == \"right\") {\n                return this.dispatch(s, $C(0, 0), $C(-w, 0),\n                                     $C(0, -h),$C(0, 0));\n            } else throw \"align: not implemented\";\n\n\n        } else if(type == 'end') {\n            if(dim.align == \"center\") {\n                return this.dispatch(s, $C(0, -h/2), $C(w/2, 0),\n                                     $C(0, h/2),  $C(-w/2, 0));\n            } else if(dim.align == \"left\") {\n                return this.dispatch(s, $C(0, 0), $C(w, 0),\n                                     $C(0, h), $C(0, 0));\n            } else if(dim.align == \"right\") {\n                return this.dispatch(s, $C(0, -h),$C(0, 0),\n                                     $C(0, 0), $C(-w, 0));\n            } else throw \"align: not implemented\";\n        }\n    },\n\n    /*\n       Adjusts the tree position due to canvas scaling or translation.\n    */\n    getScaledTreePosition: function(node, scale) {\n        var dim = this.node;\n        var w = node.getData('width');\n        var h = node.getData('height');\n        var s = (this.config.multitree\n        \t\t&& ('$orn' in node.data)\n        \t\t&& node.data.$orn) || this.config.orientation;\n\n        var $C = function(a, b) {\n          return function(){\n            return node.pos.add(new Complex(a, b)).$scale(1 - scale);\n          };\n        };\n        if(dim.align == \"left\") {\n            return this.dispatch(s, $C(0, h), $C(0, 0),\n                                 $C(0, 0), $C(w, 0));\n        } else if(dim.align == \"center\") {\n            return this.dispatch(s, $C(0, h / 2), $C(-w / 2, 0),\n                                 $C(0, -h / 2),$C(w / 2, 0));\n        } else if(dim.align == \"right\") {\n            return this.dispatch(s, $C(0, 0), $C(-w, 0),\n                                 $C(0, -h),$C(0, 0));\n        } else throw \"align: not implemented\";\n    },\n\n    /*\n       treeFitsInCanvas\n\n       Returns a Boolean if the current subtree fits in canvas.\n\n       Parameters:\n\n       node - A <Graph.Node> which is the current root of the subtree.\n       canvas - The <Canvas> object.\n       level - The depth of the subtree to be considered.\n    */\n    treeFitsInCanvas: function(node, canvas, level) {\n        var csize = canvas.getSize();\n        var s = (this.config.multitree\n        \t\t&& ('$orn' in node.data)\n        \t\t&& node.data.$orn) || this.config.orientation;\n\n        var size = this.dispatch(s, csize.width, csize.height);\n        var baseSize = this.getTreeBaseSize(node, level, function(level, node) {\n          return level === 0 || !node.anySubnode();\n        });\n        return (baseSize < size);\n    }\n});\n\n/*\n  Class: ST.Plot\n\n  Custom extension of <Graph.Plot>.\n\n  Extends:\n\n  All <Graph.Plot> methods\n\n  See also:\n\n  <Graph.Plot>\n\n*/\n$jit.ST.Plot = new Class({\n\n    Implements: Graph.Plot,\n\n    /*\n       Plots a subtree from the spacetree.\n    */\n    plotSubtree: function(node, opt, scale, animating) {\n        var viz = this.viz, canvas = viz.canvas, config = viz.config;\n        scale = Math.min(Math.max(0.001, scale), 1);\n        if(scale >= 0) {\n            node.drawn = false;\n            var ctx = canvas.getCtx();\n            var diff = viz.geom.getScaledTreePosition(node, scale);\n            ctx.translate(diff.x, diff.y);\n            ctx.scale(scale, scale);\n        }\n        this.plotTree(node, $.merge(opt, {\n          'withLabels': true,\n          'hideLabels': !!scale,\n          'plotSubtree': function(n, ch) {\n            var root = config.multitree && !('$orn' in node.data);\n            var orns = root && node.getData('orns');\n            return !root || orns.indexOf(node.getData('orn')) > -1;\n          }\n        }), animating);\n        if(scale >= 0) node.drawn = true;\n    },\n\n    /*\n        Method: getAlignedPos\n\n        Returns a *x, y* object with the position of the top/left corner of a <ST> node.\n\n        Parameters:\n\n        pos - (object) A <Graph.Node> position.\n        width - (number) The width of the node.\n        height - (number) The height of the node.\n\n     */\n    getAlignedPos: function(pos, width, height) {\n        var nconfig = this.node;\n        var square, orn;\n        if(nconfig.align == \"center\") {\n            square = {\n                x: pos.x - width / 2,\n                y: pos.y - height / 2\n            };\n        } else if (nconfig.align == \"left\") {\n            orn = this.config.orientation;\n            if(orn == \"bottom\" || orn == \"top\") {\n                square = {\n                    x: pos.x - width / 2,\n                    y: pos.y\n                };\n            } else {\n                square = {\n                    x: pos.x,\n                    y: pos.y - height / 2\n                };\n            }\n        } else if(nconfig.align == \"right\") {\n            orn = this.config.orientation;\n            if(orn == \"bottom\" || orn == \"top\") {\n                square = {\n                    x: pos.x - width / 2,\n                    y: pos.y - height\n                };\n            } else {\n                square = {\n                    x: pos.x - width,\n                    y: pos.y - height / 2\n                };\n            }\n        } else throw \"align: not implemented\";\n\n        return square;\n    },\n\n    getOrientation: function(adj) {\n    \tvar config = this.config;\n    \tvar orn = config.orientation;\n\n    \tif(config.multitree) {\n        \tvar nodeFrom = adj.nodeFrom;\n        \tvar nodeTo = adj.nodeTo;\n    \t\torn = (('$orn' in nodeFrom.data)\n        \t\t&& nodeFrom.data.$orn)\n        \t\t|| (('$orn' in nodeTo.data)\n        \t\t&& nodeTo.data.$orn);\n    \t}\n\n    \treturn orn;\n    }\n});\n\n/*\n  Class: ST.Label\n\n  Custom extension of <Graph.Label>.\n  Contains custom <Graph.Label.SVG>, <Graph.Label.HTML> and <Graph.Label.Native> extensions.\n\n  Extends:\n\n  All <Graph.Label> methods and subclasses.\n\n  See also:\n\n  <Graph.Label>, <Graph.Label.Native>, <Graph.Label.HTML>, <Graph.Label.SVG>.\n */\n$jit.ST.Label = {};\n\n/*\n   ST.Label.Native\n\n   Custom extension of <Graph.Label.Native>.\n\n   Extends:\n\n   All <Graph.Label.Native> methods\n\n   See also:\n\n   <Graph.Label.Native>\n*/\n$jit.ST.Label.Native = new Class({\n  Implements: Graph.Label.Native,\n\n  renderLabel: function(canvas, node, controller) {\n    var ctx = canvas.getCtx(),\n        coord = node.pos.getc(true),\n        width = node.getData('width'),\n        height = node.getData('height'),\n        pos = this.viz.fx.getAlignedPos(coord, width, height);\n    ctx.fillText(node.name, pos.x + width / 2, pos.y + height / 2);\n  }\n});\n\n$jit.ST.Label.DOM = new Class({\n  Implements: Graph.Label.DOM,\n\n  /*\n      placeLabel\n\n      Overrides abstract method placeLabel in <Graph.Plot>.\n\n      Parameters:\n\n      tag - A DOM label element.\n      node - A <Graph.Node>.\n      controller - A configuration/controller object passed to the visualization.\n\n    */\n    placeLabel: function(tag, node, controller) {\n        var pos = node.pos.getc(true),\n            config = this.viz.config,\n            dim = config.Node,\n            canvas = this.viz.canvas,\n            w = node.getData('width'),\n            h = node.getData('height'),\n            radius = canvas.getSize(),\n            labelPos, orn;\n\n        var ox = canvas.translateOffsetX,\n            oy = canvas.translateOffsetY,\n            sx = canvas.scaleOffsetX,\n            sy = canvas.scaleOffsetY,\n            posx = pos.x * sx + ox,\n            posy = pos.y * sy + oy;\n\n        if(dim.align == \"center\") {\n            labelPos= {\n                x: Math.round(posx - w / 2 + radius.width/2),\n                y: Math.round(posy - h / 2 + radius.height/2)\n            };\n        } else if (dim.align == \"left\") {\n            orn = config.orientation;\n            if(orn == \"bottom\" || orn == \"top\") {\n                labelPos= {\n                    x: Math.round(posx - w / 2 + radius.width/2),\n                    y: Math.round(posy + radius.height/2)\n                };\n            } else {\n                labelPos= {\n                    x: Math.round(posx + radius.width/2),\n                    y: Math.round(posy - h / 2 + radius.height/2)\n                };\n            }\n        } else if(dim.align == \"right\") {\n            orn = config.orientation;\n            if(orn == \"bottom\" || orn == \"top\") {\n                labelPos= {\n                    x: Math.round(posx - w / 2 + radius.width/2),\n                    y: Math.round(posy - h + radius.height/2)\n                };\n            } else {\n                labelPos= {\n                    x: Math.round(posx - w + radius.width/2),\n                    y: Math.round(posy - h / 2 + radius.height/2)\n                };\n            }\n        } else throw \"align: not implemented\";\n\n\t\tlabelPos.w=w;\n\t\tlabelPos.h=h;\n\n        var style = tag.style;\n        style.left = labelPos.x + 'px';\n        style.top  = labelPos.y + 'px';\n        style.display = this.fitsInCanvas(labelPos, canvas)? '' : 'none';\n        controller.onPlaceLabel(tag, node);\n    }\n});\n\n/*\n  ST.Label.SVG\n\n  Custom extension of <Graph.Label.SVG>.\n\n  Extends:\n\n  All <Graph.Label.SVG> methods\n\n  See also:\n\n  <Graph.Label.SVG>\n*/\n$jit.ST.Label.SVG = new Class({\n  Implements: [$jit.ST.Label.DOM, Graph.Label.SVG],\n\n  initialize: function(viz) {\n    this.viz = viz;\n  }\n});\n\n/*\n   ST.Label.HTML\n\n   Custom extension of <Graph.Label.HTML>.\n\n   Extends:\n\n   All <Graph.Label.HTML> methods.\n\n   See also:\n\n   <Graph.Label.HTML>\n\n*/\n$jit.ST.Label.HTML = new Class({\n  Implements: [$jit.ST.Label.DOM, Graph.Label.HTML],\n\n  initialize: function(viz) {\n    this.viz = viz;\n  }\n});\n\n\n/*\n  Class: ST.Plot.NodeTypes\n\n  This class contains a list of <Graph.Node> built-in types.\n  Node types implemented are 'none', 'circle', 'rectangle', 'ellipse' and 'square'.\n\n  You can add your custom node types, customizing your visualization to the extreme.\n\n  Example:\n\n  (start code js)\n    ST.Plot.NodeTypes.implement({\n      'mySpecialType': {\n        'render': function(node, canvas) {\n          //print your custom node to canvas\n        },\n        //optional\n        'contains': function(node, pos) {\n          //return true if pos is inside the node or false otherwise\n        }\n      }\n    });\n  (end code)\n\n*/\n$jit.ST.Plot.NodeTypes = new Class({\n  'none': {\n    'render': $.empty,\n    'contains': $.lambda(false)\n  },\n  'circle': {\n    'render': function(node, canvas) {\n      var dim  = node.getData('dim'),\n          pos = this.getAlignedPos(node.pos.getc(true), dim, dim),\n          dim2 = dim/2;\n      this.nodeHelper.circle.render('fill', {x:pos.x+dim2, y:pos.y+dim2}, dim2, canvas);\n    },\n    'contains': function(node, pos) {\n      var dim  = node.getData('dim'),\n          npos = this.getAlignedPos(node.pos.getc(true), dim, dim),\n          dim2 = dim/2;\n      return this.nodeHelper.circle.contains({x:npos.x+dim2, y:npos.y+dim2}, pos, dim2);\n    }\n  },\n  'square': {\n    'render': function(node, canvas) {\n      var dim  = node.getData('dim'),\n          dim2 = dim/2,\n          pos = this.getAlignedPos(node.pos.getc(true), dim, dim);\n      this.nodeHelper.square.render('fill', {x:pos.x+dim2, y:pos.y+dim2}, dim2, canvas);\n    },\n    'contains': function(node, pos) {\n      var dim  = node.getData('dim'),\n          npos = this.getAlignedPos(node.pos.getc(true), dim, dim),\n          dim2 = dim/2;\n      return this.nodeHelper.square.contains({x:npos.x+dim2, y:npos.y+dim2}, pos, dim2);\n    }\n  },\n  'ellipse': {\n    'render': function(node, canvas) {\n      var width = node.getData('width'),\n          height = node.getData('height'),\n          pos = this.getAlignedPos(node.pos.getc(true), width, height);\n      this.nodeHelper.ellipse.render('fill', {x:pos.x+width/2, y:pos.y+height/2}, width, height, canvas);\n    },\n    'contains': function(node, pos) {\n      var width = node.getData('width'),\n          height = node.getData('height'),\n          npos = this.getAlignedPos(node.pos.getc(true), width, height);\n      return this.nodeHelper.ellipse.contains({x:npos.x+width/2, y:npos.y+height/2}, pos, width, height);\n    }\n  },\n  'rectangle': {\n    'render': function(node, canvas) {\n      var width = node.getData('width'),\n          height = node.getData('height'),\n          pos = this.getAlignedPos(node.pos.getc(true), width, height);\n      this.nodeHelper.rectangle.render('fill', {x:pos.x+width/2, y:pos.y+height/2}, width, height, canvas);\n    },\n    'contains': function(node, pos) {\n      var width = node.getData('width'),\n          height = node.getData('height'),\n          npos = this.getAlignedPos(node.pos.getc(true), width, height);\n      return this.nodeHelper.rectangle.contains({x:npos.x+width/2, y:npos.y+height/2}, pos, width, height);\n    }\n  }\n});\n\n/*\n  Class: ST.Plot.EdgeTypes\n\n  This class contains a list of <Graph.Adjacence> built-in types.\n  Edge types implemented are 'none', 'line', 'arrow', 'quadratic:begin', 'quadratic:end', 'bezier'.\n\n  You can add your custom edge types, customizing your visualization to the extreme.\n\n  Example:\n\n  (start code js)\n    ST.Plot.EdgeTypes.implement({\n      'mySpecialType': {\n        'render': function(adj, canvas) {\n          //print your custom edge to canvas\n        },\n        //optional\n        'contains': function(adj, pos) {\n          //return true if pos is inside the arc or false otherwise\n        }\n      }\n    });\n  (end code)\n\n*/\n$jit.ST.Plot.EdgeTypes = new Class({\n    'none': $.empty,\n    'line': {\n      'render': function(adj, canvas) {\n        var orn = this.getOrientation(adj),\n            nodeFrom = adj.nodeFrom,\n            nodeTo = adj.nodeTo,\n            rel = nodeFrom._depth < nodeTo._depth,\n            from = this.viz.geom.getEdge(rel? nodeFrom:nodeTo, 'begin', orn),\n            to =  this.viz.geom.getEdge(rel? nodeTo:nodeFrom, 'end', orn);\n        this.edgeHelper.line.render(from, to, canvas);\n      },\n      'contains': function(adj, pos) {\n        var orn = this.getOrientation(adj),\n            nodeFrom = adj.nodeFrom,\n            nodeTo = adj.nodeTo,\n            rel = nodeFrom._depth < nodeTo._depth,\n            from = this.viz.geom.getEdge(rel? nodeFrom:nodeTo, 'begin', orn),\n            to =  this.viz.geom.getEdge(rel? nodeTo:nodeFrom, 'end', orn);\n        return this.edgeHelper.line.contains(from, to, pos, this.edge.epsilon);\n      }\n    },\n     'arrow': {\n       'render': function(adj, canvas) {\n         var orn = this.getOrientation(adj),\n             node = adj.nodeFrom,\n             child = adj.nodeTo,\n             rel = (node._depth < child._depth),\n             dim = adj.getData('dim'),\n             from = this.viz.geom.getEdge((rel?node:child), 'begin', orn),\n             to = this.viz.geom.getEdge((rel?child:node), 'end', orn),\n             direction = adj.data.$direction,\n             inv = (direction && direction.length>1 && direction[0] != node.id);\n         this.edgeHelper.arrow.render(from, to, dim, inv, canvas);\n       },\n       'contains': function(adj, pos) {\n         var orn = this.getOrientation(adj),\n             nodeFrom = adj.nodeFrom,\n             nodeTo = adj.nodeTo,\n             rel = nodeFrom._depth < nodeTo._depth,\n             from = this.viz.geom.getEdge(rel? nodeFrom:nodeTo, 'begin', orn),\n             to =  this.viz.geom.getEdge(rel? nodeTo:nodeFrom, 'end', orn);\n         return this.edgeHelper.arrow.contains(from, to, pos, this.edge.epsilon);\n       }\n     },\n    'quadratic:begin': {\n       'render': function(adj, canvas) {\n          var orn = this.getOrientation(adj);\n          var nodeFrom = adj.nodeFrom,\n              nodeTo = adj.nodeTo,\n              rel = nodeFrom._depth < nodeTo._depth,\n              begin = this.viz.geom.getEdge(rel? nodeFrom:nodeTo, 'begin', orn),\n              end =  this.viz.geom.getEdge(rel? nodeTo:nodeFrom, 'end', orn),\n              dim = adj.getData('dim'),\n              ctx = canvas.getCtx();\n          ctx.beginPath();\n          ctx.moveTo(begin.x, begin.y);\n          switch(orn) {\n            case \"left\":\n              ctx.quadraticCurveTo(begin.x + dim, begin.y, end.x, end.y);\n              break;\n            case \"right\":\n              ctx.quadraticCurveTo(begin.x - dim, begin.y, end.x, end.y);\n              break;\n            case \"top\":\n              ctx.quadraticCurveTo(begin.x, begin.y + dim, end.x, end.y);\n              break;\n            case \"bottom\":\n              ctx.quadraticCurveTo(begin.x, begin.y - dim, end.x, end.y);\n              break;\n          }\n          ctx.stroke();\n        }\n     },\n    'quadratic:end': {\n       'render': function(adj, canvas) {\n          var orn = this.getOrientation(adj);\n          var nodeFrom = adj.nodeFrom,\n              nodeTo = adj.nodeTo,\n              rel = nodeFrom._depth < nodeTo._depth,\n              begin = this.viz.geom.getEdge(rel? nodeFrom:nodeTo, 'begin', orn),\n              end =  this.viz.geom.getEdge(rel? nodeTo:nodeFrom, 'end', orn),\n              dim = adj.getData('dim'),\n              ctx = canvas.getCtx();\n          ctx.beginPath();\n          ctx.moveTo(begin.x, begin.y);\n          switch(orn) {\n            case \"left\":\n              ctx.quadraticCurveTo(end.x - dim, end.y, end.x, end.y);\n              break;\n            case \"right\":\n              ctx.quadraticCurveTo(end.x + dim, end.y, end.x, end.y);\n              break;\n            case \"top\":\n              ctx.quadraticCurveTo(end.x, end.y - dim, end.x, end.y);\n              break;\n            case \"bottom\":\n              ctx.quadraticCurveTo(end.x, end.y + dim, end.x, end.y);\n              break;\n          }\n          ctx.stroke();\n       }\n     },\n    'bezier': {\n       'render': function(adj, canvas) {\n         var orn = this.getOrientation(adj),\n             nodeFrom = adj.nodeFrom,\n             nodeTo = adj.nodeTo,\n             rel = nodeFrom._depth < nodeTo._depth,\n             begin = this.viz.geom.getEdge(rel? nodeFrom:nodeTo, 'begin', orn),\n             end =  this.viz.geom.getEdge(rel? nodeTo:nodeFrom, 'end', orn),\n             dim = adj.getData('dim'),\n             ctx = canvas.getCtx();\n         ctx.beginPath();\n         ctx.moveTo(begin.x, begin.y);\n         switch(orn) {\n           case \"left\":\n             ctx.bezierCurveTo(begin.x + dim, begin.y, end.x - dim, end.y, end.x, end.y);\n             break;\n           case \"right\":\n             ctx.bezierCurveTo(begin.x - dim, begin.y, end.x + dim, end.y, end.x, end.y);\n             break;\n           case \"top\":\n             ctx.bezierCurveTo(begin.x, begin.y + dim, end.x, end.y - dim, end.x, end.y);\n             break;\n           case \"bottom\":\n             ctx.bezierCurveTo(begin.x, begin.y - dim, end.x, end.y + dim, end.x, end.y);\n             break;\n         }\n         ctx.stroke();\n       }\n    }\n});\n\n\n\n\n\n })();\n","/*\nCopyright 2012 Igor Vaynberg\n\nVersion: 3.4.5 Timestamp: Mon Nov  4 08:22:42 PST 2013\n\nThis software is licensed under the Apache License, Version 2.0 (the \"Apache License\") or the GNU\nGeneral Public License version 2 (the \"GPL License\"). You may choose either license to govern your\nuse of this software only upon the condition that you accept all of the terms of either the Apache\nLicense or the GPL License.\n\nYou may obtain a copy of the Apache License and the GPL License at:\n\nhttp://www.apache.org/licenses/LICENSE-2.0\nhttp://www.gnu.org/licenses/gpl-2.0.html\n\nUnless required by applicable law or agreed to in writing, software distributed under the Apache License\nor the GPL Licesnse is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\neither express or implied. See the Apache License and the GPL License for the specific language governing\npermissions and limitations under the Apache License and the GPL License.\n*/\n!function(a){\"undefined\"==typeof a.fn.each2&&a.extend(a.fn,{each2:function(b){for(var c=a([0]),d=-1,e=this.length;++d<e&&(c.context=c[0]=this[d])&&b.call(c[0],d,c)!==!1;);return this}})}(jQuery),function(a,b){\"use strict\";function n(a){var b,c,d,e;if(!a||a.length<1)return a;for(b=\"\",c=0,d=a.length;d>c;c++)e=a.charAt(c),b+=m[e]||e;return b}function o(a,b){for(var c=0,d=b.length;d>c;c+=1)if(q(a,b[c]))return c;return-1}function p(){var b=a(l);b.appendTo(\"body\");var c={width:b.width()-b[0].clientWidth,height:b.height()-b[0].clientHeight};return b.remove(),c}function q(a,c){return a===c?!0:a===b||c===b?!1:null===a||null===c?!1:a.constructor===String?a+\"\"==c+\"\":c.constructor===String?c+\"\"==a+\"\":!1}function r(b,c){var d,e,f;if(null===b||b.length<1)return[];for(d=b.split(c),e=0,f=d.length;f>e;e+=1)d[e]=a.trim(d[e]);return d}function s(a){return a.outerWidth(!1)-a.width()}function t(c){var d=\"keyup-change-value\";c.on(\"keydown\",function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.on(\"keyup\",function(){var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger(\"keyup-change\"))})}function u(c){c.on(\"mousemove\",function(c){var d=i;(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger(\"mousemove-filtered\",c)})}function v(a,c,d){d=d||b;var e;return function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function w(a){var c,b=!1;return function(){return b===!1&&(c=a(),b=!0),c}}function x(a,b){var c=v(a,function(a){b.trigger(\"scroll-debounced\",a)});b.on(\"scroll\",function(a){o(a.target,b.get())>=0&&c(a)})}function y(a){a[0]!==document.activeElement&&window.setTimeout(function(){var d,b=a[0],c=a.val().length;a.focus(),a.is(\":visible\")&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(d=b.createTextRange(),d.collapse(!1),d.select()))},0)}function z(b){b=a(b)[0];var c=0,d=0;if(\"selectionStart\"in b)c=b.selectionStart,d=b.selectionEnd-c;else if(\"selection\"in document){b.focus();var e=document.selection.createRange();d=document.selection.createRange().text.length,e.moveStart(\"character\",-b.value.length),c=e.text.length-d}return{offset:c,length:d}}function A(a){a.preventDefault(),a.stopPropagation()}function B(a){a.preventDefault(),a.stopImmediatePropagation()}function C(b){if(!h){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);h=a(document.createElement(\"div\")).css({position:\"absolute\",left:\"-10000px\",top:\"-10000px\",display:\"none\",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:\"nowrap\"}),h.attr(\"class\",\"select2-sizer\"),a(\"body\").append(h)}return h.text(b.val()),h.width()}function D(b,c,d){var e,g,f=[];e=b.attr(\"class\"),e&&(e=\"\"+e,a(e.split(\" \")).each2(function(){0===this.indexOf(\"select2-\")&&f.push(this)})),e=c.attr(\"class\"),e&&(e=\"\"+e,a(e.split(\" \")).each2(function(){0!==this.indexOf(\"select2-\")&&(g=d(this),g&&f.push(g))})),b.attr(\"class\",f.join(\" \"))}function E(a,b,c,d){var e=n(a.toUpperCase()).indexOf(n(b.toUpperCase())),f=b.length;return 0>e?(c.push(d(a)),void 0):(c.push(d(a.substring(0,e))),c.push(\"<span class='select2-match'>\"),c.push(d(a.substring(e,e+f))),c.push(\"</span>\"),c.push(d(a.substring(e+f,a.length))),void 0)}function F(a){var b={\"\\\\\":\"&#92;\",\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\",\"/\":\"&#47;\"};return String(a).replace(/[&<>\"'\\/\\\\]/g,function(a){return b[a]})}function G(c){var d,e=null,f=c.quietMillis||100,g=c.url,h=this;return function(i){window.clearTimeout(d),d=window.setTimeout(function(){var d=c.data,f=g,j=c.transport||a.fn.select2.ajaxDefaults.transport,k={type:c.type||\"GET\",cache:c.cache||!1,jsonpCallback:c.jsonpCallback||b,dataType:c.dataType||\"json\"},l=a.extend({},a.fn.select2.ajaxDefaults.params,k);d=d?d.call(h,i.term,i.page,i.context):null,f=\"function\"==typeof f?f.call(h,i.term,i.page,i.context):f,e&&e.abort(),c.params&&(a.isFunction(c.params)?a.extend(l,c.params.call(h)):a.extend(l,c.params)),a.extend(l,{url:f,dataType:c.dataType,data:d,success:function(a){var b=c.results(a,i.page);i.callback(b)}}),e=j.call(h,l)},f)}}function H(b){var d,e,c=b,f=function(a){return\"\"+a.text};a.isArray(c)&&(e=c,c={results:e}),a.isFunction(c)===!1&&(e=c,c=function(){return e});var g=c();return g.text&&(f=g.text,a.isFunction(f)||(d=g.text,f=function(a){return a[d]})),function(b){var g,d=b.term,e={results:[]};return\"\"===d?(b.callback(c()),void 0):(g=function(c,e){var h,i;if(c=c[0],c.children){h={};for(i in c)c.hasOwnProperty(i)&&(h[i]=c[i]);h.children=[],a(c.children).each2(function(a,b){g(b,h.children)}),(h.children.length||b.matcher(d,f(h),c))&&e.push(h)}else b.matcher(d,f(c),c)&&e.push(c)},a(c().results).each2(function(a,b){g(b,e.results)}),b.callback(e),void 0)}}function I(c){var d=a.isFunction(c);return function(e){var f=e.term,g={results:[]};a(d?c():c).each(function(){var a=this.text!==b,c=a?this.text:this;(\"\"===f||e.matcher(f,c))&&g.results.push(a?this:{id:this,text:this})}),e.callback(g)}}function J(b,c){if(a.isFunction(b))return!0;if(!b)return!1;throw new Error(c+\" must be a function or a falsy value\")}function K(b){return a.isFunction(b)?b():b}function L(b){var c=0;return a.each(b,function(a,b){b.children?c+=L(b.children):c++}),c}function M(a,c,d,e){var h,i,j,k,l,f=a,g=!1;if(!e.createSearchChoice||!e.tokenSeparators||e.tokenSeparators.length<1)return b;for(;;){for(i=-1,j=0,k=e.tokenSeparators.length;k>j&&(l=e.tokenSeparators[j],i=a.indexOf(l),!(i>=0));j++);if(0>i)break;if(h=a.substring(0,i),a=a.substring(i+l.length),h.length>0&&(h=e.createSearchChoice.call(this,h,c),h!==b&&null!==h&&e.id(h)!==b&&null!==e.id(h))){for(g=!1,j=0,k=c.length;k>j;j++)if(q(e.id(h),e.id(c[j]))){g=!0;break}g||d(h)}}return f!==a?a:void 0}function N(b,c){var d=function(){};return d.prototype=new b,d.prototype.constructor=d,d.prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}if(window.Select2===b){var c,d,e,f,g,h,j,k,i={x:0,y:0},c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){switch(a=a.which?a.which:a){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return!0}return!1},isControl:function(a){var b=a.which;switch(b){case c.SHIFT:case c.CTRL:case c.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&123>=a}},l=\"<div class='select2-measure-scrollbar'></div>\",m={\"\\u24b6\":\"A\",\"\\uff21\":\"A\",\"\\xc0\":\"A\",\"\\xc1\":\"A\",\"\\xc2\":\"A\",\"\\u1ea6\":\"A\",\"\\u1ea4\":\"A\",\"\\u1eaa\":\"A\",\"\\u1ea8\":\"A\",\"\\xc3\":\"A\",\"\\u0100\":\"A\",\"\\u0102\":\"A\",\"\\u1eb0\":\"A\",\"\\u1eae\":\"A\",\"\\u1eb4\":\"A\",\"\\u1eb2\":\"A\",\"\\u0226\":\"A\",\"\\u01e0\":\"A\",\"\\xc4\":\"A\",\"\\u01de\":\"A\",\"\\u1ea2\":\"A\",\"\\xc5\":\"A\",\"\\u01fa\":\"A\",\"\\u01cd\":\"A\",\"\\u0200\":\"A\",\"\\u0202\":\"A\",\"\\u1ea0\":\"A\",\"\\u1eac\":\"A\",\"\\u1eb6\":\"A\",\"\\u1e00\":\"A\",\"\\u0104\":\"A\",\"\\u023a\":\"A\",\"\\u2c6f\":\"A\",\"\\ua732\":\"AA\",\"\\xc6\":\"AE\",\"\\u01fc\":\"AE\",\"\\u01e2\":\"AE\",\"\\ua734\":\"AO\",\"\\ua736\":\"AU\",\"\\ua738\":\"AV\",\"\\ua73a\":\"AV\",\"\\ua73c\":\"AY\",\"\\u24b7\":\"B\",\"\\uff22\":\"B\",\"\\u1e02\":\"B\",\"\\u1e04\":\"B\",\"\\u1e06\":\"B\",\"\\u0243\":\"B\",\"\\u0182\":\"B\",\"\\u0181\":\"B\",\"\\u24b8\":\"C\",\"\\uff23\":\"C\",\"\\u0106\":\"C\",\"\\u0108\":\"C\",\"\\u010a\":\"C\",\"\\u010c\":\"C\",\"\\xc7\":\"C\",\"\\u1e08\":\"C\",\"\\u0187\":\"C\",\"\\u023b\":\"C\",\"\\ua73e\":\"C\",\"\\u24b9\":\"D\",\"\\uff24\":\"D\",\"\\u1e0a\":\"D\",\"\\u010e\":\"D\",\"\\u1e0c\":\"D\",\"\\u1e10\":\"D\",\"\\u1e12\":\"D\",\"\\u1e0e\":\"D\",\"\\u0110\":\"D\",\"\\u018b\":\"D\",\"\\u018a\":\"D\",\"\\u0189\":\"D\",\"\\ua779\":\"D\",\"\\u01f1\":\"DZ\",\"\\u01c4\":\"DZ\",\"\\u01f2\":\"Dz\",\"\\u01c5\":\"Dz\",\"\\u24ba\":\"E\",\"\\uff25\":\"E\",\"\\xc8\":\"E\",\"\\xc9\":\"E\",\"\\xca\":\"E\",\"\\u1ec0\":\"E\",\"\\u1ebe\":\"E\",\"\\u1ec4\":\"E\",\"\\u1ec2\":\"E\",\"\\u1ebc\":\"E\",\"\\u0112\":\"E\",\"\\u1e14\":\"E\",\"\\u1e16\":\"E\",\"\\u0114\":\"E\",\"\\u0116\":\"E\",\"\\xcb\":\"E\",\"\\u1eba\":\"E\",\"\\u011a\":\"E\",\"\\u0204\":\"E\",\"\\u0206\":\"E\",\"\\u1eb8\":\"E\",\"\\u1ec6\":\"E\",\"\\u0228\":\"E\",\"\\u1e1c\":\"E\",\"\\u0118\":\"E\",\"\\u1e18\":\"E\",\"\\u1e1a\":\"E\",\"\\u0190\":\"E\",\"\\u018e\":\"E\",\"\\u24bb\":\"F\",\"\\uff26\":\"F\",\"\\u1e1e\":\"F\",\"\\u0191\":\"F\",\"\\ua77b\":\"F\",\"\\u24bc\":\"G\",\"\\uff27\":\"G\",\"\\u01f4\":\"G\",\"\\u011c\":\"G\",\"\\u1e20\":\"G\",\"\\u011e\":\"G\",\"\\u0120\":\"G\",\"\\u01e6\":\"G\",\"\\u0122\":\"G\",\"\\u01e4\":\"G\",\"\\u0193\":\"G\",\"\\ua7a0\":\"G\",\"\\ua77d\":\"G\",\"\\ua77e\":\"G\",\"\\u24bd\":\"H\",\"\\uff28\":\"H\",\"\\u0124\":\"H\",\"\\u1e22\":\"H\",\"\\u1e26\":\"H\",\"\\u021e\":\"H\",\"\\u1e24\":\"H\",\"\\u1e28\":\"H\",\"\\u1e2a\":\"H\",\"\\u0126\":\"H\",\"\\u2c67\":\"H\",\"\\u2c75\":\"H\",\"\\ua78d\":\"H\",\"\\u24be\":\"I\",\"\\uff29\":\"I\",\"\\xcc\":\"I\",\"\\xcd\":\"I\",\"\\xce\":\"I\",\"\\u0128\":\"I\",\"\\u012a\":\"I\",\"\\u012c\":\"I\",\"\\u0130\":\"I\",\"\\xcf\":\"I\",\"\\u1e2e\":\"I\",\"\\u1ec8\":\"I\",\"\\u01cf\":\"I\",\"\\u0208\":\"I\",\"\\u020a\":\"I\",\"\\u1eca\":\"I\",\"\\u012e\":\"I\",\"\\u1e2c\":\"I\",\"\\u0197\":\"I\",\"\\u24bf\":\"J\",\"\\uff2a\":\"J\",\"\\u0134\":\"J\",\"\\u0248\":\"J\",\"\\u24c0\":\"K\",\"\\uff2b\":\"K\",\"\\u1e30\":\"K\",\"\\u01e8\":\"K\",\"\\u1e32\":\"K\",\"\\u0136\":\"K\",\"\\u1e34\":\"K\",\"\\u0198\":\"K\",\"\\u2c69\":\"K\",\"\\ua740\":\"K\",\"\\ua742\":\"K\",\"\\ua744\":\"K\",\"\\ua7a2\":\"K\",\"\\u24c1\":\"L\",\"\\uff2c\":\"L\",\"\\u013f\":\"L\",\"\\u0139\":\"L\",\"\\u013d\":\"L\",\"\\u1e36\":\"L\",\"\\u1e38\":\"L\",\"\\u013b\":\"L\",\"\\u1e3c\":\"L\",\"\\u1e3a\":\"L\",\"\\u0141\":\"L\",\"\\u023d\":\"L\",\"\\u2c62\":\"L\",\"\\u2c60\":\"L\",\"\\ua748\":\"L\",\"\\ua746\":\"L\",\"\\ua780\":\"L\",\"\\u01c7\":\"LJ\",\"\\u01c8\":\"Lj\",\"\\u24c2\":\"M\",\"\\uff2d\":\"M\",\"\\u1e3e\":\"M\",\"\\u1e40\":\"M\",\"\\u1e42\":\"M\",\"\\u2c6e\":\"M\",\"\\u019c\":\"M\",\"\\u24c3\":\"N\",\"\\uff2e\":\"N\",\"\\u01f8\":\"N\",\"\\u0143\":\"N\",\"\\xd1\":\"N\",\"\\u1e44\":\"N\",\"\\u0147\":\"N\",\"\\u1e46\":\"N\",\"\\u0145\":\"N\",\"\\u1e4a\":\"N\",\"\\u1e48\":\"N\",\"\\u0220\":\"N\",\"\\u019d\":\"N\",\"\\ua790\":\"N\",\"\\ua7a4\":\"N\",\"\\u01ca\":\"NJ\",\"\\u01cb\":\"Nj\",\"\\u24c4\":\"O\",\"\\uff2f\":\"O\",\"\\xd2\":\"O\",\"\\xd3\":\"O\",\"\\xd4\":\"O\",\"\\u1ed2\":\"O\",\"\\u1ed0\":\"O\",\"\\u1ed6\":\"O\",\"\\u1ed4\":\"O\",\"\\xd5\":\"O\",\"\\u1e4c\":\"O\",\"\\u022c\":\"O\",\"\\u1e4e\":\"O\",\"\\u014c\":\"O\",\"\\u1e50\":\"O\",\"\\u1e52\":\"O\",\"\\u014e\":\"O\",\"\\u022e\":\"O\",\"\\u0230\":\"O\",\"\\xd6\":\"O\",\"\\u022a\":\"O\",\"\\u1ece\":\"O\",\"\\u0150\":\"O\",\"\\u01d1\":\"O\",\"\\u020c\":\"O\",\"\\u020e\":\"O\",\"\\u01a0\":\"O\",\"\\u1edc\":\"O\",\"\\u1eda\":\"O\",\"\\u1ee0\":\"O\",\"\\u1ede\":\"O\",\"\\u1ee2\":\"O\",\"\\u1ecc\":\"O\",\"\\u1ed8\":\"O\",\"\\u01ea\":\"O\",\"\\u01ec\":\"O\",\"\\xd8\":\"O\",\"\\u01fe\":\"O\",\"\\u0186\":\"O\",\"\\u019f\":\"O\",\"\\ua74a\":\"O\",\"\\ua74c\":\"O\",\"\\u01a2\":\"OI\",\"\\ua74e\":\"OO\",\"\\u0222\":\"OU\",\"\\u24c5\":\"P\",\"\\uff30\":\"P\",\"\\u1e54\":\"P\",\"\\u1e56\":\"P\",\"\\u01a4\":\"P\",\"\\u2c63\":\"P\",\"\\ua750\":\"P\",\"\\ua752\":\"P\",\"\\ua754\":\"P\",\"\\u24c6\":\"Q\",\"\\uff31\":\"Q\",\"\\ua756\":\"Q\",\"\\ua758\":\"Q\",\"\\u024a\":\"Q\",\"\\u24c7\":\"R\",\"\\uff32\":\"R\",\"\\u0154\":\"R\",\"\\u1e58\":\"R\",\"\\u0158\":\"R\",\"\\u0210\":\"R\",\"\\u0212\":\"R\",\"\\u1e5a\":\"R\",\"\\u1e5c\":\"R\",\"\\u0156\":\"R\",\"\\u1e5e\":\"R\",\"\\u024c\":\"R\",\"\\u2c64\":\"R\",\"\\ua75a\":\"R\",\"\\ua7a6\":\"R\",\"\\ua782\":\"R\",\"\\u24c8\":\"S\",\"\\uff33\":\"S\",\"\\u1e9e\":\"S\",\"\\u015a\":\"S\",\"\\u1e64\":\"S\",\"\\u015c\":\"S\",\"\\u1e60\":\"S\",\"\\u0160\":\"S\",\"\\u1e66\":\"S\",\"\\u1e62\":\"S\",\"\\u1e68\":\"S\",\"\\u0218\":\"S\",\"\\u015e\":\"S\",\"\\u2c7e\":\"S\",\"\\ua7a8\":\"S\",\"\\ua784\":\"S\",\"\\u24c9\":\"T\",\"\\uff34\":\"T\",\"\\u1e6a\":\"T\",\"\\u0164\":\"T\",\"\\u1e6c\":\"T\",\"\\u021a\":\"T\",\"\\u0162\":\"T\",\"\\u1e70\":\"T\",\"\\u1e6e\":\"T\",\"\\u0166\":\"T\",\"\\u01ac\":\"T\",\"\\u01ae\":\"T\",\"\\u023e\":\"T\",\"\\ua786\":\"T\",\"\\ua728\":\"TZ\",\"\\u24ca\":\"U\",\"\\uff35\":\"U\",\"\\xd9\":\"U\",\"\\xda\":\"U\",\"\\xdb\":\"U\",\"\\u0168\":\"U\",\"\\u1e78\":\"U\",\"\\u016a\":\"U\",\"\\u1e7a\":\"U\",\"\\u016c\":\"U\",\"\\xdc\":\"U\",\"\\u01db\":\"U\",\"\\u01d7\":\"U\",\"\\u01d5\":\"U\",\"\\u01d9\":\"U\",\"\\u1ee6\":\"U\",\"\\u016e\":\"U\",\"\\u0170\":\"U\",\"\\u01d3\":\"U\",\"\\u0214\":\"U\",\"\\u0216\":\"U\",\"\\u01af\":\"U\",\"\\u1eea\":\"U\",\"\\u1ee8\":\"U\",\"\\u1eee\":\"U\",\"\\u1eec\":\"U\",\"\\u1ef0\":\"U\",\"\\u1ee4\":\"U\",\"\\u1e72\":\"U\",\"\\u0172\":\"U\",\"\\u1e76\":\"U\",\"\\u1e74\":\"U\",\"\\u0244\":\"U\",\"\\u24cb\":\"V\",\"\\uff36\":\"V\",\"\\u1e7c\":\"V\",\"\\u1e7e\":\"V\",\"\\u01b2\":\"V\",\"\\ua75e\":\"V\",\"\\u0245\":\"V\",\"\\ua760\":\"VY\",\"\\u24cc\":\"W\",\"\\uff37\":\"W\",\"\\u1e80\":\"W\",\"\\u1e82\":\"W\",\"\\u0174\":\"W\",\"\\u1e86\":\"W\",\"\\u1e84\":\"W\",\"\\u1e88\":\"W\",\"\\u2c72\":\"W\",\"\\u24cd\":\"X\",\"\\uff38\":\"X\",\"\\u1e8a\":\"X\",\"\\u1e8c\":\"X\",\"\\u24ce\":\"Y\",\"\\uff39\":\"Y\",\"\\u1ef2\":\"Y\",\"\\xdd\":\"Y\",\"\\u0176\":\"Y\",\"\\u1ef8\":\"Y\",\"\\u0232\":\"Y\",\"\\u1e8e\":\"Y\",\"\\u0178\":\"Y\",\"\\u1ef6\":\"Y\",\"\\u1ef4\":\"Y\",\"\\u01b3\":\"Y\",\"\\u024e\":\"Y\",\"\\u1efe\":\"Y\",\"\\u24cf\":\"Z\",\"\\uff3a\":\"Z\",\"\\u0179\":\"Z\",\"\\u1e90\":\"Z\",\"\\u017b\":\"Z\",\"\\u017d\":\"Z\",\"\\u1e92\":\"Z\",\"\\u1e94\":\"Z\",\"\\u01b5\":\"Z\",\"\\u0224\":\"Z\",\"\\u2c7f\":\"Z\",\"\\u2c6b\":\"Z\",\"\\ua762\":\"Z\",\"\\u24d0\":\"a\",\"\\uff41\":\"a\",\"\\u1e9a\":\"a\",\"\\xe0\":\"a\",\"\\xe1\":\"a\",\"\\xe2\":\"a\",\"\\u1ea7\":\"a\",\"\\u1ea5\":\"a\",\"\\u1eab\":\"a\",\"\\u1ea9\":\"a\",\"\\xe3\":\"a\",\"\\u0101\":\"a\",\"\\u0103\":\"a\",\"\\u1eb1\":\"a\",\"\\u1eaf\":\"a\",\"\\u1eb5\":\"a\",\"\\u1eb3\":\"a\",\"\\u0227\":\"a\",\"\\u01e1\":\"a\",\"\\xe4\":\"a\",\"\\u01df\":\"a\",\"\\u1ea3\":\"a\",\"\\xe5\":\"a\",\"\\u01fb\":\"a\",\"\\u01ce\":\"a\",\"\\u0201\":\"a\",\"\\u0203\":\"a\",\"\\u1ea1\":\"a\",\"\\u1ead\":\"a\",\"\\u1eb7\":\"a\",\"\\u1e01\":\"a\",\"\\u0105\":\"a\",\"\\u2c65\":\"a\",\"\\u0250\":\"a\",\"\\ua733\":\"aa\",\"\\xe6\":\"ae\",\"\\u01fd\":\"ae\",\"\\u01e3\":\"ae\",\"\\ua735\":\"ao\",\"\\ua737\":\"au\",\"\\ua739\":\"av\",\"\\ua73b\":\"av\",\"\\ua73d\":\"ay\",\"\\u24d1\":\"b\",\"\\uff42\":\"b\",\"\\u1e03\":\"b\",\"\\u1e05\":\"b\",\"\\u1e07\":\"b\",\"\\u0180\":\"b\",\"\\u0183\":\"b\",\"\\u0253\":\"b\",\"\\u24d2\":\"c\",\"\\uff43\":\"c\",\"\\u0107\":\"c\",\"\\u0109\":\"c\",\"\\u010b\":\"c\",\"\\u010d\":\"c\",\"\\xe7\":\"c\",\"\\u1e09\":\"c\",\"\\u0188\":\"c\",\"\\u023c\":\"c\",\"\\ua73f\":\"c\",\"\\u2184\":\"c\",\"\\u24d3\":\"d\",\"\\uff44\":\"d\",\"\\u1e0b\":\"d\",\"\\u010f\":\"d\",\"\\u1e0d\":\"d\",\"\\u1e11\":\"d\",\"\\u1e13\":\"d\",\"\\u1e0f\":\"d\",\"\\u0111\":\"d\",\"\\u018c\":\"d\",\"\\u0256\":\"d\",\"\\u0257\":\"d\",\"\\ua77a\":\"d\",\"\\u01f3\":\"dz\",\"\\u01c6\":\"dz\",\"\\u24d4\":\"e\",\"\\uff45\":\"e\",\"\\xe8\":\"e\",\"\\xe9\":\"e\",\"\\xea\":\"e\",\"\\u1ec1\":\"e\",\"\\u1ebf\":\"e\",\"\\u1ec5\":\"e\",\"\\u1ec3\":\"e\",\"\\u1ebd\":\"e\",\"\\u0113\":\"e\",\"\\u1e15\":\"e\",\"\\u1e17\":\"e\",\"\\u0115\":\"e\",\"\\u0117\":\"e\",\"\\xeb\":\"e\",\"\\u1ebb\":\"e\",\"\\u011b\":\"e\",\"\\u0205\":\"e\",\"\\u0207\":\"e\",\"\\u1eb9\":\"e\",\"\\u1ec7\":\"e\",\"\\u0229\":\"e\",\"\\u1e1d\":\"e\",\"\\u0119\":\"e\",\"\\u1e19\":\"e\",\"\\u1e1b\":\"e\",\"\\u0247\":\"e\",\"\\u025b\":\"e\",\"\\u01dd\":\"e\",\"\\u24d5\":\"f\",\"\\uff46\":\"f\",\"\\u1e1f\":\"f\",\"\\u0192\":\"f\",\"\\ua77c\":\"f\",\"\\u24d6\":\"g\",\"\\uff47\":\"g\",\"\\u01f5\":\"g\",\"\\u011d\":\"g\",\"\\u1e21\":\"g\",\"\\u011f\":\"g\",\"\\u0121\":\"g\",\"\\u01e7\":\"g\",\"\\u0123\":\"g\",\"\\u01e5\":\"g\",\"\\u0260\":\"g\",\"\\ua7a1\":\"g\",\"\\u1d79\":\"g\",\"\\ua77f\":\"g\",\"\\u24d7\":\"h\",\"\\uff48\":\"h\",\"\\u0125\":\"h\",\"\\u1e23\":\"h\",\"\\u1e27\":\"h\",\"\\u021f\":\"h\",\"\\u1e25\":\"h\",\"\\u1e29\":\"h\",\"\\u1e2b\":\"h\",\"\\u1e96\":\"h\",\"\\u0127\":\"h\",\"\\u2c68\":\"h\",\"\\u2c76\":\"h\",\"\\u0265\":\"h\",\"\\u0195\":\"hv\",\"\\u24d8\":\"i\",\"\\uff49\":\"i\",\"\\xec\":\"i\",\"\\xed\":\"i\",\"\\xee\":\"i\",\"\\u0129\":\"i\",\"\\u012b\":\"i\",\"\\u012d\":\"i\",\"\\xef\":\"i\",\"\\u1e2f\":\"i\",\"\\u1ec9\":\"i\",\"\\u01d0\":\"i\",\"\\u0209\":\"i\",\"\\u020b\":\"i\",\"\\u1ecb\":\"i\",\"\\u012f\":\"i\",\"\\u1e2d\":\"i\",\"\\u0268\":\"i\",\"\\u0131\":\"i\",\"\\u24d9\":\"j\",\"\\uff4a\":\"j\",\"\\u0135\":\"j\",\"\\u01f0\":\"j\",\"\\u0249\":\"j\",\"\\u24da\":\"k\",\"\\uff4b\":\"k\",\"\\u1e31\":\"k\",\"\\u01e9\":\"k\",\"\\u1e33\":\"k\",\"\\u0137\":\"k\",\"\\u1e35\":\"k\",\"\\u0199\":\"k\",\"\\u2c6a\":\"k\",\"\\ua741\":\"k\",\"\\ua743\":\"k\",\"\\ua745\":\"k\",\"\\ua7a3\":\"k\",\"\\u24db\":\"l\",\"\\uff4c\":\"l\",\"\\u0140\":\"l\",\"\\u013a\":\"l\",\"\\u013e\":\"l\",\"\\u1e37\":\"l\",\"\\u1e39\":\"l\",\"\\u013c\":\"l\",\"\\u1e3d\":\"l\",\"\\u1e3b\":\"l\",\"\\u017f\":\"l\",\"\\u0142\":\"l\",\"\\u019a\":\"l\",\"\\u026b\":\"l\",\"\\u2c61\":\"l\",\"\\ua749\":\"l\",\"\\ua781\":\"l\",\"\\ua747\":\"l\",\"\\u01c9\":\"lj\",\"\\u24dc\":\"m\",\"\\uff4d\":\"m\",\"\\u1e3f\":\"m\",\"\\u1e41\":\"m\",\"\\u1e43\":\"m\",\"\\u0271\":\"m\",\"\\u026f\":\"m\",\"\\u24dd\":\"n\",\"\\uff4e\":\"n\",\"\\u01f9\":\"n\",\"\\u0144\":\"n\",\"\\xf1\":\"n\",\"\\u1e45\":\"n\",\"\\u0148\":\"n\",\"\\u1e47\":\"n\",\"\\u0146\":\"n\",\"\\u1e4b\":\"n\",\"\\u1e49\":\"n\",\"\\u019e\":\"n\",\"\\u0272\":\"n\",\"\\u0149\":\"n\",\"\\ua791\":\"n\",\"\\ua7a5\":\"n\",\"\\u01cc\":\"nj\",\"\\u24de\":\"o\",\"\\uff4f\":\"o\",\"\\xf2\":\"o\",\"\\xf3\":\"o\",\"\\xf4\":\"o\",\"\\u1ed3\":\"o\",\"\\u1ed1\":\"o\",\"\\u1ed7\":\"o\",\"\\u1ed5\":\"o\",\"\\xf5\":\"o\",\"\\u1e4d\":\"o\",\"\\u022d\":\"o\",\"\\u1e4f\":\"o\",\"\\u014d\":\"o\",\"\\u1e51\":\"o\",\"\\u1e53\":\"o\",\"\\u014f\":\"o\",\"\\u022f\":\"o\",\"\\u0231\":\"o\",\"\\xf6\":\"o\",\"\\u022b\":\"o\",\"\\u1ecf\":\"o\",\"\\u0151\":\"o\",\"\\u01d2\":\"o\",\"\\u020d\":\"o\",\"\\u020f\":\"o\",\"\\u01a1\":\"o\",\"\\u1edd\":\"o\",\"\\u1edb\":\"o\",\"\\u1ee1\":\"o\",\"\\u1edf\":\"o\",\"\\u1ee3\":\"o\",\"\\u1ecd\":\"o\",\"\\u1ed9\":\"o\",\"\\u01eb\":\"o\",\"\\u01ed\":\"o\",\"\\xf8\":\"o\",\"\\u01ff\":\"o\",\"\\u0254\":\"o\",\"\\ua74b\":\"o\",\"\\ua74d\":\"o\",\"\\u0275\":\"o\",\"\\u01a3\":\"oi\",\"\\u0223\":\"ou\",\"\\ua74f\":\"oo\",\"\\u24df\":\"p\",\"\\uff50\":\"p\",\"\\u1e55\":\"p\",\"\\u1e57\":\"p\",\"\\u01a5\":\"p\",\"\\u1d7d\":\"p\",\"\\ua751\":\"p\",\"\\ua753\":\"p\",\"\\ua755\":\"p\",\"\\u24e0\":\"q\",\"\\uff51\":\"q\",\"\\u024b\":\"q\",\"\\ua757\":\"q\",\"\\ua759\":\"q\",\"\\u24e1\":\"r\",\"\\uff52\":\"r\",\"\\u0155\":\"r\",\"\\u1e59\":\"r\",\"\\u0159\":\"r\",\"\\u0211\":\"r\",\"\\u0213\":\"r\",\"\\u1e5b\":\"r\",\"\\u1e5d\":\"r\",\"\\u0157\":\"r\",\"\\u1e5f\":\"r\",\"\\u024d\":\"r\",\"\\u027d\":\"r\",\"\\ua75b\":\"r\",\"\\ua7a7\":\"r\",\"\\ua783\":\"r\",\"\\u24e2\":\"s\",\"\\uff53\":\"s\",\"\\xdf\":\"s\",\"\\u015b\":\"s\",\"\\u1e65\":\"s\",\"\\u015d\":\"s\",\"\\u1e61\":\"s\",\"\\u0161\":\"s\",\"\\u1e67\":\"s\",\"\\u1e63\":\"s\",\"\\u1e69\":\"s\",\"\\u0219\":\"s\",\"\\u015f\":\"s\",\"\\u023f\":\"s\",\"\\ua7a9\":\"s\",\"\\ua785\":\"s\",\"\\u1e9b\":\"s\",\"\\u24e3\":\"t\",\"\\uff54\":\"t\",\"\\u1e6b\":\"t\",\"\\u1e97\":\"t\",\"\\u0165\":\"t\",\"\\u1e6d\":\"t\",\"\\u021b\":\"t\",\"\\u0163\":\"t\",\"\\u1e71\":\"t\",\"\\u1e6f\":\"t\",\"\\u0167\":\"t\",\"\\u01ad\":\"t\",\"\\u0288\":\"t\",\"\\u2c66\":\"t\",\"\\ua787\":\"t\",\"\\ua729\":\"tz\",\"\\u24e4\":\"u\",\"\\uff55\":\"u\",\"\\xf9\":\"u\",\"\\xfa\":\"u\",\"\\xfb\":\"u\",\"\\u0169\":\"u\",\"\\u1e79\":\"u\",\"\\u016b\":\"u\",\"\\u1e7b\":\"u\",\"\\u016d\":\"u\",\"\\xfc\":\"u\",\"\\u01dc\":\"u\",\"\\u01d8\":\"u\",\"\\u01d6\":\"u\",\"\\u01da\":\"u\",\"\\u1ee7\":\"u\",\"\\u016f\":\"u\",\"\\u0171\":\"u\",\"\\u01d4\":\"u\",\"\\u0215\":\"u\",\"\\u0217\":\"u\",\"\\u01b0\":\"u\",\"\\u1eeb\":\"u\",\"\\u1ee9\":\"u\",\"\\u1eef\":\"u\",\"\\u1eed\":\"u\",\"\\u1ef1\":\"u\",\"\\u1ee5\":\"u\",\"\\u1e73\":\"u\",\"\\u0173\":\"u\",\"\\u1e77\":\"u\",\"\\u1e75\":\"u\",\"\\u0289\":\"u\",\"\\u24e5\":\"v\",\"\\uff56\":\"v\",\"\\u1e7d\":\"v\",\"\\u1e7f\":\"v\",\"\\u028b\":\"v\",\"\\ua75f\":\"v\",\"\\u028c\":\"v\",\"\\ua761\":\"vy\",\"\\u24e6\":\"w\",\"\\uff57\":\"w\",\"\\u1e81\":\"w\",\"\\u1e83\":\"w\",\"\\u0175\":\"w\",\"\\u1e87\":\"w\",\"\\u1e85\":\"w\",\"\\u1e98\":\"w\",\"\\u1e89\":\"w\",\"\\u2c73\":\"w\",\"\\u24e7\":\"x\",\"\\uff58\":\"x\",\"\\u1e8b\":\"x\",\"\\u1e8d\":\"x\",\"\\u24e8\":\"y\",\"\\uff59\":\"y\",\"\\u1ef3\":\"y\",\"\\xfd\":\"y\",\"\\u0177\":\"y\",\"\\u1ef9\":\"y\",\"\\u0233\":\"y\",\"\\u1e8f\":\"y\",\"\\xff\":\"y\",\"\\u1ef7\":\"y\",\"\\u1e99\":\"y\",\"\\u1ef5\":\"y\",\"\\u01b4\":\"y\",\"\\u024f\":\"y\",\"\\u1eff\":\"y\",\"\\u24e9\":\"z\",\"\\uff5a\":\"z\",\"\\u017a\":\"z\",\"\\u1e91\":\"z\",\"\\u017c\":\"z\",\"\\u017e\":\"z\",\"\\u1e93\":\"z\",\"\\u1e95\":\"z\",\"\\u01b6\":\"z\",\"\\u0225\":\"z\",\"\\u0240\":\"z\",\"\\u2c6c\":\"z\",\"\\ua763\":\"z\"};j=a(document),g=function(){var a=1;return function(){return a++}}(),j.on(\"mousemove\",function(a){i.x=a.pageX,i.y=a.pageY}),d=N(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,f=\".select2-results\";this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data(\"select2\")!==b&&null!==c.element.data(\"select2\")&&c.element.data(\"select2\").destroy(),this.container=this.createContainer(),this.containerId=\"s2id_\"+(c.element.attr(\"id\")||\"autogen\"+g()),this.containerSelector=\"#\"+this.containerId.replace(/([;&,\\.\\+\\*\\~':\"\\!\\^#$%@\\[\\]\\(\\)=>\\|])/g,\"\\\\$1\"),this.container.attr(\"id\",this.containerId),this.body=w(function(){return c.element.closest(\"body\")}),D(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr(\"style\",c.element.attr(\"style\")),this.container.css(K(c.containerCss)),this.container.addClass(K(c.containerCssClass)),this.elementTabIndex=this.opts.element.attr(\"tabindex\"),this.opts.element.data(\"select2\",this).attr(\"tabindex\",\"-1\").before(this.container).on(\"click.select2\",A),this.container.data(\"select2\",this),this.dropdown=this.container.find(\".select2-drop\"),D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(c.dropdownCssClass)),this.dropdown.data(\"select2\",this),this.dropdown.on(\"click\",A),this.results=d=this.container.find(f),this.search=e=this.container.find(\"input.select2-input\"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on(\"click\",A),u(this.results),this.dropdown.on(\"mousemove-filtered touchstart touchmove touchend\",f,this.bind(this.highlightUnderEvent)),x(80,this.results),this.dropdown.on(\"scroll-debounced\",f,this.bind(this.loadMoreIfNeeded)),a(this.container).on(\"change\",\".select2-input\",function(a){a.stopPropagation()}),a(this.dropdown).on(\"change\",\".select2-input\",function(a){a.stopPropagation()}),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop();e>0&&0>=f-e?(d.scrollTop(0),A(a)):0>e&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),A(a))}),t(e),e.on(\"keyup-change input paste\",this.bind(this.updateResults)),e.on(\"focus\",function(){e.addClass(\"select2-focused\")}),e.on(\"blur\",function(){e.removeClass(\"select2-focused\")}),this.dropdown.on(\"mouseup\",f,this.bind(function(b){a(b.target).closest(\".select2-result-selectable\").length>0&&(this.highlightUnderEvent(b),this.selectHighlighted(b))})),this.dropdown.on(\"click mouseup mousedown\",function(a){a.stopPropagation()}),a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==c.maximumInputLength&&this.search.attr(\"maxlength\",c.maximumInputLength);var h=c.element.prop(\"disabled\");h===b&&(h=!1),this.enable(!h);var i=c.element.prop(\"readonly\");i===b&&(i=!1),this.readonly(i),k=k||p(),this.autofocus=c.element.prop(\"autofocus\"),c.element.prop(\"autofocus\",!1),this.autofocus&&this.focus(),this.nextSearchTerm=b},destroy:function(){var a=this.opts.element,c=a.data(\"select2\");this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),c!==b&&(c.container.remove(),c.dropdown.remove(),a.removeClass(\"select2-offscreen\").removeData(\"select2\").off(\".select2\").prop(\"autofocus\",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr(\"tabindex\"),a.show())},optionToData:function(a){return a.is(\"option\")?{id:a.prop(\"value\"),text:a.text(),element:a.get(),css:a.attr(\"class\"),disabled:a.prop(\"disabled\"),locked:q(a.attr(\"locked\"),\"locked\")||q(a.data(\"locked\"),!0)}:a.is(\"optgroup\")?{text:a.attr(\"label\"),children:[],element:a.get(),css:a.attr(\"class\")}:void 0},prepareOpts:function(c){var d,e,f,g,h=this;if(d=c.element,\"select\"===d.get(0).tagName.toLowerCase()&&(this.select=e=c.element),e&&a.each([\"id\",\"multiple\",\"ajax\",\"query\",\"createSearchChoice\",\"initSelection\",\"data\",\"tags\"],function(){if(this in c)throw new Error(\"Option '\"+this+\"' is not allowed for Select2 when attached to a <select> element.\")}),c=a.extend({},{populateResults:function(d,e,f){var g,i=this.opts.id;g=function(d,e,j){var k,l,m,n,o,p,q,r,s,t;for(d=c.sortResults(d,e,f),k=0,l=d.length;l>k;k+=1)m=d[k],o=m.disabled===!0,n=!o&&i(m)!==b,p=m.children&&m.children.length>0,q=a(\"<li></li>\"),q.addClass(\"select2-results-dept-\"+j),q.addClass(\"select2-result\"),q.addClass(n?\"select2-result-selectable\":\"select2-result-unselectable\"),o&&q.addClass(\"select2-disabled\"),p&&q.addClass(\"select2-result-with-children\"),q.addClass(h.opts.formatResultCssClass(m)),r=a(document.createElement(\"div\")),r.addClass(\"select2-result-label\"),t=c.formatResult(m,r,f,h.opts.escapeMarkup),t!==b&&r.html(t),q.append(r),p&&(s=a(\"<ul></ul>\"),s.addClass(\"select2-result-sub\"),g(m.children,s,j+1),q.append(s)),q.data(\"select2-data\",m),e.append(q)},g(e,d,0)}},a.fn.select2.defaults,c),\"function\"!=typeof c.id&&(f=c.id,c.id=function(a){return a[f]}),a.isArray(c.element.data(\"select2Tags\"))){if(\"tags\"in c)throw\"tags specified as both an attribute 'data-select2-tags' and in options of Select2 \"+c.element.attr(\"id\");c.tags=c.element.data(\"select2Tags\")}if(e?(c.query=this.bind(function(a){var f,g,i,c={results:[],more:!1},e=a.term;i=function(b,c){var d;b.is(\"option\")?a.matcher(e,b.text(),b)&&c.push(h.optionToData(b)):b.is(\"optgroup\")&&(d=h.optionToData(b),b.children().each2(function(a,b){i(b,d.children)}),d.children.length>0&&c.push(d))},f=d.children(),this.getPlaceholder()!==b&&f.length>0&&(g=this.getPlaceholderOption(),g&&(f=f.not(g))),f.each2(function(a,b){i(b,c.results)}),a.callback(c)}),c.id=function(a){return a.id},c.formatResultCssClass=function(a){return a.css}):\"query\"in c||(\"ajax\"in c?(g=c.element.data(\"ajax-url\"),g&&g.length>0&&(c.ajax.url=g),c.query=G.call(c.element,c.ajax)):\"data\"in c?c.query=H(c.data):\"tags\"in c&&(c.query=I(c.tags),c.createSearchChoice===b&&(c.createSearchChoice=function(b){return{id:a.trim(b),text:a.trim(b)}}),c.initSelection===b&&(c.initSelection=function(b,d){var e=[];a(r(b.val(),c.separator)).each(function(){var b={id:this,text:this},d=c.tags;a.isFunction(d)&&(d=d()),a(d).each(function(){return q(this.id,b.id)?(b=this,!1):void 0}),e.push(b)}),d(e)}))),\"function\"!=typeof c.query)throw\"query function not defined for Select2 \"+c.element.attr(\"id\");return c},monitorSource:function(){var c,d,a=this.opts.element;a.on(\"change.select2\",this.bind(function(){this.opts.element.data(\"select2-change-triggered\")!==!0&&this.initSelection()})),c=this.bind(function(){var c=a.prop(\"disabled\");c===b&&(c=!1),this.enable(!c);var d=a.prop(\"readonly\");d===b&&(d=!1),this.readonly(d),D(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(K(this.opts.containerCssClass)),D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(this.opts.dropdownCssClass))}),a.on(\"propertychange.select2\",c),this.mutationCallback===b&&(this.mutationCallback=function(a){a.forEach(c)}),d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,d!==b&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new d(this.mutationCallback),this.propertyObserver.observe(a.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(b){var c=a.Event(\"select2-selecting\",{val:this.id(b),object:b});return this.opts.element.trigger(c),!c.isDefaultPrevented()},triggerChange:function(b){b=b||{},b=a.extend({},b,{type:\"change\",val:this.val()}),this.opts.element.data(\"select2-change-triggered\",!0),this.opts.element.trigger(b),this.opts.element.data(\"select2-change-triggered\",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var a=this._enabled&&!this._readonly,b=!a;return a===this.enabledInterface?!1:(this.container.toggleClass(\"select2-container-disabled\",b),this.close(),this.enabledInterface=a,!0)},enable:function(a){a===b&&(a=!0),this._enabled!==a&&(this._enabled=a,this.opts.element.prop(\"disabled\",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){return a===b&&(a=!1),this._readonly===a?!1:(this._readonly=a,this.opts.element.prop(\"readonly\",a),this.enableInterface(),!0)},opened:function(){return this.container.hasClass(\"select2-dropdown-open\")},positionDropdown:function(){var t,u,v,w,x,b=this.dropdown,c=this.container.offset(),d=this.container.outerHeight(!1),e=this.container.outerWidth(!1),f=b.outerHeight(!1),g=a(window),h=g.width(),i=g.height(),j=g.scrollLeft()+h,l=g.scrollTop()+i,m=c.top+d,n=c.left,o=l>=m+f,p=c.top-f>=this.body().scrollTop(),q=b.outerWidth(!1),r=j>=n+q,s=b.hasClass(\"select2-drop-above\");s?(u=!0,!p&&o&&(v=!0,u=!1)):(u=!1,!o&&p&&(v=!0,u=!0)),v&&(b.hide(),c=this.container.offset(),d=this.container.outerHeight(!1),e=this.container.outerWidth(!1),f=b.outerHeight(!1),j=g.scrollLeft()+h,l=g.scrollTop()+i,m=c.top+d,n=c.left,q=b.outerWidth(!1),r=j>=n+q,b.show()),this.opts.dropdownAutoWidth?(x=a(\".select2-results\",b)[0],b.addClass(\"select2-drop-auto-width\"),b.css(\"width\",\"\"),q=b.outerWidth(!1)+(x.scrollHeight===x.clientHeight?0:k.width),q>e?e=q:q=e,r=j>=n+q):this.container.removeClass(\"select2-drop-auto-width\"),\"static\"!==this.body().css(\"position\")&&(t=this.body().offset(),m-=t.top,n-=t.left),r||(n=c.left+e-q),w={left:n,width:e},u?(w.bottom=i-c.top,w.top=\"auto\",this.container.addClass(\"select2-drop-above\"),b.addClass(\"select2-drop-above\")):(w.top=m,w.bottom=\"auto\",this.container.removeClass(\"select2-drop-above\"),b.removeClass(\"select2-drop-above\")),w=a.extend(w,K(this.opts.dropdownCss)),b.css(w)},shouldOpen:function(){var b;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(b=a.Event(\"select2-opening\"),this.opts.element.trigger(b),!b.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass(\"select2-drop-above\"),this.dropdown.removeClass(\"select2-drop-above\")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){var f,b=this.containerId,c=\"scroll.\"+b,d=\"resize.\"+b,e=\"orientationchange.\"+b;this.container.addClass(\"select2-dropdown-open\").addClass(\"select2-container-active\"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),f=a(\"#select2-drop-mask\"),0==f.length&&(f=a(document.createElement(\"div\")),f.attr(\"id\",\"select2-drop-mask\").attr(\"class\",\"select2-drop-mask\"),f.hide(),f.appendTo(this.body()),f.on(\"mousedown touchstart click\",function(b){var d,c=a(\"#select2-drop\");c.length>0&&(d=c.data(\"select2\"),d.opts.selectOnBlur&&d.selectHighlighted({noFocus:!0}),d.close({focus:!0}),b.preventDefault(),b.stopPropagation())})),this.dropdown.prev()[0]!==f[0]&&this.dropdown.before(f),a(\"#select2-drop\").removeAttr(\"id\"),this.dropdown.attr(\"id\",\"select2-drop\"),f.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass(\"select2-drop-active\");var g=this;this.container.parents().add(window).each(function(){a(this).on(d+\" \"+c+\" \"+e,function(){g.positionDropdown()})})},close:function(){if(this.opened()){var b=this.containerId,c=\"scroll.\"+b,d=\"resize.\"+b,e=\"orientationchange.\"+b;this.container.parents().add(window).each(function(){a(this).off(c).off(d).off(e)}),this.clearDropdownAlignmentPreference(),a(\"#select2-drop-mask\").hide(),this.dropdown.removeAttr(\"id\"),this.dropdown.hide(),this.container.removeClass(\"select2-dropdown-open\").removeClass(\"select2-container-active\"),this.results.empty(),this.clearSearch(),this.search.removeClass(\"select2-active\"),this.opts.element.trigger(a.Event(\"select2-close\"))}},externalSearch:function(a){this.open(),this.search.val(a),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return K(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var c,d,e,f,g,h,i,b=this.results;if(d=this.highlight(),!(0>d)){if(0==d)return b.scrollTop(0),void 0;c=this.findHighlightableChoices().find(\".select2-result-label\"),e=a(c[d]),f=e.offset().top+e.outerHeight(!0),d===c.length-1&&(i=b.find(\"li.select2-more-results\"),i.length>0&&(f=i.offset().top+i.outerHeight(!0))),g=b.offset().top+b.outerHeight(!0),f>g&&b.scrollTop(b.scrollTop()+(f-g)),h=e.offset().top-b.offset().top,0>h&&\"none\"!=e.css(\"display\")&&b.scrollTop(b.scrollTop()+h)}},findHighlightableChoices:function(){return this.results.find(\".select2-result-selectable:not(.select2-disabled, .select2-selected)\")},moveHighlight:function(b){for(var c=this.findHighlightableChoices(),d=this.highlight();d>-1&&d<c.length;){d+=b;var e=a(c[d]);if(e.hasClass(\"select2-result-selectable\")&&!e.hasClass(\"select2-disabled\")&&!e.hasClass(\"select2-selected\")){this.highlight(d);break}}},highlight:function(b){var d,e,c=this.findHighlightableChoices();return 0===arguments.length?o(c.filter(\".select2-highlighted\")[0],c.get()):(b>=c.length&&(b=c.length-1),0>b&&(b=0),this.removeHighlight(),d=a(c[b]),d.addClass(\"select2-highlighted\"),this.ensureHighlightVisible(),e=d.data(\"select2-data\"),e&&this.opts.element.trigger({type:\"select2-highlight\",val:this.id(e),choice:e}),void 0)},removeHighlight:function(){this.results.find(\".select2-highlighted\").removeClass(\"select2-highlighted\")},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(b){var c=a(b.target).closest(\".select2-result-selectable\");if(c.length>0&&!c.is(\".select2-highlighted\")){var d=this.findHighlightableChoices();this.highlight(d.index(c))}else 0==c.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var c,a=this.results,b=a.find(\"li.select2-more-results\"),d=this.resultsPage+1,e=this,f=this.search.val(),g=this.context;0!==b.length&&(c=b.offset().top-a.offset().top-a.height(),c<=this.opts.loadMorePadding&&(b.addClass(\"select2-active\"),this.opts.query({element:this.opts.element,term:f,page:d,context:g,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:f,page:d,context:g}),e.postprocessResults(c,!1,!1),c.more===!0?(b.detach().appendTo(a).text(e.opts.formatLoadMore(d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):b.remove(),e.positionDropdown(),e.resultsPage=d,e.context=c.context,this.opts.element.trigger({type:\"select2-loaded\",items:c}))})})))},tokenize:function(){},updateResults:function(c){function m(){d.removeClass(\"select2-active\"),h.positionDropdown()}function n(a){e.html(a),m()}var g,i,l,d=this.search,e=this.results,f=this.opts,h=this,j=d.val(),k=a.data(this.container,\"select2-last-term\");if((c===!0||!k||!q(j,k))&&(a.data(this.container,\"select2-last-term\",j),c===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var o=this.getMaximumSelectionSize();if(o>=1&&(g=this.data(),a.isArray(g)&&g.length>=o&&J(f.formatSelectionTooBig,\"formatSelectionTooBig\")))return n(\"<li class='select2-selection-limit'>\"+f.formatSelectionTooBig(o)+\"</li>\"),void 0;if(d.val().length<f.minimumInputLength)return J(f.formatInputTooShort,\"formatInputTooShort\")?n(\"<li class='select2-no-results'>\"+f.formatInputTooShort(d.val(),f.minimumInputLength)+\"</li>\"):n(\"\"),c&&this.showSearch&&this.showSearch(!0),void 0;\nif(f.maximumInputLength&&d.val().length>f.maximumInputLength)return J(f.formatInputTooLong,\"formatInputTooLong\")?n(\"<li class='select2-no-results'>\"+f.formatInputTooLong(d.val(),f.maximumInputLength)+\"</li>\"):n(\"\"),void 0;f.formatSearching&&0===this.findHighlightableChoices().length&&n(\"<li class='select2-searching'>\"+f.formatSearching()+\"</li>\"),d.addClass(\"select2-active\"),this.removeHighlight(),i=this.tokenize(),i!=b&&null!=i&&d.val(i),this.resultsPage=1,f.query({element:f.element,term:d.val(),page:this.resultsPage,context:null,matcher:f.matcher,callback:this.bind(function(g){var i;if(l==this.queryCount){if(!this.opened())return this.search.removeClass(\"select2-active\"),void 0;if(this.context=g.context===b?null:g.context,this.opts.createSearchChoice&&\"\"!==d.val()&&(i=this.opts.createSearchChoice.call(h,d.val(),g.results),i!==b&&null!==i&&h.id(i)!==b&&null!==h.id(i)&&0===a(g.results).filter(function(){return q(h.id(this),h.id(i))}).length&&g.results.unshift(i)),0===g.results.length&&J(f.formatNoMatches,\"formatNoMatches\"))return n(\"<li class='select2-no-results'>\"+f.formatNoMatches(d.val())+\"</li>\"),void 0;e.empty(),h.opts.populateResults.call(this,e,g.results,{term:d.val(),page:this.resultsPage,context:null}),g.more===!0&&J(f.formatLoadMore,\"formatLoadMore\")&&(e.append(\"<li class='select2-more-results'>\"+h.opts.escapeMarkup(f.formatLoadMore(this.resultsPage))+\"</li>\"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(g,c),m(),this.opts.element.trigger({type:\"select2-loaded\",items:g})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass(\"select2-container-active\"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(\".select2-search-choice-focus\").removeClass(\"select2-search-choice-focus\")},focusSearch:function(){y(this.search)},selectHighlighted:function(a){var b=this.highlight(),c=this.results.find(\".select2-highlighted\"),d=c.closest(\".select2-result\").data(\"select2-data\");d?(this.highlight(b),this.onSelect(d,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr(\"placeholder\")||this.opts.element.attr(\"data-placeholder\")||this.opts.element.data(\"placeholder\")||this.opts.placeholder||((a=this.getPlaceholderOption())!==b?a.text():b)},getPlaceholderOption:function(){if(this.select){var a=this.select.children(\"option\").first();if(this.opts.placeholderOption!==b)return\"first\"===this.opts.placeholderOption&&a||\"function\"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(\"\"===a.text()&&\"\"===a.val())return a}},initContainerWidth:function(){function c(){var c,d,e,f,g,h;if(\"off\"===this.opts.width)return null;if(\"element\"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?\"auto\":this.opts.element.outerWidth(!1)+\"px\";if(\"copy\"===this.opts.width||\"resolve\"===this.opts.width){if(c=this.opts.element.attr(\"style\"),c!==b)for(d=c.split(\";\"),f=0,g=d.length;g>f;f+=1)if(h=d[f].replace(/\\s/g,\"\"),e=h.match(/^width:(([-+]?([0-9]*\\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==e&&e.length>=1)return e[1];return\"resolve\"===this.opts.width?(c=this.opts.element.css(\"width\"),c.indexOf(\"%\")>0?c:0===this.opts.element.outerWidth(!1)?\"auto\":this.opts.element.outerWidth(!1)+\"px\"):null}return a.isFunction(this.opts.width)?this.opts.width():this.opts.width}var d=c.call(this);null!==d&&this.container.css(\"width\",d)}}),e=N(d,{createContainer:function(){var b=a(document.createElement(\"div\")).attr({\"class\":\"select2-container\"}).html([\"<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>\",\"   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>\",\"   <span class='select2-arrow'><b></b></span>\",\"</a>\",\"<input class='select2-focusser select2-offscreen' type='text'/>\",\"<div class='select2-drop select2-display-none'>\",\"   <div class='select2-search'>\",\"       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>\",\"   </div>\",\"   <ul class='select2-results'>\",\"   </ul>\",\"</div>\"].join(\"\"));return b},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop(\"disabled\",!this.isInterfaceEnabled())},opening:function(){var c,d,e;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),c=this.search.get(0),c.createTextRange?(d=c.createTextRange(),d.collapse(!1),d.select()):c.setSelectionRange&&(e=this.search.val().length,c.setSelectionRange(e,e)),\"\"===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop(\"disabled\",!0).val(\"\"),this.updateResults(!0),this.opts.element.trigger(a.Event(\"select2-open\"))},close:function(a){this.opened()&&(this.parent.close.apply(this,arguments),a=a||{focus:!0},this.focusser.removeAttr(\"disabled\"),a.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr(\"disabled\"),this.focusser.focus())},isFocused:function(){return this.container.hasClass(\"select2-container-active\")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr(\"disabled\"),this.focusser.focus()},destroy:function(){a(\"label[for='\"+this.focusser.attr(\"id\")+\"']\").attr(\"for\",this.opts.element.attr(\"id\")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var b,d=this.container,e=this.dropdown;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=b=d.find(\".select2-choice\"),this.focusser=d.find(\".select2-focusser\"),this.focusser.attr(\"id\",\"s2id_autogen\"+g()),a(\"label[for='\"+this.opts.element.attr(\"id\")+\"']\").attr(\"for\",this.focusser.attr(\"id\")),this.focusser.attr(\"tabindex\",this.elementTabIndex),this.search.on(\"keydown\",this.bind(function(a){if(this.isInterfaceEnabled()){if(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)return A(a),void 0;switch(a.which){case c.UP:case c.DOWN:return this.moveHighlight(a.which===c.UP?-1:1),A(a),void 0;case c.ENTER:return this.selectHighlighted(),A(a),void 0;case c.TAB:return this.selectHighlighted({noFocus:!0}),void 0;case c.ESC:return this.cancel(a),A(a),void 0}}})),this.search.on(\"blur\",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on(\"keydown\",this.bind(function(a){if(this.isInterfaceEnabled()&&a.which!==c.TAB&&!c.isControl(a)&&!c.isFunctionKey(a)&&a.which!==c.ESC){if(this.opts.openOnEnter===!1&&a.which===c.ENTER)return A(a),void 0;if(a.which==c.DOWN||a.which==c.UP||a.which==c.ENTER&&this.opts.openOnEnter){if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return;return this.open(),A(a),void 0}return a.which==c.DELETE||a.which==c.BACKSPACE?(this.opts.allowClear&&this.clear(),A(a),void 0):void 0}})),t(this.focusser),this.focusser.on(\"keyup-change input\",this.bind(function(a){if(this.opts.minimumResultsForSearch>=0){if(a.stopPropagation(),this.opened())return;this.open()}})),b.on(\"mousedown\",\"abbr\",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),B(a),this.close(),this.selection.focus())})),b.on(\"mousedown\",this.bind(function(b){this.container.hasClass(\"select2-container-active\")||this.opts.element.trigger(a.Event(\"select2-focus\")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),A(b)})),e.on(\"mousedown\",this.bind(function(){this.search.focus()})),b.on(\"focus\",this.bind(function(a){A(a)})),this.focusser.on(\"focus\",this.bind(function(){this.container.hasClass(\"select2-container-active\")||this.opts.element.trigger(a.Event(\"select2-focus\")),this.container.addClass(\"select2-container-active\")})).on(\"blur\",this.bind(function(){this.opened()||(this.container.removeClass(\"select2-container-active\"),this.opts.element.trigger(a.Event(\"select2-blur\")))})),this.search.on(\"focus\",this.bind(function(){this.container.hasClass(\"select2-container-active\")||this.opts.element.trigger(a.Event(\"select2-focus\")),this.container.addClass(\"select2-container-active\")})),this.initContainerWidth(),this.opts.element.addClass(\"select2-offscreen\"),this.setPlaceholder()},clear:function(b){var c=this.selection.data(\"select2-data\");if(c){var d=a.Event(\"select2-clearing\");if(this.opts.element.trigger(d),d.isDefaultPrevented())return;var e=this.getPlaceholderOption();this.opts.element.val(e?e.val():\"\"),this.selection.find(\".select2-chosen\").empty(),this.selection.removeData(\"select2-data\"),this.setPlaceholder(),b!==!1&&(this.opts.element.trigger({type:\"select2-removed\",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),c.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var a;return this.getPlaceholder()?(a=this.getPlaceholderOption())!==b&&a.prop(\"selected\")||\"\"===this.opts.element.val()||this.opts.element.val()===b||null===this.opts.element.val():!1},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return\"select\"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=a.find(\"option\").filter(function(){return this.selected});b(c.optionToData(d))}:\"data\"in b&&(b.initSelection=b.initSelection||function(c,d){var e=c.val(),f=null;b.query({matcher:function(a,c,d){var g=q(e,b.id(d));return g&&(f=d),g},callback:a.isFunction(d)?function(){d(f)}:a.noop})}),b},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===b?b:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&a!==b){if(this.select&&this.getPlaceholderOption()===b)return;this.selection.find(\".select2-chosen\").html(this.opts.escapeMarkup(a)),this.selection.addClass(\"select2-default\"),this.container.removeClass(\"select2-allowclear\")}},postprocessResults:function(a,b,c){var d=0,e=this;if(this.findHighlightableChoices().each2(function(a,b){return q(e.id(b.data(\"select2-data\")),e.opts.element.val())?(d=a,!1):void 0}),c!==!1&&(b===!0&&d>=0?this.highlight(d):this.highlight(0)),b===!0){var g=this.opts.minimumResultsForSearch;g>=0&&this.showSearch(L(a.results)>=g)}},showSearch:function(b){this.showSearchInput!==b&&(this.showSearchInput=b,this.dropdown.find(\".select2-search\").toggleClass(\"select2-search-hidden\",!b),this.dropdown.find(\".select2-search\").toggleClass(\"select2-offscreen\",!b),a(this.dropdown,this.container).toggleClass(\"select2-with-searchbox\",b))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a)),this.updateSelection(a),this.opts.element.trigger({type:\"select2-selected\",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.close(),b&&b.noFocus||this.focusser.focus(),q(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var d,e,c=this.selection.find(\".select2-chosen\");this.selection.data(\"select2-data\",a),c.empty(),null!==a&&(d=this.opts.formatSelection(a,c,this.opts.escapeMarkup)),d!==b&&c.append(d),e=this.opts.formatSelectionCssClass(a,c),e!==b&&c.addClass(e),this.selection.removeClass(\"select2-default\"),this.opts.allowClear&&this.getPlaceholder()!==b&&this.container.addClass(\"select2-allowclear\")},val:function(){var a,c=!1,d=null,e=this,f=this.data();if(0===arguments.length)return this.opts.element.val();if(a=arguments[0],arguments.length>1&&(c=arguments[1]),this.select)this.select.val(a).find(\"option\").filter(function(){return this.selected}).each2(function(a,b){return d=e.optionToData(b),!1}),this.updateSelection(d),this.setPlaceholder(),c&&this.triggerChange({added:d,removed:f});else{if(!a&&0!==a)return this.clear(c),void 0;if(this.opts.initSelection===b)throw new Error(\"cannot call val() if initSelection() is not defined\");this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){e.opts.element.val(a?e.id(a):\"\"),e.updateSelection(a),e.setPlaceholder(),c&&e.triggerChange({added:a,removed:f})})}},clearSearch:function(){this.search.val(\"\"),this.focusser.val(\"\")},data:function(a){var c,d=!1;return 0===arguments.length?(c=this.selection.data(\"select2-data\"),c==b&&(c=null),c):(arguments.length>1&&(d=arguments[1]),a?(c=this.data(),this.opts.element.val(a?this.id(a):\"\"),this.updateSelection(a),d&&this.triggerChange({added:a,removed:c})):this.clear(d),void 0)}}),f=N(d,{createContainer:function(){var b=a(document.createElement(\"div\")).attr({\"class\":\"select2-container select2-container-multi\"}).html([\"<ul class='select2-choices'>\",\"  <li class='select2-search-field'>\",\"    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>\",\"  </li>\",\"</ul>\",\"<div class='select2-drop select2-drop-multi select2-display-none'>\",\"   <ul class='select2-results'>\",\"   </ul>\",\"</div>\"].join(\"\"));return b},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return\"select\"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=[];a.find(\"option\").filter(function(){return this.selected}).each2(function(a,b){d.push(c.optionToData(b))}),b(d)}:\"data\"in b&&(b.initSelection=b.initSelection||function(c,d){var e=r(c.val(),b.separator),f=[];b.query({matcher:function(c,d,g){var h=a.grep(e,function(a){return q(a,b.id(g))}).length;return h&&f.push(g),h},callback:a.isFunction(d)?function(){for(var a=[],c=0;c<e.length;c++)for(var g=e[c],h=0;h<f.length;h++){var i=f[h];if(q(g,b.id(i))){a.push(i),f.splice(h,1);break}}d(a)}:a.noop})}),b},selectChoice:function(a){var b=this.container.find(\".select2-search-choice-focus\");b.length&&a&&a[0]==b[0]||(b.length&&this.opts.element.trigger(\"choice-deselected\",b),b.removeClass(\"select2-search-choice-focus\"),a&&a.length&&(this.close(),a.addClass(\"select2-search-choice-focus\"),this.opts.element.trigger(\"choice-selected\",a)))},destroy:function(){a(\"label[for='\"+this.search.attr(\"id\")+\"']\").attr(\"for\",this.opts.element.attr(\"id\")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var d,b=\".select2-choices\";this.searchContainer=this.container.find(\".select2-search-field\"),this.selection=d=this.container.find(b);var e=this;this.selection.on(\"click\",\".select2-search-choice:not(.select2-locked)\",function(){e.search[0].focus(),e.selectChoice(a(this))}),this.search.attr(\"id\",\"s2id_autogen\"+g()),a(\"label[for='\"+this.opts.element.attr(\"id\")+\"']\").attr(\"for\",this.search.attr(\"id\")),this.search.on(\"input paste\",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr(\"tabindex\",this.elementTabIndex),this.keydowns=0,this.search.on(\"keydown\",this.bind(function(a){if(this.isInterfaceEnabled()){++this.keydowns;var b=d.find(\".select2-search-choice-focus\"),e=b.prev(\".select2-search-choice:not(.select2-locked)\"),f=b.next(\".select2-search-choice:not(.select2-locked)\"),g=z(this.search);if(b.length&&(a.which==c.LEFT||a.which==c.RIGHT||a.which==c.BACKSPACE||a.which==c.DELETE||a.which==c.ENTER)){var h=b;return a.which==c.LEFT&&e.length?h=e:a.which==c.RIGHT?h=f.length?f:null:a.which===c.BACKSPACE?(this.unselect(b.first()),this.search.width(10),h=e.length?e:f):a.which==c.DELETE?(this.unselect(b.first()),this.search.width(10),h=f.length?f:null):a.which==c.ENTER&&(h=null),this.selectChoice(h),A(a),h&&h.length||this.open(),void 0}if((a.which===c.BACKSPACE&&1==this.keydowns||a.which==c.LEFT)&&0==g.offset&&!g.length)return this.selectChoice(d.find(\".select2-search-choice:not(.select2-locked)\").last()),A(a),void 0;if(this.selectChoice(null),this.opened())switch(a.which){case c.UP:case c.DOWN:return this.moveHighlight(a.which===c.UP?-1:1),A(a),void 0;case c.ENTER:return this.selectHighlighted(),A(a),void 0;case c.TAB:return this.selectHighlighted({noFocus:!0}),this.close(),void 0;case c.ESC:return this.cancel(a),A(a),void 0}if(a.which!==c.TAB&&!c.isControl(a)&&!c.isFunctionKey(a)&&a.which!==c.BACKSPACE&&a.which!==c.ESC){if(a.which===c.ENTER){if(this.opts.openOnEnter===!1)return;if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return}this.open(),(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)&&A(a),a.which===c.ENTER&&A(a)}}})),this.search.on(\"keyup\",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on(\"blur\",this.bind(function(b){this.container.removeClass(\"select2-container-active\"),this.search.removeClass(\"select2-focused\"),this.selectChoice(null),this.opened()||this.clearSearch(),b.stopImmediatePropagation(),this.opts.element.trigger(a.Event(\"select2-blur\"))})),this.container.on(\"click\",b,this.bind(function(b){this.isInterfaceEnabled()&&(a(b.target).closest(\".select2-search-choice\").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass(\"select2-container-active\")||this.opts.element.trigger(a.Event(\"select2-focus\")),this.open(),this.focusSearch(),b.preventDefault()))})),this.container.on(\"focus\",b,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass(\"select2-container-active\")||this.opts.element.trigger(a.Event(\"select2-focus\")),this.container.addClass(\"select2-container-active\"),this.dropdown.addClass(\"select2-drop-active\"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass(\"select2-offscreen\"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop(\"disabled\",!this.isInterfaceEnabled())},initSelection:function(){if(\"\"===this.opts.element.val()&&\"\"===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||\"\"!==this.opts.element.val()){var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),c.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),c=this.getMaxSearchWidth();a!==b&&0===this.getVal().length&&this.search.hasClass(\"select2-focused\")===!1?(this.search.val(a).addClass(\"select2-default\"),this.search.width(c>0?c:this.container.css(\"width\"))):this.search.val(\"\").width(10)},clearPlaceholder:function(){this.search.hasClass(\"select2-default\")&&this.search.val(\"\").removeClass(\"select2-default\")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(a.Event(\"select2-open\"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass(\"select2-focused\")},updateSelection:function(b){var c=[],d=[],e=this;a(b).each(function(){o(e.id(this),c)<0&&(c.push(e.id(this)),d.push(this))}),b=d,this.selection.find(\".select2-search-choice\").remove(),a(b).each(function(){e.addSelectedChoice(this)}),e.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer.call(this,a,this.data(),this.bind(this.onSelect),this.opts),null!=a&&a!=b&&(this.search.val(a),a.length>0&&this.open())},onSelect:function(a,b){this.triggerSelect(a)&&(this.addSelectedChoice(a),this.opts.element.trigger({type:\"selected\",val:this.id(a),choice:a}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),b&&b.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(c){var j,k,d=!c.locked,e=a(\"<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>\"),f=a(\"<li class='select2-search-choice select2-locked'><div></div></li>\"),g=d?e:f,h=this.id(c),i=this.getVal();j=this.opts.formatSelection(c,g.find(\"div\"),this.opts.escapeMarkup),j!=b&&g.find(\"div\").replaceWith(\"<div>\"+j+\"</div>\"),k=this.opts.formatSelectionCssClass(c,g.find(\"div\")),k!=b&&g.addClass(k),d&&g.find(\".select2-search-choice-close\").on(\"mousedown\",A).on(\"click dblclick\",this.bind(function(b){this.isInterfaceEnabled()&&(a(b.target).closest(\".select2-search-choice\").fadeOut(\"fast\",this.bind(function(){this.unselect(a(b.target)),this.selection.find(\".select2-search-choice-focus\").removeClass(\"select2-search-choice-focus\"),this.close(),this.focusSearch()})).dequeue(),A(b))})).on(\"focus\",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass(\"select2-container-active\"),this.dropdown.addClass(\"select2-drop-active\"))})),g.data(\"select2-data\",c),g.insertBefore(this.searchContainer),i.push(h),this.setVal(i)},unselect:function(b){var d,e,c=this.getVal();if(b=b.closest(\".select2-search-choice\"),0===b.length)throw\"Invalid argument: \"+b+\". Must be .select2-search-choice\";if(d=b.data(\"select2-data\")){for(;(e=o(this.id(d),c))>=0;)c.splice(e,1),this.setVal(c),this.select&&this.postprocessResults();var f=a.Event(\"select2-removing\");f.val=this.id(d),f.choice=d,this.opts.element.trigger(f),f.isDefaultPrevented()||(b.remove(),this.opts.element.trigger({type:\"select2-removed\",val:this.id(d),choice:d}),this.triggerChange({removed:d}))}},postprocessResults:function(a,b,c){var d=this.getVal(),e=this.results.find(\".select2-result\"),f=this.results.find(\".select2-result-with-children\"),g=this;e.each2(function(a,b){var c=g.id(b.data(\"select2-data\"));o(c,d)>=0&&(b.addClass(\"select2-selected\"),b.find(\".select2-result-selectable\").addClass(\"select2-selected\"))}),f.each2(function(a,b){b.is(\".select2-result-selectable\")||0!==b.find(\".select2-result-selectable:not(.select2-selected)\").length||b.addClass(\"select2-selected\")}),-1==this.highlight()&&c!==!1&&g.highlight(0),!this.opts.createSearchChoice&&!e.filter(\".select2-result:not(.select2-selected)\").length>0&&(!a||a&&!a.more&&0===this.results.find(\".select2-no-results\").length)&&J(g.opts.formatNoMatches,\"formatNoMatches\")&&this.results.append(\"<li class='select2-no-results'>\"+g.opts.formatNoMatches(g.search.val())+\"</li>\")},getMaxSearchWidth:function(){return this.selection.width()-s(this.search)},resizeSearch:function(){var a,b,c,d,e,f=s(this.search);a=C(this.search)+10,b=this.search.offset().left,c=this.selection.width(),d=this.selection.offset().left,e=c-(b-d)-f,a>e&&(e=c-f),40>e&&(e=c-f),0>=e&&(e=a),this.search.width(Math.floor(e))},getVal:function(){var a;return this.select?(a=this.select.val(),null===a?[]:a):(a=this.opts.element.val(),r(a,this.opts.separator))},setVal:function(b){var c;this.select?this.select.val(b):(c=[],a(b).each(function(){o(this,c)<0&&c.push(this)}),this.opts.element.val(0===c.length?\"\":c.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)q(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),c>0&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(c,d){var e,f=this;if(0===arguments.length)return this.getVal();if(e=this.data(),e.length||(e=[]),!c&&0!==c)return this.opts.element.val(\"\"),this.updateSelection([]),this.clearSearch(),d&&this.triggerChange({added:this.data(),removed:e}),void 0;if(this.setVal(c),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),d&&this.triggerChange(this.buildChangeDetails(e,this.data()));else{if(this.opts.initSelection===b)throw new Error(\"val() cannot be called if initSelection() is not defined\");this.opts.initSelection(this.opts.element,function(b){var c=a.map(b,f.id);f.setVal(c),f.updateSelection(b),f.clearSearch(),d&&f.triggerChange(f.buildChangeDetails(e,f.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error(\"Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.\");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(\".select2-search-choice\").each(function(){b.push(c.opts.id(a(this).data(\"select2-data\")))}),this.setVal(b),this.triggerChange()},data:function(b,c){var e,f,d=this;return 0===arguments.length?this.selection.find(\".select2-search-choice\").map(function(){return a(this).data(\"select2-data\")}).get():(f=this.data(),b||(b=[]),e=a.map(b,function(a){return d.opts.id(a)}),this.setVal(e),this.updateSelection(b),this.clearSearch(),c&&this.triggerChange(this.buildChangeDetails(f,this.data())),void 0)}}),a.fn.select2=function(){var d,g,h,i,j,c=Array.prototype.slice.call(arguments,0),k=[\"val\",\"destroy\",\"opened\",\"open\",\"close\",\"focus\",\"isFocused\",\"container\",\"dropdown\",\"onSortStart\",\"onSortEnd\",\"enable\",\"disable\",\"readonly\",\"positionDropdown\",\"data\",\"search\"],l=[\"opened\",\"isFocused\",\"container\",\"dropdown\"],m=[\"val\",\"data\"],n={search:\"externalSearch\"};return this.each(function(){if(0===c.length||\"object\"==typeof c[0])d=0===c.length?{}:a.extend({},c[0]),d.element=a(this),\"select\"===d.element.get(0).tagName.toLowerCase()?j=d.element.prop(\"multiple\"):(j=d.multiple||!1,\"tags\"in d&&(d.multiple=j=!0)),g=j?new f:new e,g.init(d);else{if(\"string\"!=typeof c[0])throw\"Invalid arguments to select2 plugin: \"+c;if(o(c[0],k)<0)throw\"Unknown method: \"+c[0];if(i=b,g=a(this).data(\"select2\"),g===b)return;if(h=c[0],\"container\"===h?i=g.container:\"dropdown\"===h?i=g.dropdown:(n[h]&&(h=n[h]),i=g[h].apply(g,c.slice(1))),o(c[0],l)>=0||o(c[0],m)&&1==c.length)return!1}}),i===b?this:i},a.fn.select2.defaults={width:\"copy\",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:\"\",dropdownCssClass:\"\",formatResult:function(a,b,c,d){var e=[];return E(a.text,c.term,e,d),e.join(\"\")},formatSelection:function(a,c,d){return a?d(a.text):b},sortResults:function(a){return a},formatResultCssClass:function(){return b},formatSelectionCssClass:function(){return b},formatNoMatches:function(){return\"No matches found\"},formatInputTooShort:function(a,b){var c=b-a.length;return\"Please enter \"+c+\" more character\"+(1==c?\"\":\"s\")},formatInputTooLong:function(a,b){var c=a.length-b;return\"Please delete \"+c+\" character\"+(1==c?\"\":\"s\")},formatSelectionTooBig:function(a){return\"You can only select \"+a+\" item\"+(1==a?\"\":\"s\")},formatLoadMore:function(){return\"Loading more results...\"},formatSearching:function(){return\"Searching...\"},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return n(\"\"+b).toUpperCase().indexOf(n(\"\"+a).toUpperCase())>=0},separator:\",\",tokenSeparators:[],tokenizer:M,escapeMarkup:F,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return b}},a.fn.select2.ajaxDefaults={transport:a.ajax,params:{type:\"GET\",cache:!1,dataType:\"json\"}},window.Select2={query:{ajax:G,local:H,tags:I},util:{debounce:v,markMatch:E,escapeMarkup:F,stripDiacritics:n},\"class\":{\"abstract\":d,single:e,multi:f}}}}(jQuery);","(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch || {};\n  var ar = br['auto-reload'] || {};\n  if (!WebSocket || !ar.enabled) return;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=\"stylesheet\"]'))\n        .filter(function(link){\n          return (link != null && link.href != null);\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n    }\n  };\n  var port = ar.port || 9485;\n  var host = (!br['server']) ? window.location.hostname : br['server'];\n  var connection = new WebSocket('ws://' + host + ':' + port);\n  connection.onmessage = function(event) {\n    var message = event.data;\n    var b = window.brunch;\n    if (!b || !b['auto-reload'] || !b['auto-reload'].enabled) return;\n    if (reloaders[message] != null) {\n      reloaders[message]();\n    } else {\n      reloaders.page();\n    }\n  };\n})();\n","// lib/handlebars/base.js\n\n/*jshint eqnull:true*/\nthis.Handlebars = {};\n\n(function(Handlebars) {\n\nHandlebars.VERSION = \"1.0.rc.1\";\n\nHandlebars.helpers  = {};\nHandlebars.partials = {};\n\nHandlebars.registerHelper = function(name, fn, inverse) {\n  if(inverse) { fn.not = inverse; }\n  this.helpers[name] = fn;\n};\n\nHandlebars.registerPartial = function(name, str) {\n  this.partials[name] = str;\n};\n\nHandlebars.registerHelper('helperMissing', function(arg) {\n  if(arguments.length === 2) {\n    return undefined;\n  } else {\n    throw new Error(\"Could not find property '\" + arg + \"'\");\n  }\n});\n\nvar toString = Object.prototype.toString, functionType = \"[object Function]\";\n\nHandlebars.registerHelper('blockHelperMissing', function(context, options) {\n  var inverse = options.inverse || function() {}, fn = options.fn;\n\n\n  var ret = \"\";\n  var type = toString.call(context);\n\n  if(type === functionType) { context = context.call(this); }\n\n  if(context === true) {\n    return fn(this);\n  } else if(context === false || context == null) {\n    return inverse(this);\n  } else if(type === \"[object Array]\") {\n    if(context.length > 0) {\n      return Handlebars.helpers.each(context, options);\n    } else {\n      return inverse(this);\n    }\n  } else {\n    return fn(context);\n  }\n});\n\nHandlebars.K = function() {};\n\nHandlebars.createFrame = Object.create || function(object) {\n  Handlebars.K.prototype = object;\n  var obj = new Handlebars.K();\n  Handlebars.K.prototype = null;\n  return obj;\n};\n\nHandlebars.registerHelper('each', function(context, options) {\n  var fn = options.fn, inverse = options.inverse;\n  var ret = \"\", data;\n\n  if (options.data) {\n    data = Handlebars.createFrame(options.data);\n  }\n\n  if(context && context.length > 0) {\n    for(var i=0, j=context.length; i<j; i++) {\n      if (data) { data.index = i; }\n      ret = ret + fn(context[i], { data: data });\n    }\n  } else {\n    ret = inverse(this);\n  }\n  return ret;\n});\n\nHandlebars.registerHelper('if', function(context, options) {\n  var type = toString.call(context);\n  if(type === functionType) { context = context.call(this); }\n\n  if(!context || Handlebars.Utils.isEmpty(context)) {\n    return options.inverse(this);\n  } else {\n    return options.fn(this);\n  }\n});\n\nHandlebars.registerHelper('unless', function(context, options) {\n  var fn = options.fn, inverse = options.inverse;\n  options.fn = inverse;\n  options.inverse = fn;\n\n  return Handlebars.helpers['if'].call(this, context, options);\n});\n\nHandlebars.registerHelper('with', function(context, options) {\n  return options.fn(context);\n});\n\nHandlebars.registerHelper('log', function(context) {\n  Handlebars.log(context);\n});\n\n}(this.Handlebars));\n;\n// lib/handlebars/utils.js\nHandlebars.Exception = function(message) {\n  var tmp = Error.prototype.constructor.apply(this, arguments);\n\n  for (var p in tmp) {\n    if (tmp.hasOwnProperty(p)) { this[p] = tmp[p]; }\n  }\n\n  this.message = tmp.message;\n};\nHandlebars.Exception.prototype = new Error();\n\n// Build out our basic SafeString type\nHandlebars.SafeString = function(string) {\n  this.string = string;\n};\nHandlebars.SafeString.prototype.toString = function() {\n  return this.string.toString();\n};\n\n(function() {\n  var escape = {\n    \"&\": \"&amp;\",\n    \"<\": \"&lt;\",\n    \">\": \"&gt;\",\n    '\"': \"&quot;\",\n    \"'\": \"&#x27;\",\n    \"`\": \"&#x60;\"\n  };\n\n  var badChars = /[&<>\"'`]/g;\n  var possible = /[&<>\"'`]/;\n\n  var escapeChar = function(chr) {\n    return escape[chr] || \"&amp;\";\n  };\n\n  Handlebars.Utils = {\n    escapeExpression: function(string) {\n      // don't escape SafeStrings, since they're already safe\n      if (string instanceof Handlebars.SafeString) {\n        return string.toString();\n      } else if (string == null || string === false) {\n        return \"\";\n      }\n\n      if(!possible.test(string)) { return string; }\n      return string.replace(badChars, escapeChar);\n    },\n\n    isEmpty: function(value) {\n      if (typeof value === \"undefined\") {\n        return true;\n      } else if (value === null) {\n        return true;\n      } else if (value === false) {\n        return true;\n      } else if(Object.prototype.toString.call(value) === \"[object Array]\" && value.length === 0) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  };\n})();;\n// lib/handlebars/runtime.js\nHandlebars.VM = {\n  template: function(templateSpec) {\n    // Just add water\n    var container = {\n      escapeExpression: Handlebars.Utils.escapeExpression,\n      invokePartial: Handlebars.VM.invokePartial,\n      programs: [],\n      program: function(i, fn, data) {\n        var programWrapper = this.programs[i];\n        if(data) {\n          return Handlebars.VM.program(fn, data);\n        } else if(programWrapper) {\n          return programWrapper;\n        } else {\n          programWrapper = this.programs[i] = Handlebars.VM.program(fn);\n          return programWrapper;\n        }\n      },\n      programWithDepth: Handlebars.VM.programWithDepth,\n      noop: Handlebars.VM.noop\n    };\n\n    return function(context, options) {\n      options = options || {};\n      return templateSpec.call(container, Handlebars, context, options.helpers, options.partials, options.data);\n    };\n  },\n\n  programWithDepth: function(fn, data, $depth) {\n    var args = Array.prototype.slice.call(arguments, 2);\n\n    return function(context, options) {\n      options = options || {};\n\n      return fn.apply(this, [context, options.data || data].concat(args));\n    };\n  },\n  program: function(fn, data) {\n    return function(context, options) {\n      options = options || {};\n\n      return fn(context, options.data || data);\n    };\n  },\n  noop: function() { return \"\"; },\n  invokePartial: function(partial, name, context, helpers, partials, data) {\n    var options = { helpers: helpers, partials: partials, data: data };\n\n    if(partial === undefined) {\n      throw new Handlebars.Exception(\"The partial \" + name + \" could not be found\");\n    } else if(partial instanceof Function) {\n      return partial(context, options);\n    } else if (!Handlebars.compile) {\n      throw new Handlebars.Exception(\"The partial \" + name + \" could not be compiled when running in runtime-only mode\");\n    } else {\n      partials[name] = Handlebars.compile(partial, {data: data !== undefined});\n      return partials[name](context, options);\n    }\n  }\n};\n\nHandlebars.template = Handlebars.VM.template;\n;\n"]}